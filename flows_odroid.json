[{"id":"cfd7352b.de1028","type":"tab","label":"Tachosignal","disabled":false,"info":"","env":[]},{"id":"e1a94fdd.a1f8a","type":"tab","label":"BRAKE","disabled":false,"info":"# Wie lange steht der Fahrer auf der Bremse?","env":[]},{"id":"fe9bd502.da1c48","type":"tab","label":"CLUTCH","disabled":false,"info":"# Frage: Wie lange steht der Fahrer auf der Kupplung?\n\n","env":[]},{"id":"60b4d38a.a1148c","type":"tab","label":"WISH","disabled":false,"info":"","env":[]},{"id":"16c92fd3cb0a8d60","type":"tab","label":"IGNITION","disabled":false,"info":"","env":[]},{"id":"6f2009d6.0acd88","type":"tab","label":"q-gate und Junk","disabled":false,"info":"","env":[]},{"id":"1889e7f2.72f9e8","type":"tab","label":"SWITCH OUTPUT","disabled":false,"info":"","env":[]},{"id":"93d7b78b.d2d2d8","type":"tab","label":"UDP_from_MySQL","disabled":false,"info":"","env":[]},{"id":"86c60d8f68f58406","type":"tab","label":"UDP_Receive","disabled":false,"info":"","env":[]},{"id":"3b3462fd.256a6e","type":"tab","label":"HTTP_from_MySQL","disabled":false,"info":"","env":[]},{"id":"c1d663c3.e4762","type":"tab","label":"BLE_from_MySQL","disabled":false,"info":"","env":[]},{"id":"bffdc47c.00e2b8","type":"tab","label":"WakeUp GoPro","disabled":false,"info":"","env":[]},{"id":"89b9f172.e63fe","type":"tab","label":"UDP Heartbeat","disabled":false,"info":"","env":[]},{"id":"fb013fe93cb41d30","type":"tab","label":"BLE_Heartbeat","disabled":true,"info":"","env":[]},{"id":"a71d92ae.7639a","type":"tab","label":"BlackBox_to_MySQL","disabled":false,"info":"","env":[]},{"id":"1ae5525ffad3fdda","type":"tab","label":"DB_AutoSet","disabled":false,"info":"","env":[]},{"id":"d3786684.caf558","type":"tab","label":"DB_Connectivity","disabled":false,"info":"","env":[]},{"id":"c31f75c1.823298","type":"tab","label":"DB_Parameter","disabled":false,"info":"","env":[]},{"id":"9004c20f.8cb68","type":"tab","label":"DB_TagSettings","disabled":false,"info":"","env":[]},{"id":"2c60e581ebb81688","type":"tab","label":"DB_GoPro_Settings_1","disabled":false,"info":"","env":[]},{"id":"dec8dfb9.8b01d8","type":"tab","label":"DB_GoPro_Settings_2","disabled":false,"info":"","env":[]},{"id":"b99a57ec.925fb8","type":"tab","label":"Global_Variable_Backup","disabled":false,"info":"","env":[]},{"id":"90509ca450600ee8","type":"tab","label":"Global_Variabel --> Environmental_Variable_Backup","disabled":false,"info":"","env":[]},{"id":"247347a2.a3c6b8","type":"tab","label":"Restart Nodered","disabled":false,"info":"","env":[]},{"id":"55f61d10.869814","type":"tab","label":"Reboot","disabled":false,"info":"","env":[]},{"id":"2eac6958.c8b676","type":"tab","label":"Flow 4","disabled":false,"info":"","env":[]},{"id":"cbd4e407.b4f008","type":"tab","label":"IGNITION","disabled":false,"info":"","env":[]},{"id":"d995685759e9a253","type":"tab","label":"GPS","disabled":false,"info":"","env":[]},{"id":"5aa5a8f03826d123","type":"tab","label":"AHRS","disabled":false,"info":"","env":[]},{"id":"dbfdd28e.d60f","type":"tab","label":"BLE_Connection","disabled":false,"info":"","env":[]},{"id":"8b3378e67f4ebeb9","type":"tab","label":"BLE_WIFI_Stability","disabled":false,"info":"","env":[]},{"id":"990bb909f6d677c8","type":"tab","label":"WakeUp_GoPro BACKUP","disabled":true,"info":"","env":[]},{"id":"e089622.6a906a","type":"tab","label":"Flow 1"},{"id":"1516d403.d6df1c","type":"subflow","name":"VELOCITY","info":"","category":"","in":[{"x":120,"y":120,"wires":[{"id":"1e4b2556.645e7b"}]}],"out":[{"x":700,"y":120,"wires":[{"id":"31369dfb.4bd482","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"4c0714ce.c8c0ac","type":"subflow","name":"PassLimit","info":"","category":"","in":[{"x":40,"y":40,"wires":[{"id":"9580cd86.d9557"}]}],"out":[{"x":540,"y":40,"wires":[{"id":"ef28d4ab.10e658","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"bcd7ab10.7fcb08","type":"subflow","name":"BLE ShutterStart","info":"","category":"","in":[{"x":140,"y":80,"wires":[{"id":"64c033f6.224f1c"}]}],"out":[{"x":880,"y":80,"wires":[{"id":"189437f3.c162c8","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"5df884bd.7da3ac","type":"subflow","name":"BLE ShutterStop","info":"","category":"","in":[{"x":80,"y":120,"wires":[{"id":"4b90a18c.a24db"}]}],"out":[{"x":840,"y":120,"wires":[{"id":"8bc5a774.2371e8","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"ec2aab9f.334378","type":"subflow","name":"Kill NodeRed","info":"","category":"","in":[{"x":80,"y":180,"wires":[{"id":"510c3670.bf66e8"}]}],"out":[],"env":[],"meta":{},"color":"#DDAA99"},{"id":"ff56ed00.f5dfb","type":"subflow","name":"Reboot","info":"","category":"","in":[{"x":180,"y":80,"wires":[{"id":"a4b1237e.72987"}]}],"out":[],"env":[],"meta":{},"color":"#DDAA99"},{"id":"6e9ad42b.1d818c","type":"subflow","name":"Shutdown","info":"","category":"","in":[{"x":160,"y":80,"wires":[{"id":"63d1baa9.111444"}]}],"out":[],"env":[],"meta":{},"color":"#DDAA99"},{"id":"699c80d1.c0993","type":"subflow","name":"BLE Wifi ON","info":"","category":"","in":[{"x":160,"y":180,"wires":[{"id":"fe48ee53.2165a"}]}],"out":[{"x":980,"y":180,"wires":[{"id":"a30ea43b.ebbff8","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"a6748f13.b6d87","type":"subflow","name":"HTTP WifiStreaming ON","info":"","category":"","in":[{"x":100,"y":200,"wires":[{"id":"3156c3f9.a4885c"}]}],"out":[{"x":1060,"y":200,"wires":[{"id":"6b48c5fe.0b4d5c","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"e29abac8.fc1078","type":"subflow","name":"BLE Wifi OFF","info":"","category":"","in":[{"x":280,"y":200,"wires":[{"id":"d5529a6f.b9e328"}]}],"out":[{"x":1060,"y":200,"wires":[{"id":"62f35c4d.f9f794","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"6c259dd5.72f0d4","type":"subflow","name":"Ring Buffer","info":"# Ring buffer\n## Last in First Out subflow\nThis flow receives a series of msg.payloads and builds a ring bifferwith a specific buffer size. The buffer size is configurabe through subflows enviroment variables.\n\n### Input\nThe `msg.payload`will be added to the ring buffer array, except if `msg.topic == list`\n\nIf `msg.topic == list` the complete buffer will be sent at the secont output.\n\n\n### Output 1\nAlways sends the original message\n\n### Output 2\nAlways return the complete buffer.\n\n### Status\nAlways shows the queue size.\n\n### Enviroment Variables\n`Buffer_Size` defines the size of the queue. If a new item arrives and the queue is full, the oldest item will be removed.","category":"","in":[{"x":180,"y":100,"wires":[{"id":"b4286eb1.847af"}]}],"out":[{"x":280,"y":40,"wires":[{"id":"6c259dd5.72f0d4","port":0}]},{"x":800,"y":140,"wires":[{"id":"6c6b3594.fac22c","port":0}]}],"env":[{"name":"Buffer_Size","type":"num","value":"5"}],"inputLabels":["payload"],"outputLabels":["Original message","Buffer"],"icon":"font-awesome/fa-circle-o-notch","status":{"x":1020,"y":100,"wires":[{"id":"36df5ea7.231082","port":0}]}},{"id":"7a5d0b6b.156a24","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey","palette":"light"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"8be2921c.a6a47","type":"ui_tab","name":"Tag Settings","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"a3598685.c656f8","type":"ui_group","name":"Tag Limits","tab":"8be2921c.a6a47","order":1,"disp":true,"width":"22","collapse":false,"className":""},{"id":"ff3d23ed.851e","type":"ui_group","name":"Default","tab":"b0d4ebc5.f66f98","order":1,"disp":true,"width":"6","collapse":false},{"id":"b0d4ebc5.f66f98","type":"ui_tab","name":"TESTS","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"4b0eb527.16d5ec","type":"MySQLdatabase","host":"127.0.0.1","port":"3306","db":"blackbox","tz":""},{"id":"395f2a47.6cfaf6","type":"MySQLdatabase","host":"127.0.0.1","port":"3306","db":"UDP_CMD","tz":""},{"id":"760a3e67.03abe","type":"MySQLdatabase","host":"127.0.0.1","port":"3306","db":"HTTP_CMD","tz":""},{"id":"7270f351.076f3c","type":"ui_tab","name":"Connectivity","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"fb75f346.d7f78","type":"ui_group","name":"UDP (Smart Remote)","tab":"7270f351.076f3c","order":1,"disp":true,"width":"6","collapse":false},{"id":"f5a966d8.d5c368","type":"ui_group","name":"HTTP (GoPro App)","tab":"7270f351.076f3c","order":3,"disp":true,"width":"6","collapse":false},{"id":"7193ba64.490654","type":"ui_group","name":"BLE (GoPro App)","tab":"7270f351.076f3c","order":5,"disp":true,"width":"7","collapse":false,"className":""},{"id":"ad805b2f.308398","type":"ui_group","name":"","tab":"7270f351.076f3c","order":2,"disp":true,"width":"1","collapse":false},{"id":"22f841fd.fe797e","type":"ui_group","name":"","tab":"7270f351.076f3c","order":4,"disp":true,"width":"1","collapse":false},{"id":"92dc2f25.cdcf4","type":"ui_spacer","name":"spacer","group":"f5a966d8.d5c368","order":1,"width":1,"height":1},{"id":"7247376.1528ec8","type":"ui_spacer","name":"spacer","group":"22f841fd.fe797e","order":1,"width":1,"height":1},{"id":"3e4e30cc.ab175","type":"ui_group","name":"","tab":"7270f351.076f3c","order":6,"disp":true,"width":"1","collapse":false},{"id":"92b5dd47.8a1a1","type":"ui_spacer","name":"spacer","group":"7193ba64.490654","order":1,"width":1,"height":1},{"id":"dcb7070f.a6f788","type":"ui_spacer","name":"spacer","group":"3e4e30cc.ab175","order":1,"width":1,"height":1},{"id":"230fd081.affe6","type":"MySQLdatabase","host":"127.0.0.1","port":"3306","db":"BLE_CMD","tz":""},{"id":"62967dc9.bffff4","type":"ui_tab","name":"Parameter","icon":"dashboard","order":5,"disabled":false,"hidden":false},{"id":"c63c3171.75836","type":"ui_group","name":"Odroid - Connectivity","tab":"62967dc9.bffff4","order":1,"disp":true,"width":"7","collapse":false,"className":""},{"id":"2f80fea05ac68d06","type":"ui_group","name":"GPS","tab":"62967dc9.bffff4","order":2,"disp":true,"width":"7","collapse":false,"className":""},{"id":"e9a45c1a.a0da","type":"ui_group","name":"G_2","tab":"4c0b230b.9a171c","order":4,"disp":false,"width":"25","collapse":false,"className":""},{"id":"4c0b230b.9a171c","type":"ui_tab","name":"Drivecamlrgscreen","icon":"dashboard","order":6},{"id":"5c06971a.d78e58","type":"ui_group","name":"DemoTab","tab":"77192d8a.e0785c","order":1,"disp":true,"width":"6","collapse":false},{"id":"77192d8a.e0785c","type":"ui_tab","name":"Demo","icon":"dashboard","order":7,"disabled":false,"hidden":false},{"id":"120779d6eed12ce2","type":"mqtt-broker","name":"","broker":"localhost:1883","port":"1883","clientid":"","autoConnect":true,"usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"sessionExpiry":""},{"id":"43eeb9362523944e","type":"ui_group","name":"GoPro - Connectivity","tab":"62967dc9.bffff4","order":1,"disp":true,"width":"7","collapse":false,"className":""},{"id":"19cd94c9.124aeb","type":"MySQLdatabase","host":"mariadb","port":"3306","db":"hpsim","tz":""},{"id":"7da9517d.305a1","type":"ui_group","name":"","tab":"1ea6ab39.e574b5","order":1,"disp":true,"width":"6","collapse":false},{"id":"1ea6ab39.e574b5","type":"ui_tab","name":"Home","icon":"dashboard","order":8,"disabled":false,"hidden":false},{"id":"f4ddc713.cb9a58","type":"ui_group","name":"T1","tab":"763667c5.ae1af8","order":1,"disp":true,"width":"6","collapse":false},{"id":"763667c5.ae1af8","type":"ui_tab","name":"LAB","icon":"dashboard","order":9},{"id":"9a6307ee14eb63d3","type":"ui_group","name":"GoPro Settings","tab":"5373bd2a85a4de47","order":2,"disp":true,"width":26,"collapse":false,"className":""},{"id":"5373bd2a85a4de47","type":"ui_tab","name":"GoPro Settings","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"7c12f85c9c65c62f","type":"ui_group","name":"Default","tab":"bdf6348413fab83a","order":1,"disp":false,"width":"6","collapse":false,"className":""},{"id":"bdf6348413fab83a","type":"ui_tab","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"2d4fe667.28f8ba","type":"ui_group","name":"demo","tab":"1caa8458.b17814","order":2,"disp":true,"width":"12","collapse":false},{"id":"1caa8458.b17814","type":"ui_tab","name":"Demo","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"582c96de511bcea0","type":"ui_group","name":"Date and Time","tab":"62967dc9.bffff4","order":4,"disp":true,"width":"7","collapse":false,"className":""},{"id":"9b4149d3a69e1bba","type":"ui_spacer","z":"dec8dfb9.8b01d8","name":"spacer","group":"9a6307ee14eb63d3","order":26,"width":26,"height":1},{"id":"79387180a4061caa","type":"ui_spacer","z":"dec8dfb9.8b01d8","name":"spacer","group":"9a6307ee14eb63d3","order":32,"width":26,"height":1},{"id":"065d5b382037bf31","type":"ui_spacer","z":"dec8dfb9.8b01d8","name":"spacer","group":"9a6307ee14eb63d3","order":76,"width":13,"height":1},{"id":"ebe661dcaffc5a9b","type":"ui_spacer","z":"dec8dfb9.8b01d8","name":"spacer","group":"9a6307ee14eb63d3","order":77,"width":26,"height":1},{"id":"667d40d938d0e811","type":"ui_spacer","z":"dec8dfb9.8b01d8","name":"spacer","group":"9a6307ee14eb63d3","order":101,"width":13,"height":1},{"id":"3ff01ddb557a03bc","type":"ui_spacer","z":"dec8dfb9.8b01d8","name":"spacer","group":"9a6307ee14eb63d3","order":102,"width":26,"height":1},{"id":"55250577f66af935","type":"ui_spacer","z":"dec8dfb9.8b01d8","name":"spacer","group":"9a6307ee14eb63d3","order":132,"width":26,"height":1},{"id":"03739e2954dcc21c","type":"ui_tab","name":"AutoSet","icon":"dashboard","order":12,"disabled":false,"hidden":false},{"id":"611a0edaaf8618ed","type":"ui_group","name":"Point in Time","tab":"03739e2954dcc21c","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"d097ac8344ca5755","type":"chronos-config","name":"Aspach 5252","timezone":"","sunPositions":[]},{"id":"e942a84a.b6001","type":"ui_group","name":"demo2","tab":"ff76f52b.0ad13","order":2,"disp":true,"width":"20","collapse":false},{"id":"42ad9d73.0b0cac","type":"ui_group","name":"Demo3","tab":"ff76f52b.0ad13","order":3,"disp":true,"width":"12","collapse":false},{"id":"f135c9fd.5347a8","type":"ui_group","name":"demo1","tab":"ff76f52b.0ad13","order":1,"disp":true,"width":"23","collapse":false},{"id":"ff76f52b.0ad13","type":"ui_tab","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"8e256a02493c1822","type":"ui_group","name":"Tachosignal","tab":"62967dc9.bffff4","order":5,"disp":true,"width":7,"collapse":false,"className":""},{"id":"3407add49c3a0bc6","type":"ui_group","name":"Wish","tab":"62967dc9.bffff4","order":6,"disp":true,"width":7,"collapse":false,"className":""},{"id":"1e4b2556.645e7b","type":"function","z":"1516d403.d6df1c","name":"VELOCITY_GATE","func":"var NewMsg = { payload : 0, Speed : 0};\nvar Counter = context.get('Counter') || 0;\nvar OpenSwitchNode = 1;\nvar CloseSwitchNode = 0;\n\nif( msg.topic == \"Signal\" )\n{\n    Counter++;\n}\n\nNewMsg.payload = CloseSwitchNode;\n\nif( msg.topic == \"ResetCounter\" )\n{ \n    \n    NewMsg.payload = OpenSwitchNode;\n    NewMsg.Speed = (20 / 17) * Counter * 5  + (60 / 17);\n  \n    Counter = 0;\n}\n\ncontext.set('Counter', Counter);\n\nreturn NewMsg;","outputs":1,"noerr":0,"x":290,"y":120,"wires":[["31369dfb.4bd482"]]},{"id":"31369dfb.4bd482","type":"switch","z":"1516d403.d6df1c","name":"Moving","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":490,"y":120,"wires":[[]]},{"id":"9580cd86.d9557","type":"function","z":"4c0714ce.c8c0ac","name":"PassLimit","func":"var NewMsg = {payload : 0};\nvar OnClutchLimit = context.get('OnClutchLimit') || 0;\n\ncontext.set('OnClutchLimit') = msg.payload.OnClutchLimit;\n\ncontext.set('OnClutchLimit', OnClutchLimit);\n\nvar PassActualValue  = 1;\nvar BlockActualValue = 0;\n\nif( msg.Timespan >= 0)\n{\n    if( msg.Timespan >= OnClutchLimit)\n    {\n        NewMsg.payload = PassActualValue;\n    }\n    else\n    {\n        NewMsg.payload = BlockActualValue;\n    }\n}\n//if( msg.payload.OnClutchLimit == 'OnClutchLimit')\n//{\n//    context.set('OnClutchLimit', OnClutchLimit);\n//}\n\nreturn NewMsg;","outputs":1,"noerr":0,"x":160,"y":40,"wires":[["ef28d4ab.10e658"]]},{"id":"ef28d4ab.10e658","type":"switch","z":"4c0714ce.c8c0ac","name":"GreaterThanZero","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":40,"wires":[[]]},{"id":"64c033f6.224f1c","type":"function","z":"bcd7ab10.7fcb08","name":"SELECT ShutterStart","func":"msg.topic = \"SELECT BLE FROM BLE WHERE UniqueID = 1\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":80,"wires":[["85388f60.6a279"]]},{"id":"85388f60.6a279","type":"mysql","z":"bcd7ab10.7fcb08","mydb":"230fd081.affe6","name":"","x":530,"y":80,"wires":[["189437f3.c162c8"]]},{"id":"189437f3.c162c8","type":"change","z":"bcd7ab10.7fcb08","name":"BLE Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"b5f90072aa8d11e390460002a5d5c51b\":$.payload[0].BLE}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":80,"wires":[[]]},{"id":"4b90a18c.a24db","type":"function","z":"5df884bd.7da3ac","name":"SELECT ShutterStop","func":"msg.topic = \"SELECT BLE FROM BLE WHERE UniqueID = 2\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":120,"wires":[["79828421.29144c"]]},{"id":"79828421.29144c","type":"mysql","z":"5df884bd.7da3ac","mydb":"230fd081.affe6","name":"","x":490,"y":120,"wires":[["8bc5a774.2371e8"]]},{"id":"8bc5a774.2371e8","type":"change","z":"5df884bd.7da3ac","name":"BLE Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"b5f90072aa8d11e390460002a5d5c51b\":$.payload[0].BLE}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":120,"wires":[[]]},{"id":"510c3670.bf66e8","type":"exec","z":"ec2aab9f.334378","command":"ps aux | grep node-red | grep -v grep","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"node red grep node","x":410,"y":180,"wires":[["1895bac5.4f2bc5","f1b06b85.2d8378"],[],[]]},{"id":"2baa512d.ed7a2e","type":"inject","z":"ec2aab9f.334378","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":220,"y":100,"wires":[["510c3670.bf66e8"]]},{"id":"1895bac5.4f2bc5","type":"debug","z":"ec2aab9f.334378","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":610,"y":140,"wires":[]},{"id":"f1b06b85.2d8378","type":"function","z":"ec2aab9f.334378","name":"find PID","func":"\nvar pid = msg.payload.match(/\\s{3,}\\d{2,}\\s{1,}/);\nmsg.payload = pid.toString().trim();\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":220,"wires":[["c4deea5c.31c078","e29c677.8090898"]]},{"id":"c4deea5c.31c078","type":"debug","z":"ec2aab9f.334378","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":790,"y":140,"wires":[]},{"id":"e29c677.8090898","type":"exec","z":"ec2aab9f.334378","command":"kill","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"kill PID","x":780,"y":220,"wires":[[],[],[]]},{"id":"a4b1237e.72987","type":"exec","z":"ff56ed00.f5dfb","command":"sudo reboot","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":410,"y":80,"wires":[[],[],[]]},{"id":"63d1baa9.111444","type":"exec","z":"6e9ad42b.1d818c","command":"sudo shutdown -h now","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":440,"y":80,"wires":[[],[],[]]},{"id":"e8a8629.d78fba","type":"mysql","z":"699c80d1.c0993","mydb":"230fd081.affe6","name":"","x":610,"y":180,"wires":[["a30ea43b.ebbff8"]]},{"id":"fe48ee53.2165a","type":"function","z":"699c80d1.c0993","name":"SELECT WifiOn","func":"msg.topic = \"SELECT BLE, HW1, HW2, HW3 FROM BLE WHERE UniqueID = 21\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":180,"wires":[["e8a8629.d78fba"]]},{"id":"a30ea43b.ebbff8","type":"change","z":"699c80d1.c0993","name":"BLE Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"{$join([payload[0].HW1,payload[0].HW2,payload[0].HW3]):$.payload[0].BLE}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":180,"wires":[[]]},{"id":"6b48c5fe.0b4d5c","type":"http request","z":"a6748f13.b6d87","name":"Wifi Streaming ON","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":890,"y":200,"wires":[[]]},{"id":"3156c3f9.a4885c","type":"function","z":"a6748f13.b6d87","name":"SELECT Wifi Streamin ON","func":"msg.topic = \"SELECT info, http FROM HTTP WHERE UniqueID = 3\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":200,"wires":[["7be21644.7c9868"]]},{"id":"7be21644.7c9868","type":"mysql","z":"a6748f13.b6d87","mydb":"760a3e67.03abe","name":"","x":510,"y":200,"wires":[["cf669f0b.d5794"]]},{"id":"cf669f0b.d5794","type":"change","z":"a6748f13.b6d87","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload[0].http","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":200,"wires":[["6b48c5fe.0b4d5c"]]},{"id":"75bcb968.6a1c48","type":"mysql","z":"e29abac8.fc1078","mydb":"230fd081.affe6","name":"","x":650,"y":200,"wires":[["e10c2208.0c5c8","62f35c4d.f9f794"]]},{"id":"fe02bb85.993868","type":"debug","z":"e29abac8.fc1078","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":140,"wires":[]},{"id":"e10c2208.0c5c8","type":"debug","z":"e29abac8.fc1078","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":670,"y":140,"wires":[]},{"id":"d5529a6f.b9e328","type":"function","z":"e29abac8.fc1078","name":"SELECT WifiOff","func":"msg.topic = \"SELECT BLE, HW1, HW2, HW3 FROM BLE WHERE UniqueID = 22\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":200,"wires":[["75bcb968.6a1c48"]]},{"id":"62f35c4d.f9f794","type":"change","z":"e29abac8.fc1078","name":"BLE Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"{$join([payload[0].HW1,payload[0].HW2,payload[0].HW3]):$.payload[0].BLE}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":200,"wires":[["fe02bb85.993868"]]},{"id":"b4286eb1.847af","type":"switch","z":"6c259dd5.72f0d4","name":"Topic","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"list","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":310,"y":100,"wires":[["6c6b3594.fac22c"],["afc05e2d.59f36"]]},{"id":"afc05e2d.59f36","type":"function","z":"6c259dd5.72f0d4","name":"put","func":"var queue = flow.get(\"queue\")\n\n\nif (!Array.isArray(queue)){\n    queue = [];\n}else if ( queue.length >= env.get(\"ThrottleMeanPool\") ){\n    queue.pop(1);\n}\n\nqueue.unshift(msg.payload);\n\nflow.set(\"queue\", queue);\nmsg.payload = queue;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":140,"wires":[["6c6b3594.fac22c"]]},{"id":"6c6b3594.fac22c","type":"change","z":"6c259dd5.72f0d4","name":"list","rules":[{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":100,"wires":[["36df5ea7.231082"]]},{"id":"36df5ea7.231082","type":"change","z":"6c259dd5.72f0d4","name":"Count","rules":[{"t":"set","p":"payload","pt":"msg","to":"$count(msg.payload)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":100,"wires":[[]]},{"id":"caf8c4a3.b53d38","type":"inject","z":"cfd7352b.de1028","name":"","props":[{"p":"topic","vt":"str"},{"p":"TachoSampleRate","v":"TachoSampleRate","vt":"env"},{"p":"SwitchNode","v":"0","vt":"num"},{"p":"timestamp","v":"","vt":"date"},{"p":"speed","v":"0","vt":"num"}],"repeat":"${TachoSampleRate}","crontab":"","once":true,"onceDelay":0.1,"topic":"ResetCounter","x":120,"y":400,"wires":[["0566894ebcfba39c"]]},{"id":"c9cad5df.c4aa38","type":"debug","z":"cfd7352b.de1028","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":220,"wires":[]},{"id":"fac4e743.ab3158","type":"switch","z":"cfd7352b.de1028","name":"Moving","property":"SwitchNode","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":920,"y":300,"wires":[["c9cad5df.c4aa38","69db7770298ddf02"],["f4de22060eed7253"]]},{"id":"2a7049c1e378ead2","type":"exec","z":"cfd7352b.de1028","command":"gpiomon -r -b gpiochip0 70","addpay":"","append":"","useSpawn":"true","timer":"","winHide":false,"oldrc":false,"name":"","x":340,"y":300,"wires":[["59a60fc1da835c10","0566894ebcfba39c"],[],[]]},{"id":"59a60fc1da835c10","type":"debug","z":"cfd7352b.de1028","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":410,"y":240,"wires":[]},{"id":"8ce1804fae5ed527","type":"inject","z":"cfd7352b.de1028","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"previousPayload","v":"0","vt":"num"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"rising","payloadType":"date","x":120,"y":240,"wires":[["2a7049c1e378ead2"]]},{"id":"54120e8afd988f5c","type":"debug","z":"cfd7352b.de1028","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":750,"y":240,"wires":[]},{"id":"f4de22060eed7253","type":"debug","z":"cfd7352b.de1028","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":360,"wires":[]},{"id":"69db7770298ddf02","type":"link out","z":"cfd7352b.de1028","name":"Tachosignal -->Balckbox_to_MySQL_insert_Velocity","mode":"link","links":["616a5d227d0d8ef5","5cda5648b888f4c2"],"x":1075,"y":260,"wires":[]},{"id":"0566894ebcfba39c","type":"function","z":"cfd7352b.de1028","name":"Velocity_Gate","func":"\n\nvar NewMsg = {TachoFreq:0, speed:0, counter:0};\nvar Counter = context.get('Counter') || 0;\nvar OpenSwitch = 1;\nvar CloseSwitch = 0;\nvar speed = 0;\nvar TachoSampleRate = msg.TachoSampleRate; \n\nconst reg1 = /.*\\[\\s*/;\nconst reg2 = /\\./;\nconst reg3 = /\\]/;\nconst reg4 = /\\n.*\\n*/;\n////const reg1 = /\\d{1,}-\\d{1,}-\\d{1,}-/;\n//const reg1 = /\\d{1,}-\\d{1,}-/;\n//const reg2 = /\\n\\.*\\n/;\n\n\n//add tick to counter only if timespan > 6ms (anti-jitter); maximale Frequenz von tacho ticks 166Hz @ 200km/h d.h. alle 6,02 ms\n\nif( msg.topic == \"rising\")\n{\n    msg.SwitchNode = CloseSwitch;\n    msg.payload = msg.payload.replace(reg1, \"\").replace(reg2, \"\").replace(reg3, \"\").replace(reg4, \"\");\n   //NewMsg.TachoLimitFreq = flow.get(\"previousPayload\");\n   //NewMsg.TachoLimitFreq = msg.payload;\n    \n    //msg.previousPayload = flow.get(\"previousPayload\");\n    //flow.set(\"previousPayload\", msg.previousPayload);\n}\n\n if (msg.payload - flow.get(\"previousPayload\") > global.get(\"TachoLimitFreq\") * 1000000)\n{\n    NewMsg.TachoFreq = (msg.payload - flow.get(\"previousPayload\")) / 1000000;\n    msg.previousPayload = flow.get(\"previousPayload\");\n    flow.set(\"previousPayload\", msg.payload);\n    \n    Counter++;\n    NewMsg.counter = Counter; \n}\n\nif( msg.topic == \"ResetCounter\" )\n{ \n    \n    msg.SwitchNode = OpenSwitch;\n    //speed = ((20 / 17) * Counter / global.get(\"TachoSampleRate\")) + (60 / 17);\n    speed = ((20 / 17) * Counter / TachoSampleRate) + (60 / 17);\n    if (speed <= 60 / 17)\n    {\n        NewMsg.speed = 0;\n        msg.speed = NewMsg.speed;\n    }\n    else\n    {\n        NewMsg.speed = Math.round(speed);\n        msg.speed = NewMsg.speed;\n    }\n    \n    NewMsg.counter = Counter;\n    Counter = 0;\n}\n\ncontext.set('Counter', Counter);\n\nreturn [[msg,NewMsg]];\n\n","outputs":1,"noerr":0,"initialize":"// Der Code hier wird ausgeführt,\n// wenn der Node gestartet wird\nflow.set(\"previousPayload\", 0);","finalize":"","libs":[],"x":700,"y":300,"wires":[["54120e8afd988f5c","fac4e743.ab3158"]],"info":"Achtung! Bei desem Node steht das Entscheidende im Start-Register\n\nDies ist absulut nowendig sonst läft der Function-Node \"Velocity-Gate\" nach dem Nodered-Start nicht an!!"},{"id":"6b0183c52badd896","type":"comment","z":"cfd7352b.de1028","name":"Achtung! Bei desem Node steht das Entscheidende im Start-Register","info":"","x":760,"y":360,"wires":[]},{"id":"f35cdcdb.43dee","type":"function","z":"e1a94fdd.a1f8a","name":"setTimeStamp_State","func":"var ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.payload = (new Date(Date.now() - offset)).toISOString()+ \"_\" + msg.payload;\n\nreturn msg;\n\n\n//orig\n\n//var ts = new Date();\n//msg.payload = ts.toISOString() + \"_\" + msg.payload;\n////msg.payload = ts.toUTCString() + \"_\" + msg.payload;\n//return msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":40,"wires":[["8f797501.967878"]]},{"id":"d256d3c0.78001","type":"buffer-array","z":"e1a94fdd.a1f8a","name":"Buffer_Value_Pair","bufferLen":"2","startWhenFilled":true,"x":930,"y":40,"wires":[["ddbd59f9.90cf48"]]},{"id":"ddbd59f9.90cf48","type":"function","z":"e1a94fdd.a1f8a","name":"Timespan_Calculation","func":"//var NewMsg = {Timestamp1:0, Timestamp2:0, Timestamp3:0, Timestamp4:0, Signal1:\"0\", Signal2:\"0\", Signal3:\"0\", Signal4:\"0\", Timespan1:0, Timespan2:0, Timespan3:0}\nvar NewMsg = {Topic: \"ACTUALVALUE\", Timestamp1:0, Timestamp2:0, Signal1:\"0\", Signal2:\"0\", Timespan:0}\n\nvar d1 = Date.parse(msg.payload[0][0]);\nvar d2 = Date.parse(msg.payload[1][0]);\n//var d3 = Date.parse(msg.payload[2][0]);\n//var d4 = Date.parse(msg.payload[3][0]);\n  \nNewMsg.Timestamp1= d1;\nNewMsg.Timestamp2= d2;\n//NewMsg.Timestamp3= d3;\n//NewMsg.Timestamp4= d4;\n\nNewMsg.Signal1 = msg.payload[0][1];\nNewMsg.Signal2 = msg.payload[1][1];\n//NewMsg.Signal3 = msg.payload[2][1];\n//NewMsg.Signal4 = msg.payload[3][1];\n\nNewMsg.Timespan = (d2 - d1) / 1000;\n//NewMsg.Timespan2 = (d3 - d2) / 1000;\n//NewMsg.Timespan3 = (d4 - d3) / 1000;\n\nreturn NewMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":40,"wires":[["8978db7d.5ca328","a1934b83.ac2d28","d27c894f.850d18"]]},{"id":"8f797501.967878","type":"function","z":"e1a94fdd.a1f8a","name":"SPLIT","func":"msg.payload = msg.payload.split(\"_\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":40,"wires":[["d256d3c0.78001"]]},{"id":"b872bbd5.b50a18","type":"http request","z":"e1a94fdd.a1f8a","name":"","method":"PUT","ret":"txt","paytoqs":false,"url":"http://10.5.5.9/gp/gpControl/command/storage/tag_moment","tls":"","persist":false,"proxy":"","authType":"","x":1130,"y":100,"wires":[[]]},{"id":"8978db7d.5ca328","type":"switch","z":"e1a94fdd.a1f8a","name":"Hit_Brake","property":"Signal1","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":560,"y":100,"wires":[["5e06e8c.c0a2b18"]]},{"id":"5e06e8c.c0a2b18","type":"function","z":"e1a94fdd.a1f8a","name":"PassLimit","func":"var NewMsg = {payload: 0, OnBrakeTimespan: 0, OnBrakeLimit: 0};\nvar Settings = global.get('OnBrakeLimit');\n\n//NewMsg.OnClutchLimit = Settings.OnClutchLimit;\nNewMsg.OnBrakeLimit = Settings;\nNewMsg.OnBrakeTimespan = msg.Timespan;\n    \nvar PassActualValue  = 1;\nvar BlockActualValue = 0;\n\n    if( msg.Timespan >= Settings)\n     {\n       NewMsg.payload = PassActualValue;\n     }\n    else\n     {\n       NewMsg.payload = BlockActualValue;\n     }\n\nreturn NewMsg;\n\n//var NewMsg = {payload: 0, OnBrakeTimespan: 0, OnBrakeLimit: 0};\n//var Settings = global.get(\"SpaceStarSettings\");\n\n//NewMsg.OnBrakeLimit = Settings.OnBrakeLimit;\n//NewMsg.OnBrakeTimespan = msg.Timespan;\n    \n//var PassActualValue  = 1;\n//var BlockActualValue = 0;\n\n  //  if( msg.Timespan >= Settings.OnBrakeLimit)\n  //   {\n   //    NewMsg.payload = PassActualValue;\n   //  }\n  //  else\n  //   {\n  //     NewMsg.payload = BlockActualValue;\n  //   }\n\n//return NewMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":100,"wires":[["e2fb0203.4029f","153563e5.47c44c"]]},{"id":"e2fb0203.4029f","type":"switch","z":"e1a94fdd.a1f8a","name":"GreaterThanZero","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":930,"y":100,"wires":[["b872bbd5.b50a18"]]},{"id":"153563e5.47c44c","type":"debug","z":"e1a94fdd.a1f8a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":790,"y":160,"wires":[]},{"id":"a1934b83.ac2d28","type":"link out","z":"e1a94fdd.a1f8a","name":"BRAKE","mode":"link","links":["89ffb456.200978"],"x":1165,"y":180,"wires":[]},{"id":"d27c894f.850d18","type":"debug","z":"e1a94fdd.a1f8a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1290,"y":140,"wires":[]},{"id":"aa2f09c151d21de1","type":"gpio-in","z":"e1a94fdd.a1f8a","name":"Input 2","state":"INPUT","device":"gpiochip0","pin":"68","x":290,"y":40,"wires":[["27758a51e16445a1"]]},{"id":"77cfa74d637a8119","type":"inject","z":"e1a94fdd.a1f8a","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"0.05","crontab":"","once":true,"onceDelay":0.1,"topic":"","payloadType":"date","x":130,"y":40,"wires":[["aa2f09c151d21de1"]]},{"id":"27758a51e16445a1","type":"rbe","z":"e1a94fdd.a1f8a","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":430,"y":40,"wires":[["f35cdcdb.43dee"]]},{"id":"dc5e458d.fe91c8","type":"function","z":"fe9bd502.da1c48","name":"setTimeStamp_State","func":"\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.payload = (new Date(Date.now() - offset)).toISOString()+ \"_\" + msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":300,"wires":[["ab0dd927.46d468"]]},{"id":"d57da8a8.413958","type":"buffer-array","z":"fe9bd502.da1c48","name":"Buffer_Value_Pair","bufferLen":"2","startWhenFilled":true,"x":630,"y":300,"wires":[["8948f159.430fc","4f6d7cbd17a8c846"]]},{"id":"8948f159.430fc","type":"function","z":"fe9bd502.da1c48","name":"Timespan_Calculation","func":"//var NewMsg = {Timestamp1:0, Timestamp2:0, Timestamp3:0, Timestamp4:0, Signal1:\"0\", Signal2:\"0\", Signal3:\"0\", Signal4:\"0\", Timespan1:0, Timespan2:0, Timespan3:0}\nvar NewMsg = {Topic: \"ACTUALVALUE\", Timestamp1:0, Timestamp2:0, Signal1:\"0\", Signal2:\"0\", Timespan:0}\n\nvar d1 = Date.parse(msg.payload[0][0]);\nvar d2 = Date.parse(msg.payload[1][0]);\n//var d3 = Date.parse(msg.payload[2][0]);\n//var d4 = Date.parse(msg.payload[3][0]);\n  \nNewMsg.Timestamp1= d1;\nNewMsg.Timestamp2= d2;\n//NewMsg.Timestamp3= d3;\n//NewMsg.Timestamp4= d4;\n\nNewMsg.Signal1 = msg.payload[0][1];\nNewMsg.Signal2 = msg.payload[1][1];\n//NewMsg.Signal3 = msg.payload[2][1];\n//NewMsg.Signal4 = msg.payload[3][1];\n\nNewMsg.Timespan = (d2 - d1) / 1000;\n//NewMsg.Timespan2 = (d3 - d2) / 1000;\n//NewMsg.Timespan3 = (d4 - d3) / 1000;\n\nreturn NewMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":300,"wires":[["94b93c15.931bf","b83ce749.fea368","844284c6.d8c958"]]},{"id":"ab0dd927.46d468","type":"function","z":"fe9bd502.da1c48","name":"SPLIT","func":"msg.payload = msg.payload.split(\"_\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":300,"wires":[["d57da8a8.413958"]]},{"id":"3b391d03.ea14f2","type":"http request","z":"fe9bd502.da1c48","name":"","method":"PUT","ret":"txt","paytoqs":"ignore","url":"http://10.5.5.9/gp/gpControl/command/storage/tag_moment","tls":"","persist":false,"proxy":"","authType":"","x":890,"y":360,"wires":[[]]},{"id":"94b93c15.931bf","type":"switch","z":"fe9bd502.da1c48","name":"Hit_Clutch","property":"Signal1","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":360,"wires":[["ab1d2b64.86aa28","9368d57c.83cd58"]]},{"id":"ab1d2b64.86aa28","type":"function","z":"fe9bd502.da1c48","name":"PassOnClutchLimit","func":"var NewMsg = {payload: 0, OnClutchTimespan: 0, OnClutchLimit: 0};\nvar Settings = global.get('OnClutchLimit');\n\n//NewMsg.OnClutchLimit = Settings.OnClutchLimit;\nNewMsg.OnClutchLimit = Settings;\nNewMsg.OnClutchTimespan = msg.Timespan;\n    \nvar PassActualValue  = 1;\nvar BlockActualValue = 0;\n\n    if( msg.Timespan >= Settings)\n     {\n       NewMsg.payload = PassActualValue;\n     }\n    else\n     {\n       NewMsg.payload = BlockActualValue;\n     }\n\nreturn NewMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":360,"wires":[["afc5b76c.9c5638","fba622ee.880f7"]]},{"id":"afc5b76c.9c5638","type":"switch","z":"fe9bd502.da1c48","name":"initiate Tag","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":690,"y":360,"wires":[["3b391d03.ea14f2"]]},{"id":"fba622ee.880f7","type":"debug","z":"fe9bd502.da1c48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":420,"wires":[]},{"id":"b83ce749.fea368","type":"debug","z":"fe9bd502.da1c48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":940,"y":440,"wires":[]},{"id":"844284c6.d8c958","type":"link out","z":"fe9bd502.da1c48","name":"CLUTCH","mode":"link","links":["b92fed1a.7c89"],"x":675,"y":460,"wires":[]},{"id":"9368d57c.83cd58","type":"debug","z":"fe9bd502.da1c48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":360,"y":440,"wires":[]},{"id":"99db86e7.aa7328","type":"inject","z":"fe9bd502.da1c48","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":800,"y":500,"wires":[["3b391d03.ea14f2"]]},{"id":"0a87bd426a4add6f","type":"inject","z":"fe9bd502.da1c48","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"0.05","crontab":"","once":true,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":160,"wires":[["c5b1a344dbd44655"]]},{"id":"27b398677fa284b0","type":"gpio-out","z":"fe9bd502.da1c48","name":"Output 2","state":"OUTPUT","device":"gpiochip0","pin":"75","x":320,"y":740,"wires":[["e0ca3570bff1ccf8"]]},{"id":"4b27d5b4d5c6e95f","type":"inject","z":"fe9bd502.da1c48","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":120,"y":720,"wires":[["27b398677fa284b0"]]},{"id":"bb96ce3ca79f86e1","type":"inject","z":"fe9bd502.da1c48","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":120,"y":780,"wires":[["27b398677fa284b0"]]},{"id":"e0ca3570bff1ccf8","type":"debug","z":"fe9bd502.da1c48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":520,"y":740,"wires":[]},{"id":"e521dd2c3796c9da","type":"rbe","z":"fe9bd502.da1c48","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":470,"y":160,"wires":[["dc5e458d.fe91c8"]]},{"id":"4f6d7cbd17a8c846","type":"debug","z":"fe9bd502.da1c48","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":800,"y":160,"wires":[]},{"id":"c5b1a344dbd44655","type":"gpio-in","z":"fe9bd502.da1c48","name":"Input 4","state":"INPUT","device":"gpiochip0","pin":"72","x":290,"y":160,"wires":[["e521dd2c3796c9da"]]},{"id":"85ba0350.2569b","type":"rpi-gpio in","z":"60b4d38a.a1148c","d":true,"name":"","pin":"22","intype":"tri","debounce":"25","read":false,"bcm":true,"x":90,"y":2060,"wires":[["21cf92bf.ac86de","defae924.c14e78"]]},{"id":"21cf92bf.ac86de","type":"function","z":"60b4d38a.a1148c","name":"setTimeStamp_State","func":"\nvar ts = new Date();\nmsg.payload = ts.toISOString() + \"_\" + msg.payload;\n//msg.payload = ts.toUTCString() + \"_\" + msg.payload;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":2060,"wires":[["84dd22c2.af9ee"]]},{"id":"63d03b8f.e82054","type":"buffer-array","z":"60b4d38a.a1148c","name":"Buffer_Value_Pair","bufferLen":"2","startWhenFilled":true,"x":650,"y":2060,"wires":[["86175588.8ba3f8"]]},{"id":"86175588.8ba3f8","type":"function","z":"60b4d38a.a1148c","name":"Timespan_Calculation","func":"//var NewMsg = {Timestamp1:0, Timestamp2:0, Timestamp3:0, Timestamp4:0, Signal1:\"0\", Signal2:\"0\", Signal3:\"0\", Signal4:\"0\", Timespan1:0, Timespan2:0, Timespan3:0}\nvar NewMsg = {Topic: \"ACTUALVALUE\", Timestamp1:0, Timestamp2:0, Signal1:\"0\", Signal2:\"0\", Timespan:0}\n\nvar d1 = Date.parse(msg.payload[0][0]);\nvar d2 = Date.parse(msg.payload[1][0]);\n//var d3 = Date.parse(msg.payload[2][0]);\n//var d4 = Date.parse(msg.payload[3][0]);\n  \nNewMsg.Timestamp1= d1;\nNewMsg.Timestamp2= d2;\n//NewMsg.Timestamp3= d3;\n//NewMsg.Timestamp4= d4;\n\nNewMsg.Signal1 = msg.payload[0][1];\nNewMsg.Signal2 = msg.payload[1][1];\n//NewMsg.Signal3 = msg.payload[2][1];\n//NewMsg.Signal4 = msg.payload[3][1];\n\nNewMsg.Timespan = (d2 - d1) / 1000;\n//NewMsg.Timespan2 = (d3 - d2) / 1000;\n//NewMsg.Timespan3 = (d4 - d3) / 1000;\n\nreturn NewMsg;","outputs":1,"noerr":0,"x":160,"y":2140,"wires":[["efd482a6.5bc44"]]},{"id":"84dd22c2.af9ee","type":"function","z":"60b4d38a.a1148c","name":"SPLIT","func":"msg.payload = msg.payload.split(\"_\");\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":2060,"wires":[["63d03b8f.e82054"]]},{"id":"382c3276.945cbe","type":"http request","z":"60b4d38a.a1148c","name":"","method":"PUT","ret":"txt","paytoqs":false,"url":"http://10.5.5.9/gp/gpControl/command/storage/tag_moment","tls":"","persist":false,"proxy":"","authType":"","x":710,"y":2140,"wires":[["fa19c65b.c820c8"]]},{"id":"efd482a6.5bc44","type":"switch","z":"60b4d38a.a1148c","name":"Hit_Clutch","property":"Signal1","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":2140,"wires":[["43dc6eac.de64a","6d0c6136.236fa","7dbb5b61.bbee34"]]},{"id":"fa19c65b.c820c8","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":2140,"wires":[]},{"id":"43dc6eac.de64a","type":"switch","z":"60b4d38a.a1148c","d":true,"name":"OnClutchTime","property":"Timespan","propertyType":"msg","rules":[{"t":"gte","v":"topic","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":520,"y":2140,"wires":[["382c3276.945cbe"]]},{"id":"defae924.c14e78","type":"file in","z":"60b4d38a.a1148c","name":"LoadOnClutchLimit","filename":"SpaceStarSettings","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":350,"y":2320,"wires":[["fd58a259.abf52"]]},{"id":"fd58a259.abf52","type":"json","z":"60b4d38a.a1148c","name":"","property":"payload","action":"","pretty":false,"x":510,"y":2320,"wires":[["df754145.49b7c"]]},{"id":"ae0a19ef.1a4898","type":"file","z":"60b4d38a.a1148c","name":"SaveOnClutchLimit","filename":"SpaceStarSettings","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":790,"y":2380,"wires":[[]]},{"id":"55508c9e.f73e84","type":"inject","z":"60b4d38a.a1148c","d":true,"name":"Inject true after boot","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":120,"y":2320,"wires":[["defae924.c14e78"]]},{"id":"28b165a8.ae696a","type":"join","z":"60b4d38a.a1148c","name":"CombineLimits","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"1","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":580,"y":2380,"wires":[["ae0a19ef.1a4898","6d0c6136.236fa","18a0b49d.92060b"]]},{"id":"df754145.49b7c","type":"change","z":"60b4d38a.a1148c","name":"GetOnClutchLimit","rules":[{"t":"move","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":2380,"wires":[[]]},{"id":"6d0c6136.236fa","type":"function","z":"60b4d38a.a1148c","name":"PassLimit","func":"var NewMsg = {payload: 0, Timespan: 0, OnClutchLimit: 0};\n//var Clutch = current.get('Clutch') || 0;\n//global.set(\"SpaceStarSettings\", msg.payload);\nvar Settings = global.get(\"SpaceStarSettings\");\n//var OnClutchLimit = SpaceStarSettings.OnClutchLimit;\n\nif ( msg.topic == \"OnClutchLimit\")\n\n{\n   NewMsg.OnClutchLimit = Settings.OnClutchLimit;\n    \n}\n\n\n//NewMsg.MinuteOn = Timesettings.MinuteOn;\n\n//parseFloat(parseFloat(OnClutchLimit).toFixed(3));\n\n//var Clutch = msg.payload;\n\n//context.set('mydata', msg.payload);\n//NewMsg.limit = msg.payload;\n\nvar PassActualValue  = 1;\nvar BlockActualValue = 0;\n\nif( msg.Topic == \"ACTUALVALUE\")\n\n{  NewMsg.Timespan = msg.Timespan;\n\n    if( msg.Timespan >= Settings.OnClutchLimit)\n    {\n       NewMsg.payload = PassActualValue;\n    }\n    else\n    {\n       NewMsg.payload = BlockActualValue;\n   }\n}\n//if( msg.payload.OnClutchLimit == 'OnClutchLimit')\n//{\n    //context.set('OnClutchLimit', OnClutchLimit);\n//}\nreturn NewMsg;","outputs":1,"noerr":0,"x":520,"y":2240,"wires":[["a02b8825.05b758","2b4e97ee.910658"]]},{"id":"a02b8825.05b758","type":"switch","z":"60b4d38a.a1148c","name":"GreaterThanZero","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":770,"y":2240,"wires":[["382c3276.945cbe"]]},{"id":"7dbb5b61.bbee34","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":340,"y":2220,"wires":[]},{"id":"2b4e97ee.910658","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":760,"y":2320,"wires":[]},{"id":"18a0b49d.92060b","type":"function","z":"60b4d38a.a1148c","name":"GlobalSet","func":"global.set(\"SpaceStarSettings\", msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":2480,"wires":[["b1c93504.9c55c8"]]},{"id":"b1c93504.9c55c8","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":810,"y":2480,"wires":[]},{"id":"4acef5c.85c7c0c","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":520,"y":2560,"wires":[]},{"id":"5ce393d3.af42dc","type":"function","z":"60b4d38a.a1148c","name":"","func":"var NewMsg = {payload: 0, timespan: 0, OnClutchLimit: 0};\nvar Settings = global.get(\"SpaceStarSettings\");\nNewMsg.OnClutchLimit = Settings.OnClutchLimit;\nNewMsg.payload = 1;\nNewMsg.timespan = 999; \nreturn NewMsg;","outputs":1,"noerr":0,"x":330,"y":2540,"wires":[["4acef5c.85c7c0c"]]},{"id":"89c325a3.8f2708","type":"inject","z":"60b4d38a.a1148c","d":true,"name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":150,"y":2540,"wires":[["5ce393d3.af42dc"]]},{"id":"5eb3ae6c251a9674","type":"exec","z":"60b4d38a.a1148c","command":"cat /sys/bus/platform/drivers/meson-saradc/ff809000.adc/iio:device0/in_voltage2_raw","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"get WISH from AnalogInput 1 (37)","x":420,"y":340,"wires":[["d0fe6d63b0be1996","623fee8e27ed961c"],[],[]]},{"id":"8109a492ac2b588f","type":"inject","z":"60b4d38a.a1148c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"samples","v":"","vt":"str"},{"p":"counter","v":"","vt":"num"},{"p":"SwitchNode","v":"0","vt":"num"},{"p":"wish","v":"0","vt":"num"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"${ThrottleSampleRate}","crontab":"","once":true,"onceDelay":0.1,"topic":"probe","payloadType":"str","x":100,"y":340,"wires":[["5eb3ae6c251a9674"]]},{"id":"d0fe6d63b0be1996","type":"debug","z":"60b4d38a.a1148c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":470,"y":260,"wires":[]},{"id":"623fee8e27ed961c","type":"function","z":"60b4d38a.a1148c","name":"Wish_Gate","func":"\nvar OpenSwitch = 1;\nvar CloseSwitch = 0;\n\n// You can create a constant array:\nconst samples = flow.get(\"samples\");\n\n//const samples = [flow.get(\"samples\")];\nsamples.length = global.get(\"ThrottleMeanPool\");\n\n\nif  (msg.topic == \"probe\")\n    { \n        \n        flow.set(\"counter\", flow.get(\"counter\") + 1);\n        samples.splice(flow.get(\"counter\"), 1, msg.payload);\n        flow.set(\"samples\", samples);\n        \n        if (flow.get(\"counter\") == 2)\n        {\n        msg.SwitchNode = OpenSwitch;\n        }\n    }\n    \nif (msg.topic == \"probe\")\n{\n    if (flow.get(\"counter\") > global.get(\"ThrottleMeanPool\") - 1)\n    {\n        flow.set(\"counter\", 0);\n        msg.samples = samples;\n        samples.splice(0,global.get(\"ThrottleMeanPool\"))\n        samples.length = global.get(\"ThrottleMeanPool\");\n        msg.SwitchNode = CloseSwitch;\n    }\n}\n\n\nmsg.samples = samples;\nmsg.topic = samples.length;\n//flow.set(\"samples\", samples);\nmsg.counter = flow.get(\"counter\"); \nreturn msg;","outputs":1,"noerr":0,"initialize":"// Der Code hier wird ausgeführt,\n// wenn der Node gestartet wird\nflow.set(\"counter\", -1);\n//const samples = [];\nflow.set(\"samples\", []);","finalize":"","libs":[],"x":670,"y":340,"wires":[["2c2363cf1301c05c","37db9a2400de9193","457ac45195308bb1","3b5e0717e70b6429"]]},{"id":"2c2363cf1301c05c","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"samples","targetType":"msg","statusVal":"","statusType":"auto","x":690,"y":280,"wires":[]},{"id":"37db9a2400de9193","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","statusVal":"","statusType":"auto","x":680,"y":240,"wires":[]},{"id":"457ac45195308bb1","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"counter","targetType":"msg","statusVal":"","statusType":"auto","x":690,"y":200,"wires":[]},{"id":"3b5e0717e70b6429","type":"switch","z":"60b4d38a.a1148c","name":"Moving","property":"SwitchNode","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":840,"y":340,"wires":[["1145982d9618bff0"],[]]},{"id":"044afda276389a72","type":"link out","z":"60b4d38a.a1148c","name":"WISH -->Balckbox_to_MySQL_insert_wish","mode":"link","links":["36d5dba87349797e","63e06f37f1767389"],"x":1235,"y":340,"wires":[]},{"id":"1145982d9618bff0","type":"function","z":"60b4d38a.a1148c","name":"MeanPercentage Jitter Ignition","func":"\n\n\nvar sum = 0;\nvar IgnitionState = global.get('Ignition');\n\n//Subsummierung des Sample-Buffers\nsum = msg.samples.reduce(getSum, 0);\n\nfunction getSum(total, num) {\n  return total + parseInt(num);\n}\n//Berrechnen des Mittelwertes aus den Samples des BUffers anahand der flexiblen Buffer - Länge\nmsg.sample = Math.round(sum / global.get(\"ThrottleMeanPool\"));\n\n//Berechnen des Prozentwertes anhand der flexiblen ThrottelTreshold - Werte in Float zur besseren Darstellung in MySQL\nmsg.wish = parseFloat(((msg.sample - global.get('ThrottleTresholdZero')) / ((global.get('ThrottleTresholdFull') - global.get('ThrottleTresholdZero')) / 100)).toFixed(global.get(\"ThrottleRoundto\")));\n\n//Abfangen der Schwankungen um 0\nif (msg.wish < 0.5)\n{\n    msg.wish = 0\n}\n\n//Abfangen von Werten >100\nif (msg.wish > 100)\n{\n    msg.wish = 100\n}\n\n//setze auf 0 wenn Ignition off\nif (IgnitionState == 0)\n{\n    msg.wish = 0\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":340,"wires":[["1ce31cbafdbec0ac","b73e1da2f64a367e","044afda276389a72"]]},{"id":"1ce31cbafdbec0ac","type":"debug","z":"60b4d38a.a1148c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"wish","targetType":"msg","statusVal":"","statusType":"auto","x":1080,"y":260,"wires":[]},{"id":"b73e1da2f64a367e","type":"debug","z":"60b4d38a.a1148c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"sample","targetType":"msg","statusVal":"","statusType":"auto","x":1070,"y":300,"wires":[]},{"id":"f4cb6b15178b53ad","type":"function","z":"60b4d38a.a1148c","name":"","func":"\n//home=env.get(\"ThrottleSampleRate\");\n\nmsg.payload = env.get(\"ThrottleSampleRate\");\n//msg.payload = global.get(\"ThrottleSampleRate\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":460,"wires":[["8c3807af109ec670"]]},{"id":"f0e30e324b466467","type":"inject","z":"60b4d38a.a1148c","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":130,"y":460,"wires":[["f4cb6b15178b53ad"]]},{"id":"8c3807af109ec670","type":"debug","z":"60b4d38a.a1148c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":540,"y":460,"wires":[]},{"id":"f1556ba235c3f58a","type":"inject","z":"16c92fd3cb0a8d60","name":"","props":[{"p":"timestamp","v":"","vt":"date"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":true,"onceDelay":0.1,"topic":"","x":110,"y":140,"wires":[["4326f678a8645996"]]},{"id":"d6b1bc5fc5f41829","type":"rbe","z":"16c92fd3cb0a8d60","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":730,"y":140,"wires":[["7342e884e4f04227","1d9c4f402a3ade7a"]]},{"id":"4326f678a8645996","type":"gpio-in","z":"16c92fd3cb0a8d60","name":"Input 8","state":"INPUT","device":"gpiochip0","pin":"67","x":270,"y":140,"wires":[["9d6239c2b5cb7c17"]]},{"id":"7342e884e4f04227","type":"debug","z":"16c92fd3cb0a8d60","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":730,"y":240,"wires":[]},{"id":"9d6239c2b5cb7c17","type":"function","z":"16c92fd3cb0a8d60","name":"Invertieren and set Timestamp","func":"var ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.timestamp = new Date(Date.now());\n\n\nif (msg.payload < 1)\n{\n    msg.payload = 1}\n    \n    else\n    \n    {msg.payload = 0\n}\n\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":140,"wires":[["d6b1bc5fc5f41829"]]},{"id":"f1af1d779606acf1","type":"link out","z":"16c92fd3cb0a8d60","name":"Ingition --> BlackBox_to_MySQL_insert_ingnition","mode":"link","links":["13faf8da46ebcd22"],"x":1055,"y":140,"wires":[]},{"id":"1d9c4f402a3ade7a","type":"function","z":"16c92fd3cb0a8d60","name":"Ignition declaration","func":"global.set('Ignition',msg.payload);\nreturn msg;\n\n//diese Globale Variable wird nicht gespeichert!! macht keinen Sinn, da bei jeden Neustart bzw. Zng ein/aus, bzw. Statusänderung die Globale Variable sowieso neu gesetzt wird!\n//eine Speicherung und Relading wäre viel zu langsam und würde akutelle Stusänderungen der Zündung zerstören","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":140,"wires":[["f1af1d779606acf1"]]},{"id":"448fefa5.dfa64","type":"q-gate","z":"6f2009d6.0acd88","name":"q-gate demo","controlTopic":"control","defaultState":"open","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","queueCmd":"queue","defaultCmd":"default","triggerCmd":"trigger","flushCmd":"flush","resetCmd":"reset","maxQueueLength":"5","keepNewest":false,"qToggle":false,"persist":false,"x":430,"y":240,"wires":[["f43e6dd4.4a09b"]]},{"id":"325e9fce.e72a4","type":"inject","z":"6f2009d6.0acd88","name":"input","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":240,"wires":[["448fefa5.dfa64"]]},{"id":"5aebc459.1a32dc","type":"inject","z":"6f2009d6.0acd88","name":"open","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"open","payloadType":"str","x":190,"y":60,"wires":[["448fefa5.dfa64"]]},{"id":"1e67eaee.86a275","type":"inject","z":"6f2009d6.0acd88","name":"toggle","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"toggle","payloadType":"str","x":190,"y":140,"wires":[["448fefa5.dfa64"]]},{"id":"29dc06db.76384a","type":"inject","z":"6f2009d6.0acd88","name":"close","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"close","payloadType":"str","x":190,"y":100,"wires":[["448fefa5.dfa64"]]},{"id":"37fd4001.55728","type":"inject","z":"6f2009d6.0acd88","name":"default","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"default","payloadType":"str","x":190,"y":180,"wires":[["448fefa5.dfa64"]]},{"id":"f43e6dd4.4a09b","type":"debug","z":"6f2009d6.0acd88","name":"output","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":590,"y":240,"wires":[]},{"id":"e07cd047.9ebbc","type":"inject","z":"6f2009d6.0acd88","name":"queue","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"queue","payloadType":"str","x":190,"y":300,"wires":[["448fefa5.dfa64"]]},{"id":"bb91375f.eb7068","type":"inject","z":"6f2009d6.0acd88","name":"flush","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"flush","payloadType":"str","x":190,"y":380,"wires":[["448fefa5.dfa64"]]},{"id":"183a0088.975a7f","type":"inject","z":"6f2009d6.0acd88","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"trigger","payloadType":"str","x":190,"y":340,"wires":[["448fefa5.dfa64"]]},{"id":"91c32e65.3ecda","type":"inject","z":"6f2009d6.0acd88","name":"reset","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"reset","payloadType":"str","x":190,"y":420,"wires":[["448fefa5.dfa64"]]},{"id":"1cea54e.528f3ab","type":"file","z":"6f2009d6.0acd88","name":"","filename":"/home/odroid/PIN22/PIN22","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":180,"y":540,"wires":[[]]},{"id":"f315d132.96f28","type":"function","z":"6f2009d6.0acd88","d":true,"name":"reinjecttobuffer","func":"var NewArray = [];\nvar TimestampNewest = 0;\nvar SignalNewest = '0';\n\n\n//var d = msg.payload[3][0];\n  \nTimestampNewest = msg.payload[3][0];\nSignalNewest = msg.payload[3][1];\n\nNewArray.push(TimestampNewest);\nNewArray.push(SignalNewest);\n\nmsg.payload = NewArray;\nreturn msg;\n\n\n\n","outputs":1,"noerr":0,"x":140,"y":600,"wires":[[]]},{"id":"f2cc5b5c.e245d8","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":810,"y":2560,"wires":[]},{"id":"5da3cecc.2575f","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":2520,"wires":[]},{"id":"a70e5ded.c0b1a","type":"function","z":"93d7b78b.d2d2d8","name":"SH1_UDP","func":"\nvar highCounter_SH1 = flow.get(\"highCounter_SH1\")||0;\nvar lowCounter_SH1 = flow.get(\"lowCounter_SH1\")||0;\n//highCounter = 0;\n//lowCounter = 0;\n\n//count up\nif (lowCounter_SH1 >= 255)\n{highCounter_SH1++; lowCounter_SH1 = 0;}\nif (highCounter_SH1 >= 255) {highCounter_SH1 = 0; lowCounter_SH1++;}\n\nlowCounter_SH1++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Param1, msg.payload[0].Param2, msg.payload[0].DC]);\nmsg.payload[9] = highCounter_SH1;\nmsg.payload[10] = lowCounter_SH1;\n\n\nflow.set(\"highCounter_SH1\",highCounter_SH1);\nflow.set(\"lowCounter_SH1\",lowCounter_SH1);\n\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":2560,"wires":[["5da3cecc.2575f","f2cc5b5c.e245d8"]]},{"id":"ce536a46.7d6eb8","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"multi","x":810,"y":2280,"wires":[]},{"id":"5902dd22.936594","type":"function","z":"93d7b78b.d2d2d8","name":"PW0_UDP","func":"\nvar highCounter_PW0 = flow.get(\"highCounter_PW0\")||0;\nvar lowCounter_PW0 = flow.get(\"lowCounter_PW0\")||0;\n//highCounter = 0;\n//lowCounter = 0;\n\n//count up\nif (lowCounter_PW0 >= 255)\n{highCounter_PW0++; lowCounter_PW0 = 0;}\nif (highCounter_PW0 >= 255) {highCounter_PW0 = 0; lowCounter_PW0++;}\n\nlowCounter_PW0++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Param1, msg.payload[0].Param2, msg.payload[0].DC]);\nmsg.payload[9] = highCounter_PW0;\nmsg.payload[10] = lowCounter_PW0;\n\n\nflow.set(\"highCounter_PW0\",highCounter_PW0);\nflow.set(\"lowCounter_PW0\",lowCounter_PW0);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":2280,"wires":[["ce536a46.7d6eb8","1375a5de.59c95a"]]},{"id":"617ee4ca.5518ac","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":430,"y":2280,"wires":[["5902dd22.936594"]]},{"id":"5bc23bd4.72bb44","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT PW0","func":"\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Param1, Param2, DC FROM sepp89117 WHERE UniqueID = 16\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":2280,"wires":[["617ee4ca.5518ac","8350c54582ef1686"]]},{"id":"75afe49e.b09dac","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":2280,"wires":[["5bc23bd4.72bb44"]]},{"id":"1375a5de.59c95a","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":2240,"wires":[]},{"id":"218ac4fc.7f49dc","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":430,"y":2560,"wires":[["a70e5ded.c0b1a","105e2bd2.1e8f44"]]},{"id":"78df025d.595e2c","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT SH1","func":"\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Param1, Param2, DC FROM sepp89117 WHERE UniqueID = 19\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":2560,"wires":[["218ac4fc.7f49dc"]]},{"id":"67e6fa7d.fe39d4","type":"inject","z":"93d7b78b.d2d2d8","name":"","props":[{"p":"payload","v":"true","vt":"bool"},{"p":"topic","v":"","vt":"string"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":2560,"wires":[["78df025d.595e2c"]]},{"id":"7b9050f2.cbb5d","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":810,"y":2720,"wires":[]},{"id":"20f6d8d0.575768","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":2680,"wires":[]},{"id":"d42b2663.3383b8","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":430,"y":2720,"wires":[["b1837ec5.0461a"]]},{"id":"60680ce2.da8a54","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT TAG","func":"\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, P, A, DC, `14` FROM PA WHERE UniqueID = 1\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":2720,"wires":[["d42b2663.3383b8"]]},{"id":"1621f145.aee1ff","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":2720,"wires":[["60680ce2.da8a54"]]},{"id":"b1837ec5.0461a","type":"function","z":"93d7b78b.d2d2d8","name":"TAG_UDP","func":"\nvar highCounter_TAG = flow.get(\"highCounter_TAG\")||0;\nvar lowCounter_TAG = flow.get(\"lowCounter_TAG\")||0;\n//lowCounter_TAG=0;\n\n//count up\nif (lowCounter_TAG >= 255)\n{highCounter_TAG++; lowCounter_TAG = 0;}\nif (highCounter_TAG >= 255) {highCounter_TAG = 0; lowCounter_TAG++;}\n\nlowCounter_TAG++;\n\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].P, msg.payload[0].A, msg.payload[0].DC, msg.payload[0][\"14\"]]);\nmsg.payload[9] = highCounter_TAG;\nmsg.payload[10] = lowCounter_TAG;\n\nflow.set(\"highCounter_TAG\",highCounter_TAG);\nflow.set(\"lowCounter_TAG\",lowCounter_TAG);\n\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":2720,"wires":[["7b9050f2.cbb5d","20f6d8d0.575768"]]},{"id":"75b5fea0.4a916","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":810,"y":2880,"wires":[]},{"id":"65733c9d.b82024","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":2840,"wires":[]},{"id":"37d6e955.24aec6","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":430,"y":2880,"wires":[["704903a7.d15fac"]]},{"id":"832c9299.605ee","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT SH0","func":"\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Param1, Param2, DC FROM sepp89117 WHERE UniqueID = 20\";\nreturn msg;","outputs":1,"noerr":0,"x":260,"y":2880,"wires":[["37d6e955.24aec6"]]},{"id":"cb3190ff.cc314","type":"inject","z":"93d7b78b.d2d2d8","name":"","props":[{"p":"payload","v":"true","vt":"bool"},{"p":"topic","v":"","vt":"string"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":2880,"wires":[["832c9299.605ee"]]},{"id":"704903a7.d15fac","type":"function","z":"93d7b78b.d2d2d8","name":"SH0_UDP","func":"\nvar highCounter_SH0 = flow.get(\"highCounter_SH0\")||0;\nvar lowCounter_SH0 = flow.get(\"lowCounter_SH0\")||0;\n\n\n//count up\nif (lowCounter_SH0 >= 255)\n{highCounter_SH0++; lowCounter_SH0 = 0;}\nif (highCounter_SH0 >= 255) {highCounter_SH0 = 0; lowCounter_SH0++;}\n \nlowCounter_SH0++;\n\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Param1, msg.payload[0].Param2, msg.payload[0].DC]);\nmsg.payload[9] = highCounter_SH0;\nmsg.payload[10] = lowCounter_SH0;\n\n\nflow.set(\"highCounter_SH0\",highCounter_SH0);\nflow.set(\"lowCounter_SH0\",lowCounter_SH0);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":2880,"wires":[["75b5fea0.4a916","65733c9d.b82024"]]},{"id":"38b09824.3716a8","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":810,"y":3040,"wires":[]},{"id":"c9a1ad3.ddd645","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":3000,"wires":[]},{"id":"de8879d5.6739e8","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":430,"y":3040,"wires":[["524bf47d.e5aebc"]]},{"id":"f0dfd245.aad12","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT YY_SV","func":"\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 185\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":3040,"wires":[["de8879d5.6739e8"]]},{"id":"8719e4d.43d3f18","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":3040,"wires":[["f0dfd245.aad12"]]},{"id":"524bf47d.e5aebc","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"x":600,"y":3040,"wires":[["38b09824.3716a8","c9a1ad3.ddd645"]]},{"id":"105e2bd2.1e8f44","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":620,"y":2640,"wires":[]},{"id":"ce30db16.3b3548","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"multi","x":810,"y":2420,"wires":[]},{"id":"8de5bdc3.ef90f","type":"function","z":"93d7b78b.d2d2d8","name":"WT_UDP","func":"\nvar highCounter_PW0 = flow.get(\"highCounter_PW0\")||0;\nvar lowCounter_PW0 = flow.get(\"lowCounter_PW0\")||0;\n//highCounter = 0;\n//lowCounter = 0;\n\n//count up\nif (lowCounter_PW0 >= 255)\n{highCounter_PW0++; lowCounter_PW0 = 0;}\nif (highCounter_PW0 >= 255) {highCounter_PW0 = 0; lowCounter_PW0++;}\n\nlowCounter_PW0++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Param1, msg.payload[0].Param2]);\nmsg.payload[9] = highCounter_PW0;\nmsg.payload[10] = lowCounter_PW0;\n\n\nflow.set(\"highCounter_PW0\",highCounter_PW0);\nflow.set(\"lowCounter_PW0\",lowCounter_PW0);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":2420,"wires":[["ce30db16.3b3548","b05aa66d.91f878"]]},{"id":"a04effc7.9722b","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":430,"y":2420,"wires":[["8de5bdc3.ef90f"]]},{"id":"50a436fa.ce1fc8","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT WT","func":"\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Param1, Param2 FROM sepp89117 WHERE UniqueID = 26\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":2420,"wires":[["a04effc7.9722b"]]},{"id":"d65ffa4d.943628","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":2420,"wires":[["50a436fa.ce1fc8"]]},{"id":"b05aa66d.91f878","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":2380,"wires":[]},{"id":"8db0200a69fe56eb","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":810,"y":3160,"wires":[]},{"id":"1fab55f7931c58aa","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":770,"y":3120,"wires":[]},{"id":"5baa29c5922eab05","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":430,"y":3160,"wires":[["14998246c2db41a0"]]},{"id":"f4e950ed697610b6","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT sepp89117 Wifi?","func":"\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Param1, Param2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM sepp89117 WHERE UniqueID = 26\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":3220,"wires":[["5baa29c5922eab05"]]},{"id":"e451db0a6971d5ee","type":"inject","z":"93d7b78b.d2d2d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":3160,"wires":[["f4e950ed697610b6"]]},{"id":"14998246c2db41a0","type":"function","z":"93d7b78b.d2d2d8","name":"sepp89117_Wifi","func":"\nvar highCounter_sepp89117 = flow.get(\"highCounter_sepp89117\")||0;\nvar lowCounter_sepp89117 = flow.get(\"lowCounter_sepp89117\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_sepp89117 >= 255)\n{highCounter_sepp89117++; lowCounter_sepp89117 = 0;}\nif (highCounter_sepp89117 >= 255) {highCounter_sepp89117 = 0; lowCounter_sepp89117++;}\n\nlowCounter_sepp89117++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_sepp89117;\nmsg.payload[10] = lowCounter_sepp89117;\n\n\nflow.set(\"highCounter_sepp89117\",highCounter_sepp89117);\nflow.set(\"lowCounter_sepp89117\",lowCounter_sepp89117);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":3160,"wires":[["8db0200a69fe56eb","1fab55f7931c58aa"]]},{"id":"ed2355b98fd78b82","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":520,"wires":[]},{"id":"b2cc7ddf56eb63f5","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":580,"wires":[]},{"id":"4b8f09a54254fa46","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":520,"wires":[["97829c0ac70c47ce"]]},{"id":"a01db62ae00eb00d","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_LCD_power\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_LCD_power');\n\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1013\";\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":520,"wires":[["4b8f09a54254fa46","f43e64ab4d309477"]]},{"id":"15dd0d71854b1957","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":520,"wires":[["a01db62ae00eb00d"]]},{"id":"97829c0ac70c47ce","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":520,"wires":[["b2cc7ddf56eb63f5","ed2355b98fd78b82"]]},{"id":"f43e64ab4d309477","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":580,"wires":[]},{"id":"8350c54582ef1686","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":460,"y":2200,"wires":[]},{"id":"0530051f33687631","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":280,"wires":[]},{"id":"73c39f6fcecdbace","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":340,"wires":[]},{"id":"985eed20c586a0f6","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":280,"wires":[["a04c71d9e9e18053"]]},{"id":"19659ef93e8719a4","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_LCD_sleep\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_LCD_sleep');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":280,"wires":[["985eed20c586a0f6","c80284b7895b12f4"]]},{"id":"d4fd8dc5b605809f","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":280,"wires":[["19659ef93e8719a4"]]},{"id":"a04c71d9e9e18053","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":280,"wires":[["73c39f6fcecdbace","0530051f33687631"]]},{"id":"c80284b7895b12f4","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":340,"wires":[]},{"id":"2ea86e99ae01c48f","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":160,"wires":[]},{"id":"c4d18a70d020dc85","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":220,"wires":[]},{"id":"50c895ded658d6fc","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":160,"wires":[["a0404dd873317673"]]},{"id":"bccb557413eb1213","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_LCD_brightness\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_LCD_brightness');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1002\";\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":160,"wires":[["50c895ded658d6fc","ded874b613c2bb24"]]},{"id":"1be9ed5b61a497e8","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":160,"wires":[["bccb557413eb1213"]]},{"id":"a0404dd873317673","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":160,"wires":[["c4d18a70d020dc85","2ea86e99ae01c48f"]]},{"id":"ded874b613c2bb24","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":220,"wires":[]},{"id":"98b62ec03d1345c6","type":"udp in","z":"93d7b78b.d2d2d8","name":"GoProHero5black receive","iface":"","port":"8383","ipv":"udp4","multicast":"false","group":"10.71.79.101","datatype":"buffer","x":150,"y":40,"wires":[["6090576e755a236c"]]},{"id":"6090576e755a236c","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":490,"y":40,"wires":[]},{"id":"3fe00fd693d37dbe","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":400,"wires":[]},{"id":"897a0f5a557d3436","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":460,"wires":[]},{"id":"f5a51c4b335ef4f3","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":400,"wires":[["18d8b49987a1b431"]]},{"id":"9691ee76c16fdc73","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_LCD_lock\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_LCD_lock');\n\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18` FROM YY WHERE UniqueID = \" + item;\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1010\";\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":400,"wires":[["f5a51c4b335ef4f3","a80b1da8b479f1a1"]]},{"id":"ca003cebb6408218","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":400,"wires":[["9691ee76c16fdc73"]]},{"id":"18d8b49987a1b431","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"]]);\n\n\n//msg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":400,"wires":[["897a0f5a557d3436","3fe00fd693d37dbe"]]},{"id":"a80b1da8b479f1a1","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":460,"wires":[]},{"id":"d5767449d89f6a2c","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":640,"wires":[]},{"id":"af6857a716659577","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":700,"wires":[]},{"id":"418df978cd13f20c","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":640,"wires":[["a09115084c8b210c"]]},{"id":"07524bf053042908","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_orientation\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_orientation');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":640,"wires":[["418df978cd13f20c","a0647a3fbcb44d11"]]},{"id":"b975835ac707898e","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":640,"wires":[["07524bf053042908"]]},{"id":"a09115084c8b210c","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":640,"wires":[["af6857a716659577","d5767449d89f6a2c"]]},{"id":"a0647a3fbcb44d11","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":700,"wires":[]},{"id":"e51c676d0da63ce5","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":760,"wires":[]},{"id":"58d71d3e0e6b17d8","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":820,"wires":[]},{"id":"686a4fe85daf65e8","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":760,"wires":[["7d8a4f2fe439ee5d"]]},{"id":"c564811e83d8fa97","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_default_mode\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_default_mode');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":760,"wires":[["686a4fe85daf65e8","e833498bd1cfea99"]]},{"id":"064b3ec3d51b8ee7","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":760,"wires":[["c564811e83d8fa97"]]},{"id":"7d8a4f2fe439ee5d","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":760,"wires":[["58d71d3e0e6b17d8","e51c676d0da63ce5"]]},{"id":"e833498bd1cfea99","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":820,"wires":[]},{"id":"f90f8ac8fae281cb","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":880,"wires":[]},{"id":"e4d2f4886532a2a9","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":940,"wires":[]},{"id":"0cbb04a1bab2e5af","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":880,"wires":[["a6a2f65cdac09165"]]},{"id":"31894d5aa92efb5d","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_quick_capture\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_quick_capture');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":880,"wires":[["0cbb04a1bab2e5af","0bd466d3d9d550c4"]]},{"id":"082eefe09e7e2707","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":880,"wires":[["31894d5aa92efb5d"]]},{"id":"a6a2f65cdac09165","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":880,"wires":[["e4d2f4886532a2a9","f90f8ac8fae281cb"]]},{"id":"0bd466d3d9d550c4","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":940,"wires":[]},{"id":"a93a803610b159b9","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":1000,"wires":[]},{"id":"6c4a8277c14a062f","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":1060,"wires":[]},{"id":"527f9742ffdbde46","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":1000,"wires":[["32bb29679103635e"]]},{"id":"72eb01fdeee77b36","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_LEDs\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_LEDs');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1000,"wires":[["527f9742ffdbde46","8e727bb7f2f70fc2"]]},{"id":"4cbc597b0f81cd82","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":1000,"wires":[["72eb01fdeee77b36"]]},{"id":"32bb29679103635e","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1000,"wires":[["6c4a8277c14a062f","a93a803610b159b9"]]},{"id":"8e727bb7f2f70fc2","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":1060,"wires":[]},{"id":"f99c7c28a5793170","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":1120,"wires":[]},{"id":"e2fdfa76c87cb761","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":1180,"wires":[]},{"id":"9ddf6820342eb9f7","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":1120,"wires":[["6b126155474b417d"]]},{"id":"cb194b51c3624a5c","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_beeps\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_beeps');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1031\";\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1120,"wires":[["9ddf6820342eb9f7","755949ce1b9fd963"]]},{"id":"bd54c98f7925d2c4","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":1120,"wires":[["cb194b51c3624a5c"]]},{"id":"6b126155474b417d","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1120,"wires":[["e2fdfa76c87cb761","f99c7c28a5793170"]]},{"id":"755949ce1b9fd963","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":1180,"wires":[]},{"id":"0673eb2a37673cf4","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":1240,"wires":[]},{"id":"3e75f68830888071","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":1300,"wires":[]},{"id":"622b2dbd7d7913e1","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":1240,"wires":[["3da874429dd86625"]]},{"id":"16f8916539cb8992","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_video_format\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_video_format');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":1240,"wires":[["622b2dbd7d7913e1","8f9b654f8c8098d9"]]},{"id":"05c2554503043b0a","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":1240,"wires":[["16f8916539cb8992"]]},{"id":"3da874429dd86625","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1240,"wires":[["3e75f68830888071","0673eb2a37673cf4"]]},{"id":"8f9b654f8c8098d9","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":1300,"wires":[]},{"id":"ac85e0fe4dd7b907","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":1360,"wires":[]},{"id":"b3b32ed75338991f","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":1420,"wires":[]},{"id":"8eb81f6d6681f55a","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":1360,"wires":[["8d9eabf50d8e3ff0"]]},{"id":"12f96e22b4b64188","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_OSD\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_OSD');\n\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1039\";\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1360,"wires":[["8eb81f6d6681f55a","fa0593afd1051bdb"]]},{"id":"e02dc3d9b66ddd9c","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":1360,"wires":[["12f96e22b4b64188"]]},{"id":"8d9eabf50d8e3ff0","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1360,"wires":[["b3b32ed75338991f","ac85e0fe4dd7b907"]]},{"id":"fa0593afd1051bdb","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":1420,"wires":[]},{"id":"038dae23cae5a517","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":1480,"wires":[]},{"id":"9bce6fed26647e79","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":1540,"wires":[]},{"id":"47e640805cbc5f6a","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":1480,"wires":[["735df75623cdfc30"]]},{"id":"5d6ecac44bb65ae2","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_auto_power_down\"","func":"\nitem=global.get('UDP_YY_GLOBAL_SETTINGS_auto_power_down');\n\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1042\";\n\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":1480,"wires":[["47e640805cbc5f6a","212564ef7984d2f7"]]},{"id":"bf1bd74deba48ac1","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":1480,"wires":[["5d6ecac44bb65ae2"]]},{"id":"735df75623cdfc30","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1480,"wires":[["9bce6fed26647e79","038dae23cae5a517"]]},{"id":"212564ef7984d2f7","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":1540,"wires":[]},{"id":"6f97375fc6f21a3f","type":"comment","z":"93d7b78b.d2d2d8","name":"Global Settings","info":"","x":100,"y":100,"wires":[]},{"id":"a393561bcc5e08c7","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":1800,"wires":[]},{"id":"9b171519f1f7b931","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1210,"y":1860,"wires":[]},{"id":"320f2b1c8072ef98","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":1800,"wires":[["933344652969977a"]]},{"id":"65ad29fc29224bfc","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_date_time\" SET","func":"\n//item=global.get('UDP_YY_GLOBAL_SETTINGS_auto_power_down');\n\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1048\";\n\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":1800,"wires":[["320f2b1c8072ef98","3a4c489c456d7a15"]]},{"id":"8acc4960e36bf91a","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":1800,"wires":[["65ad29fc29224bfc"]]},{"id":"933344652969977a","type":"function","z":"93d7b78b.d2d2d8","name":"YY_set Date-Time","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\n//parse Timestamp\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\nconst reg1 = /-/g;\nconst reg2 = /:/g;\nconst reg3= /\\.\\d{3}Z/;\n\nmsg.timestamp = ((new Date(Date.now() - offset)).toISOString()).replace(reg1, \" \").replace(\"T\", \" \").replace(reg2, \" \").replace(reg3, \"\");\nmsg.timestamp = msg.timestamp.split(\" \");\n\n\n//parse year to high byte and low byte\n\nvar yearhex=Buffer.alloc(2);\nyearhex.writeInt16BE(msg.timestamp[0]);\n\n//set date values to variables\n\nmonth = msg.timestamp[1];\nday = msg.timestamp[2];\nhour = msg.timestamp[3];\nminute = msg.timestamp[4];\nsecond = msg.timestamp[5];\n\n// build buffer on basis of database-buffer and replace actual values\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[20], msg.payload[21], msg.payload[0][\"22\"], msg.payload[0][\"23\"], msg.payload[0][\"24\"]]);\n\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\nmsg.payload[18] = yearhex[0];\nmsg.payload[19] = yearhex[1];\nmsg.payload[20] = month;\nmsg.payload[21] = day;\nmsg.payload[22] = hour;\nmsg.payload[23] = minute;\nmsg.payload[24] = second;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":1800,"wires":[["9b171519f1f7b931","a393561bcc5e08c7"]]},{"id":"3a4c489c456d7a15","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":1860,"wires":[]},{"id":"cf45465d18989127","type":"udp out","z":"93d7b78b.d2d2d8","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1270,"y":1640,"wires":[]},{"id":"8e8682ea7b8077fa","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1230,"y":1700,"wires":[]},{"id":"b761ebb9e2ed0b22","type":"mysql","z":"93d7b78b.d2d2d8","mydb":"395f2a47.6cfaf6","name":"","x":850,"y":1640,"wires":[["7146e8938bec1d4f"]]},{"id":"111446a8ce57ad82","type":"function","z":"93d7b78b.d2d2d8","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_date_time\" GET","func":"\n//item=global.get('UDP_YY_GLOBAL_SETTINGS_auto_power_down');\n\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1047\";\n\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":1640,"wires":[["b761ebb9e2ed0b22","aacd180b391684d9"]]},{"id":"278b95a8bd4e804c","type":"inject","z":"93d7b78b.d2d2d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":1640,"wires":[["111446a8ce57ad82"]]},{"id":"7146e8938bec1d4f","type":"function","z":"93d7b78b.d2d2d8","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1640,"wires":[["8e8682ea7b8077fa","cf45465d18989127"]]},{"id":"aacd180b391684d9","type":"debug","z":"93d7b78b.d2d2d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":1700,"wires":[]},{"id":"56596fca2165d8da","type":"link in","z":"93d7b78b.d2d2d8","name":"UDP_from_MySQL_Date_time_SET --> DB_Parameter","links":["bac441912b83de28","1eed3e981d48c625"],"x":95,"y":1720,"wires":[["65ad29fc29224bfc"]]},{"id":"1bb0c03f5f2a11e2","type":"link in","z":"93d7b78b.d2d2d8","name":"UDP_from_MySQL_Date_time_GET --> DB_Parameter","links":["5c9e0970602249d3","be1a6cbcd5363e76"],"x":95,"y":1560,"wires":[["111446a8ce57ad82"]]},{"id":"ee62a985cc248f9a","type":"udp in","z":"86c60d8f68f58406","name":"GoProHero5black receive","iface":"","port":"8383","ipv":"udp4","multicast":"false","group":"10.71.79.101","datatype":"buffer","x":150,"y":440,"wires":[["167ebc3cd83b8a3f","9b9035232e56c9c5"]]},{"id":"167ebc3cd83b8a3f","type":"debug","z":"86c60d8f68f58406","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":370,"y":380,"wires":[]},{"id":"ad8892fe87e4fe06","type":"udp out","z":"86c60d8f68f58406","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":1290,"y":220,"wires":[]},{"id":"28a60d90be9c85c8","type":"debug","z":"86c60d8f68f58406","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1250,"y":280,"wires":[]},{"id":"97f67a62368fa1b6","type":"mysql","z":"86c60d8f68f58406","mydb":"395f2a47.6cfaf6","name":"","x":870,"y":220,"wires":[["ec030d44a01bc41c"]]},{"id":"229a5a7978e03101","type":"function","z":"86c60d8f68f58406","name":"SELECT from YY - \"UDP_YY_GLOBAL_SETTINGS_date_time\" GET","func":"\n//item=global.get('UDP_YY_GLOBAL_SETTINGS_auto_power_down');\n\n//msg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = \" + item;\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID = 1047\";\n\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":220,"wires":[["97f67a62368fa1b6","63456e723001364e"]]},{"id":"592fe70c1d94c054","type":"inject","z":"86c60d8f68f58406","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":130,"y":220,"wires":[["229a5a7978e03101"]]},{"id":"ec030d44a01bc41c","type":"function","z":"86c60d8f68f58406","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":220,"wires":[["28a60d90be9c85c8","ad8892fe87e4fe06"]]},{"id":"63456e723001364e","type":"debug","z":"86c60d8f68f58406","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":280,"wires":[]},{"id":"2de8972d0d8e663d","type":"function","z":"86c60d8f68f58406","name":"detect GoProANSWER to GET datetime (1047)","func":"\n\n//var hex = msg.payload[20] << 8 | (msg.payload[21] & 0xff);\n//var year = parseInt(hex);\n\n//var year = parseInt(msg.payload[20] << 8 | (msg.payload[21] & 0xff));\n\n\nif ((msg.payload[11] == 0x59)\n&& (msg.payload[12] == 0x59) \n&& (msg.payload[13] == 0x0) \n&& (msg.payload[14] == 0x0) \n&& (msg.payload[15] == 0x7) \n&& (msg.payload[16] == 0x1a) \n&& (msg.payload[17] == 0x0) \n&& (msg.payload[18] == 0x0) \n&& (msg.payload[19] == 0x8)\n)\n  //{msg.topic = 1;\n  \n{global.set('GoPro_UDP_datetime_year', parseInt(msg.payload[20] << 8 | (msg.payload[21] & 0xff))); \nglobal.set('GoPro_UDP_datetime_month', parseInt(msg.payload[22]).toString().padStart(2,\"0\")); \nglobal.set('GoPro_UDP_datetime_day', parseInt(msg.payload[23]).toString().padStart(2,\"0\"));\nglobal.set('GoPro_UDP_datetime_hour', parseInt(msg.payload[24]).toString().padStart(2,\"0\"));\nglobal.set('GoPro_UDP_datetime_minute', parseInt(msg.payload[25]).toString().padStart(2,\"0\"));\nglobal.set('GoPro_UDP_datetime_second', parseInt(msg.payload[26]).toString().padStart(2,\"0\"));\n\n    } else {msg.topic = 0;}\n        \n\nmsg.year = global.get('GoPro_UDP_datetime_year');\nmsg.month = global.get('GoPro_UDP_datetime_month');\nmsg.day = global.get('GoPro_UDP_datetime_day');\nmsg.hour = global.get('GoPro_UDP_datetime_hour');\nmsg.minute = global.get('GoPro_UDP_datetime_minute');\nmsg.second = global.get('GoPro_UDP_datetime_second');\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":440,"wires":[["c880f28a336e9467"]]},{"id":"c880f28a336e9467","type":"debug","z":"86c60d8f68f58406","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":790,"y":380,"wires":[]},{"id":"9b9035232e56c9c5","type":"change","z":"86c60d8f68f58406","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"year","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"month","pt":"msg","to":"","tot":"num"},{"t":"set","p":"day","pt":"msg","to":"","tot":"num"},{"t":"set","p":"hour","pt":"msg","to":"","tot":"num"},{"t":"set","p":"minute","pt":"msg","to":"","tot":"num"},{"t":"set","p":"second","pt":"msg","to":"","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":440,"wires":[["2de8972d0d8e663d"]]},{"id":"e47d6455.773be8","type":"http request","z":"3b3462fd.256a6e","name":"Shutter Start","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1130,"y":120,"wires":[["70822b34.c32404"]]},{"id":"70822b34.c32404","type":"debug","z":"3b3462fd.256a6e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1430,"y":120,"wires":[]},{"id":"274f8f68.39c53","type":"function","z":"3b3462fd.256a6e","name":"SELECT SH1","func":"msg.topic = \"SELECT info, http FROM HTTP WHERE UniqueID = 1\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":120,"wires":[["90abbff8.af722"]]},{"id":"4bc40838.c74af8","type":"inject","z":"3b3462fd.256a6e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":120,"wires":[["274f8f68.39c53"]]},{"id":"90abbff8.af722","type":"mysql","z":"3b3462fd.256a6e","mydb":"760a3e67.03abe","name":"","x":690,"y":120,"wires":[["c59c303e.2238a"]]},{"id":"c59c303e.2238a","type":"change","z":"3b3462fd.256a6e","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload[0].http","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":120,"wires":[["e47d6455.773be8"]]},{"id":"4c1adc33.0ed7d4","type":"http request","z":"3b3462fd.256a6e","name":"Shutter Stop","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1130,"y":180,"wires":[["4136d792.1fc7b8"]]},{"id":"4136d792.1fc7b8","type":"debug","z":"3b3462fd.256a6e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1430,"y":180,"wires":[]},{"id":"41441899.8ee758","type":"function","z":"3b3462fd.256a6e","name":"SELECT SH0","func":"msg.topic = \"SELECT info, http FROM HTTP WHERE UniqueID = 2\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":180,"wires":[["7912c291.f1c57c"]]},{"id":"70e3aee1.b1dfd","type":"inject","z":"3b3462fd.256a6e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":180,"wires":[["41441899.8ee758"]]},{"id":"7912c291.f1c57c","type":"mysql","z":"3b3462fd.256a6e","mydb":"760a3e67.03abe","name":"","x":690,"y":180,"wires":[["4fce188d.2f1218"]]},{"id":"4fce188d.2f1218","type":"change","z":"3b3462fd.256a6e","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload[0].http","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":180,"wires":[["4c1adc33.0ed7d4"]]},{"id":"53c0c2df.efa81c","type":"http request","z":"3b3462fd.256a6e","name":"Wifi Streaming ON","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1150,"y":240,"wires":[["f853b92d.c19b68"]]},{"id":"f853b92d.c19b68","type":"debug","z":"3b3462fd.256a6e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1430,"y":240,"wires":[]},{"id":"66139b9b.9b5794","type":"function","z":"3b3462fd.256a6e","name":"SELECT Wifi Streamin ON","func":"msg.topic = \"SELECT info, http FROM HTTP WHERE UniqueID = 3\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":240,"wires":[["78e60035.2ac58"]]},{"id":"4a47f36.c380f0c","type":"inject","z":"3b3462fd.256a6e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":240,"wires":[["66139b9b.9b5794"]]},{"id":"78e60035.2ac58","type":"mysql","z":"3b3462fd.256a6e","mydb":"760a3e67.03abe","name":"","x":690,"y":240,"wires":[["9356c9de.95baf8"]]},{"id":"9356c9de.95baf8","type":"change","z":"3b3462fd.256a6e","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload[0].http","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":240,"wires":[["53c0c2df.efa81c"]]},{"id":"416dc56c.d88b9c","type":"http request","z":"3b3462fd.256a6e","name":"Wifi Streaming OFF","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1150,"y":300,"wires":[["1224d8c.7d01227"]]},{"id":"1224d8c.7d01227","type":"debug","z":"3b3462fd.256a6e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1430,"y":300,"wires":[]},{"id":"62c03c45.bc68c4","type":"function","z":"3b3462fd.256a6e","name":"SELECT Wifi Streamin OFF","func":"msg.topic = \"SELECT info, http FROM HTTP WHERE UniqueID = 4\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":300,"wires":[["61ce09ab.747bb8"]]},{"id":"d6654b6b.37b148","type":"inject","z":"3b3462fd.256a6e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":300,"wires":[["62c03c45.bc68c4"]]},{"id":"61ce09ab.747bb8","type":"mysql","z":"3b3462fd.256a6e","mydb":"760a3e67.03abe","name":"","x":690,"y":300,"wires":[["f865749f.a475a8"]]},{"id":"f865749f.a475a8","type":"change","z":"3b3462fd.256a6e","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload[0].http","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":300,"wires":[["416dc56c.d88b9c"]]},{"id":"4b0674c.6ada48c","type":"function","z":"3b3462fd.256a6e","name":"SELECT Finalize Pairing","func":"msg.topic = \"SELECT info, http FROM HTTP WHERE UniqueID = 25\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":440,"wires":[["12a62722.852499"]]},{"id":"86dde41c.b83b88","type":"inject","z":"3b3462fd.256a6e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":440,"wires":[["4b0674c.6ada48c"]]},{"id":"12a62722.852499","type":"mysql","z":"3b3462fd.256a6e","mydb":"760a3e67.03abe","name":"","x":690,"y":440,"wires":[["38cb0704.3dde38"]]},{"id":"48ea15a2.67430c","type":"http request","z":"3b3462fd.256a6e","name":"Connect to GoProAP","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","x":1160,"y":440,"wires":[["f19a1a82.a53758"]]},{"id":"f19a1a82.a53758","type":"debug","z":"3b3462fd.256a6e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1430,"y":440,"wires":[]},{"id":"38cb0704.3dde38","type":"function","z":"3b3462fd.256a6e","name":"get global DeviceName","func":"var DeviceName_called = global.get('DeviceName');\nmsg.url = msg.payload[0].http + DeviceName_called;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":910,"y":440,"wires":[["48ea15a2.67430c"]]},{"id":"854683526ecec08b","type":"http request","z":"3b3462fd.256a6e","name":"Switch to APP/Smartphone Mode","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","authType":"","senderr":false,"x":1200,"y":360,"wires":[["c61c7472287f1cea"]]},{"id":"c61c7472287f1cea","type":"debug","z":"3b3462fd.256a6e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1430,"y":360,"wires":[]},{"id":"467c234a05a8a252","type":"function","z":"3b3462fd.256a6e","name":"SELECT Switch to APP/Smartphone Mode","func":"msg.topic = \"SELECT info, http FROM HTTP WHERE UniqueID = 336\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":410,"y":360,"wires":[["c61bb13e274ec39c"]]},{"id":"bac0d85ee5aa853e","type":"inject","z":"3b3462fd.256a6e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":360,"wires":[["467c234a05a8a252"]]},{"id":"c61bb13e274ec39c","type":"mysql","z":"3b3462fd.256a6e","mydb":"760a3e67.03abe","name":"","x":690,"y":360,"wires":[["b1491fdfd0fe4ca9"]]},{"id":"b1491fdfd0fe4ca9","type":"change","z":"3b3462fd.256a6e","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload[0].http","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":360,"wires":[["854683526ecec08b"]]},{"id":"4396ec6d35e914eb","type":"link in","z":"3b3462fd.256a6e","name":"HTTP_from_MySQL_FinalizePairing --> BLE_Connection","links":["8ce9c8e7bb67d23a"],"x":105,"y":520,"wires":[["4b0674c.6ada48c"]]},{"id":"94ef5a6a.575dd8","type":"function","z":"c1d663c3.e4762","name":"SELECT ShutterStart","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 1\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":140,"wires":[["8129afe1.4dc6"]]},{"id":"8129afe1.4dc6","type":"mysql","z":"c1d663c3.e4762","mydb":"230fd081.affe6","name":"","x":510,"y":460,"wires":[["81c8be60.6f898","6eebaf45565b1d75"]]},{"id":"94ccc4b.2a2ce38","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":140,"wires":[["94ef5a6a.575dd8"]]},{"id":"81c8be60.6f898","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":530,"y":520,"wires":[]},{"id":"3111cc30.1ac844","type":"function","z":"c1d663c3.e4762","name":"SELECT ShutterStop","func":"msg.topic = \"SELECT BLE, HW1, HW2, HW3, HW4, HW5, HW6 FROM BLE WHERE UniqueID = 2\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1700,"wires":[["600153a2.50f20c"]]},{"id":"600153a2.50f20c","type":"mysql","z":"c1d663c3.e4762","mydb":"230fd081.affe6","name":"","x":650,"y":1700,"wires":[["f1b83326.d71af","b9d09920.031298"]]},{"id":"fc46e3e5.a2abe","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":180,"y":1700,"wires":[["3111cc30.1ac844"]]},{"id":"9e9a8819.0b3f28","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":1640,"wires":[]},{"id":"f1b83326.d71af","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":670,"y":1640,"wires":[]},{"id":"b9d09920.031298","type":"change","z":"c1d663c3.e4762","name":"BLE Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"{$join([payload[0].HW1,payload[0].HW2,payload[0].HW3]):$.payload[0].BLE}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":1700,"wires":[["9e9a8819.0b3f28"]]},{"id":"ecb5bf13.b0193","type":"function","z":"c1d663c3.e4762","name":"SELECT WifiOff","func":"msg.topic = \"SELECT BLE, HW1, HW2, HW3, HW4, HW5, HW6 FROM BLE WHERE UniqueID = 22\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":1820,"wires":[["31158edf.7b4e22"]]},{"id":"31158edf.7b4e22","type":"mysql","z":"c1d663c3.e4762","mydb":"230fd081.affe6","name":"","x":650,"y":1820,"wires":[["435f41ab.0b84a","754dcec4.b8396"]]},{"id":"c27c3c3f.f64a1","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":180,"y":1820,"wires":[["ecb5bf13.b0193"]]},{"id":"5404474f.871408","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":1760,"wires":[]},{"id":"435f41ab.0b84a","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":670,"y":1760,"wires":[]},{"id":"754dcec4.b8396","type":"change","z":"c1d663c3.e4762","name":"BLE Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"{$join([payload[0].HW1,payload[0].HW2,payload[0].HW3]):$.payload[0].BLE}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":1820,"wires":[["5404474f.871408"]]},{"id":"79626f33.ba475","type":"function","z":"c1d663c3.e4762","name":"SELECT WifiOn","func":"msg.topic = \"SELECT BLE, HW1, HW2, HW3, HW4, HW5, HW6 FROM BLE WHERE UniqueID = 21\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":1920,"wires":[["26f38a9f.a02ee6"]]},{"id":"26f38a9f.a02ee6","type":"mysql","z":"c1d663c3.e4762","mydb":"230fd081.affe6","name":"","x":650,"y":1920,"wires":[["d61b1ad7.cb3678","54fe550f.1fe01c"]]},{"id":"b814a5cf.52ca98","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":180,"y":1920,"wires":[["79626f33.ba475"]]},{"id":"5df4937.6a7326c","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":850,"y":1860,"wires":[]},{"id":"d61b1ad7.cb3678","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":670,"y":1860,"wires":[]},{"id":"54fe550f.1fe01c","type":"change","z":"c1d663c3.e4762","name":"BLE Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"{$join([payload[0].HW1,payload[0].HW2,payload[0].HW3]):$.payload[0].BLE}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":1920,"wires":[["5df4937.6a7326c"]]},{"id":"6eebaf45565b1d75","type":"function","z":"c1d663c3.e4762","name":"","func":"\nvar HW1 = msg.payload[0].HW1;\nvar HW2 = msg.payload[0].HW2;\nvar HW3 = msg.payload[0].HW3;\nvar HW4 = msg.payload[0].HW4;\nvar HW5 = msg.payload[0].HW5;\nvar HW6 = msg.payload[0].HW6;\nvar Separator = \"-\";\nvar BLE = msg.payload[0].BLE_HEX;\nvar Info = msg.payload[0].Info;\n\nmsg.handle = HW1 + HW2 + Separator + HW3 + Separator + HW4 + Separator + HW5 + Separator + HW6;\nmsg.command = BLE;\nmsg.payload = \" \" + \"'\" + msg.handle + \"'\" + \" \" + '\"' + \"'\" + msg.command + \"'\" + '\"';\nmsg.topic = Info;\n\n//msg.handle = msg.payload[0].HW1.concat(msg.payload[0].HW2)'-'msg.payload[0].HW3'-'msg.payload[0].HW4'-'msg.payload[0].HW5'-'msg.payload[0].HW6;\nreturn msg;\n\n//payload[0].HW1","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":460,"wires":[["474e313c5facf6a2","69d8b0540fffd91d"]]},{"id":"474e313c5facf6a2","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":520,"wires":[]},{"id":"69d8b0540fffd91d","type":"exec","z":"c1d663c3.e4762","command":"/home/odroid/BLE_command.sh","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"BLE Command bluetoothctl","x":900,"y":460,"wires":[["7d6f14187c2a3d90"],["20ec74095d90203a"],["bc31011a9c1c4fda"]]},{"id":"7d6f14187c2a3d90","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":420,"wires":[]},{"id":"20ec74095d90203a","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":460,"wires":[]},{"id":"bc31011a9c1c4fda","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":500,"wires":[]},{"id":"3c56acc368eaf4e5","type":"exec","z":"c1d663c3.e4762","command":"sudo gatttool -t random -b ${BLE_DeviceMAC} --char-write-req -a 0x2f -n 03010100","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"BLE Command gatttool ShutterStart","x":440,"y":1540,"wires":[["0e05fd869da97cfd"],["e0a0117c41b14070"],["8c471add432eecce"]]},{"id":"4ff88a6390253b2d","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"gatt.write \"0x03 0x01 0x01 0x01\"","payloadType":"str","x":190,"y":1540,"wires":[["3c56acc368eaf4e5"]]},{"id":"0e05fd869da97cfd","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":1500,"wires":[]},{"id":"e0a0117c41b14070","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":1540,"wires":[]},{"id":"8c471add432eecce","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":1580,"wires":[]},{"id":"fd83f27e9520e35b","type":"function","z":"c1d663c3.e4762","name":"SELECT ShutterStop","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 2\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":220,"wires":[["8129afe1.4dc6"]]},{"id":"c1239b3008c5d678","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":220,"wires":[["fd83f27e9520e35b"]]},{"id":"e5a95128e716958e","type":"function","z":"c1d663c3.e4762","name":"SELECT WifiOn","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 21\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":320,"wires":[["8129afe1.4dc6"]]},{"id":"4e50935cb0080d73","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":320,"wires":[["e5a95128e716958e"]]},{"id":"12c3c09346a48c23","type":"function","z":"c1d663c3.e4762","name":"SELECT WifiOff","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 22\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":380,"wires":[["8129afe1.4dc6"]]},{"id":"3e85613b30c6bb8c","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":380,"wires":[["12c3c09346a48c23"]]},{"id":"df5474b0f153be3b","type":"comment","z":"c1d663c3.e4762","name":"Gatttool","info":"","x":70,"y":1480,"wires":[]},{"id":"6fd57836c2e115ae","type":"comment","z":"c1d663c3.e4762","name":"Bluetoothctl","info":"","x":90,"y":40,"wires":[]},{"id":"a3c0395231a9d7eb","type":"comment","z":"c1d663c3.e4762","name":"old","info":"","x":70,"y":1640,"wires":[]},{"id":"7c9275150c9dc48e","type":"function","z":"c1d663c3.e4762","name":"SELECT 2.7k","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 59\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":540,"wires":[["8129afe1.4dc6"]]},{"id":"1861268a59492191","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":70,"y":540,"wires":[["7c9275150c9dc48e"]]},{"id":"c237aa55c02d09e8","type":"function","z":"c1d663c3.e4762","name":"SELECT Keep Alive","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 29\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":480,"wires":[["8129afe1.4dc6"]]},{"id":"475f3ec860291e22","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":70,"y":480,"wires":[["c237aa55c02d09e8"]]},{"id":"4caf7d9baf7e5c89","type":"function","z":"c1d663c3.e4762","name":"SELECT PowerOff Sleep","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 16\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":700,"wires":[["8129afe1.4dc6"]]},{"id":"5a0aee830540b1e8","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":70,"y":700,"wires":[["4caf7d9baf7e5c89"]]},{"id":"cf9f46f99f189868","type":"function","z":"c1d663c3.e4762","name":"SELECT PowerOff Force","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 17\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":780,"wires":[["8129afe1.4dc6"]]},{"id":"d33cdd9e32428789","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":70,"y":780,"wires":[["cf9f46f99f189868"]]},{"id":"d4ba938b9fb35d98","type":"function","z":"c1d663c3.e4762","name":"SELECT 4k","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 58\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":620,"wires":[["8129afe1.4dc6"]]},{"id":"522b6ecdd01751bf","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":70,"y":620,"wires":[["d4ba938b9fb35d98"]]},{"id":"4fc071f8f4099767","type":"link in","z":"c1d663c3.e4762","name":"BLE_from_MySQL_WifiON --> DB_Connectivity","links":["b49b16636bd5a31d","e9d643b0afa6ce8e"],"x":55,"y":280,"wires":[["e5a95128e716958e","b6f92a463a814eaf"]]},{"id":"f36ab2a57d4342e7","type":"function","z":"c1d663c3.e4762","name":"SELECT AP Control","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 32\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":860,"wires":[["8129afe1.4dc6"]]},{"id":"fa87d5be45b1ac27","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":860,"wires":[["f36ab2a57d4342e7"]]},{"id":"8768cbfecee1f14a","type":"mysql","z":"c1d663c3.e4762","mydb":"230fd081.affe6","name":"","x":530,"y":1200,"wires":[["ad5c85b59e0c6cd5"]]},{"id":"ad5c85b59e0c6cd5","type":"function","z":"c1d663c3.e4762","name":"","func":"\nvar HR1 = msg.payload[0].HR1;\nvar HR2 = msg.payload[0].HR2;\nvar HR3 = msg.payload[0].HR3;\nvar HR4 = msg.payload[0].HR4;\nvar HR5 = msg.payload[0].HR5;\nvar HR6 = msg.payload[0].HR6;\nvar Separator = \"-\";\nvar BLE = msg.payload[0].BLE;\nvar Info = msg.payload[0].Info;\n\nmsg.handle = HR1 + HR2 + Separator + HR3 + Separator + HR4 + Separator + HR5 + Separator + HR6;\nmsg.command = BLE;\nmsg.payload = \" \" + \"'\" + msg.handle + \"'\" + \" \" + '\"' + \"'\" + msg.command + \"'\" + '\"';\nmsg.topic = Info;\n\n//msg.handle = msg.payload[0].HW1.concat(msg.payload[0].HW2)'-'msg.payload[0].HW3'-'msg.payload[0].HW4'-'msg.payload[0].HW5'-'msg.payload[0].HW6;\nreturn msg;\n\n//payload[0].HW1","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":1200,"wires":[["3522af4361ad2755"]]},{"id":"3522af4361ad2755","type":"exec","z":"c1d663c3.e4762","command":"/home/odroid/BLE_command.sh","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"BLE Command bluetoothctl","x":900,"y":1200,"wires":[["441e95e94062f6be"],["f87bf3aa5813d451"],["bfe49d48555494e5"]]},{"id":"e6e610505256f0be","type":"function","z":"c1d663c3.e4762","name":"SELECT Keep Alive","func":"msg.topic = \"SELECT BLE, HR1, HR2, HR3, HR4, HR5, HR6, Info FROM BLE WHERE UniqueID = 29\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":1200,"wires":[["8768cbfecee1f14a"]]},{"id":"7118d3d7f1d5d65e","type":"inject","z":"c1d663c3.e4762","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":1200,"wires":[["e6e610505256f0be"]]},{"id":"441e95e94062f6be","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1150,"y":1160,"wires":[]},{"id":"f87bf3aa5813d451","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1150,"y":1200,"wires":[]},{"id":"bfe49d48555494e5","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1150,"y":1240,"wires":[]},{"id":"9b6669d723fe0c31","type":"comment","z":"c1d663c3.e4762","name":"Write","info":"","x":90,"y":80,"wires":[]},{"id":"fa98be9d9ab839b3","type":"comment","z":"c1d663c3.e4762","name":"Acquire-notify","info":"","x":90,"y":1020,"wires":[]},{"id":"b6f92a463a814eaf","type":"debug","z":"c1d663c3.e4762","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":570,"y":260,"wires":[]},{"id":"774008af.b12d28","type":"exec","z":"bffdc47c.00e2b8","command":"sudo service hostapd stop && sudo service hostapd start","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"AP stop/start","x":1030,"y":180,"wires":[[],[],[]]},{"id":"74c54fcc.7892c","type":"udp in","z":"bffdc47c.00e2b8","name":"GoProHero5black receive","iface":"","port":"8383","ipv":"udp4","multicast":"false","group":"10.71.79.101","datatype":"buffer","x":170,"y":220,"wires":[["267c4f26.18714","919dc491.0fd218"]]},{"id":"267c4f26.18714","type":"debug","z":"bffdc47c.00e2b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":210,"y":160,"wires":[]},{"id":"1ea5f37f.f9dd7d","type":"debug","z":"bffdc47c.00e2b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":770,"y":120,"wires":[]},{"id":"6792e53f.592dbc","type":"trigger","z":"bffdc47c.00e2b8","name":"Watchdog2","op1":"","op2":"GoProOffline","op1type":"nul","op2type":"str","duration":"3.4","extend":true,"overrideDelay":false,"units":"s","reset":"GoProOnline","bytopic":"all","topic":"topic","outputs":1,"x":770,"y":180,"wires":[["1ea5f37f.f9dd7d","774008af.b12d28","361974a2.a6fe8c"]],"info":"setze \n\"dann\" \"warten auf\" auf 3 x var:delay des Heartbeats für beste Ergebnisse (nicht kürzer sonst beginnt er zu flappen!)\n\nDieses WakeUp Gopro bewirkt:\n1.) Overruled sozusagen die \"Automatische Kammeraabschaltung\" der GoPro - Settings und\n2.) dedektiert und behebt Abrisse in der UDP Kommunikation zwischen Node-red und GoProHero5Black"},{"id":"4c79bcae.17b294","type":"comment","z":"bffdc47c.00e2b8","name":"Checking UDP - GoPro Connection","info":"","x":160,"y":80,"wires":[]},{"id":"2cf3cb35.810924","type":"inject","z":"bffdc47c.00e2b8","name":"GoProCheck","repeat":"6.7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"GoProCheck","payloadType":"str","x":460,"y":320,"wires":[["a7821d19.993b1"]]},{"id":"a7821d19.993b1","type":"trigger","z":"bffdc47c.00e2b8","name":"WatchDog1","op1":"","op2":"GoPro Dead","op1type":"nul","op2type":"str","duration":"6.5","extend":true,"overrideDelay":false,"units":"s","reset":"GoProOnline","bytopic":"all","topic":"topic","outputs":1,"x":770,"y":280,"wires":[["6792e53f.592dbc","1b5f62b4.44c7ad"]]},{"id":"1b5f62b4.44c7ad","type":"debug","z":"bffdc47c.00e2b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":770,"y":340,"wires":[]},{"id":"9bab2c6.e7fd8d","type":"debug","z":"bffdc47c.00e2b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":470,"y":160,"wires":[]},{"id":"919dc491.0fd218","type":"change","z":"bffdc47c.00e2b8","name":"GoProOnline - Reset","rules":[{"t":"set","p":"payload","pt":"msg","to":"GoProOnline","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":220,"wires":[["a7821d19.993b1","9bab2c6.e7fd8d","6792e53f.592dbc","e674fa56.5827c8"]]},{"id":"e674fa56.5827c8","type":"link out","z":"bffdc47c.00e2b8","name":"WakeUp GoPro UDP_GoProOnline->DB_connectivity","links":["d810a272.2ce32"],"x":575,"y":260,"wires":[]},{"id":"361974a2.a6fe8c","type":"link out","z":"bffdc47c.00e2b8","name":"WakeUp GoPro UDP_GoProOffline->DB_connectivity","links":["d810a272.2ce32"],"x":875,"y":220,"wires":[]},{"id":"33979c2f.60bca4","type":"inject","z":"bffdc47c.00e2b8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":940,"y":60,"wires":[["774008af.b12d28"]]},{"id":"e3dfbbe3.865c78","type":"tcp-ping","z":"bffdc47c.00e2b8","ip":"10.5.5.9","port":"80","count":"3","interval":"1000","timeout":"3000","topic":"check","name":"","x":420,"y":560,"wires":[["17f7f11d.79237f","ceec7588.fb0848"]]},{"id":"f88a0b5.04cbff8","type":"inject","z":"bffdc47c.00e2b8","name":"Check tcp","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"status.text","v":"","vt":"str"}],"repeat":"4","crontab":"","once":false,"onceDelay":0.1,"topic":"check","payload":"","payloadType":"date","x":250,"y":560,"wires":[["e3dfbbe3.865c78"]]},{"id":"17f7f11d.79237f","type":"debug","z":"bffdc47c.00e2b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":500,"wires":[]},{"id":"ceec7588.fb0848","type":"function","z":"bffdc47c.00e2b8","name":"GoProHttpConnected","func":"\n\n// ping only works if already connected!!\n\nif (msg.payload.sent - msg.payload.success == 0) {\nmsg.status.text = \"common.status.connected\";\n}\nelse {\nmsg.status.text = \"common.status.disconnected\";\n}\n\nglobal.set('GoProHttpConnected',msg.status.text)\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":560,"wires":[["21b59e1.0a76362","8a81287b.a72b78"]]},{"id":"21b59e1.0a76362","type":"debug","z":"bffdc47c.00e2b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":830,"y":600,"wires":[]},{"id":"8a81287b.a72b78","type":"link out","z":"bffdc47c.00e2b8","name":"WakeUp GoPro HTTP tcp Status->DB_Connectivity","mode":"link","links":["a4bef44c.c585c8","3daf02145174eb29"],"x":1075,"y":560,"wires":[]},{"id":"6cee525d.3254dc","type":"comment","z":"bffdc47c.00e2b8","name":"Checking tcp - GoPro AP","info":"","x":130,"y":440,"wires":[]},{"id":"8d3bb658.4ada48","type":"udp out","z":"89b9f172.e63fe","name":"GoProHero5black","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":630,"y":300,"wires":[]},{"id":"6fb463e9.40755c","type":"debug","z":"89b9f172.e63fe","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":500,"y":180,"wires":[]},{"id":"368a4fa8.d54c4","type":"inject","z":"89b9f172.e63fe","d":true,"name":"","repeat":"1.55","crontab":"","once":false,"onceDelay":"0.5","topic":"","payload":"true","payloadType":"bool","x":140,"y":80,"wires":[["5e61020f.5fa4ac"]]},{"id":"5e61020f.5fa4ac","type":"function","z":"89b9f172.e63fe","name":"UDP_HeartBeat_batch","func":"\nvar highCounterStatusReport = flow.get(\"highCounterStatusReport\")||0;\nvar lowCounterStatusReport = flow.get(\"lowCounterStatusReport\")||0;\nvar highCounterLCDStatus = flow.get(\"highCounterLCDStatus\")||0;\nvar lowCounterLCDStatus = flow.get(\"lowCounterLCDStatus\")||0;\nvar Opener1 = {payload:new Buffer ([0x00])};\nvar Opener2 = {payload:new Buffer ([0x01])};\nvar LCDStatus = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6C, 0x63]);\nvar StatusReport = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x73, 0x74])\n\n//send Opener1\n//node.send(Opener1);\n//node.done();\n\n//send Opener2\n//node.send(Opener2);\n//node.done();\n\n\n//count up and send LCDStatus 5 times\nfor (var i = 0; i < 5; i++)\n\n{\nif (lowCounterLCDStatus >= 255)\n{highCounterLCDStatus++; lowCounterLCDStatus = 0;}\nif (highCounterLCDStatus >= 255) {highCounterLCDStatus = 0; lowCounterLCDStatus++;}\n\nlowCounterLCDStatus++;\n\nLCDStatus[9] = highCounterLCDStatus;\nLCDStatus[10] = lowCounterLCDStatus;\n\nvar NewLCDStatus = {payload:LCDStatus};\n\nnode.send(NewLCDStatus);\nnode.done();\n\nflow.set(\"highCounterLCDStatus\",highCounterLCDStatus);\nflow.set(\"lowCounterLCDStatus\",lowCounterLCDStatus);\n}\n\n\n//count up StatusReport\nif (lowCounterStatusReport >= 255)\n{highCounterStatusReport++; lowCounterStatusReport = 0;}\nif (highCounterStatusReport >= 255) {highCounterStatusReport = 0; lowCounterStatusReport++;}\n\nlowCounterStatusReport++;\n\nStatusReport[9] = highCounterStatusReport;\nStatusReport[10] = lowCounterStatusReport;\n\n\nflow.set(\"highCounterStatusReport\",highCounterStatusReport);\nflow.set(\"lowCounterStatusReport\",lowCounterStatusReport);\n\nreturn {payload:StatusReport};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":220,"wires":[["6fb463e9.40755c","8d3bb658.4ada48"]]},{"id":"f7dd97da.158c18","type":"function","z":"89b9f172.e63fe","name":"UDP_HeartBeat_singel","func":"\nvar highCounterStatusReport = flow.get(\"highCounterStatusReport\")||0;\nvar lowCounterStatusReport = flow.get(\"lowCounterStatusReport\")||0;\nvar highCounterLCDStatus = flow.get(\"highCounterLCDStatus\")||0;\nvar lowCounterLCDStatus = flow.get(\"lowCounterLCDStatus\")||0;\nvar Opener1 = {payload:new Buffer ([0x00])};\nvar Opener2 = {payload:new Buffer ([0x01])};\nvar LCDStatus = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6C, 0x63]);\nvar StatusReport = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x73, 0x74])\nvar delay = 800;\n\n\n//send Opener1\nsetTimeout(()=>{\nnode.send(Opener1);\nnode.done();\n}, delay);\n\n\n//send Opener2\nsetTimeout(()=>{\nnode.send(Opener2);\nnode.done();\n}, 2 * delay)\n\n//count up and send LCDStatus 5 times\n\n\nfor (var i = 0; i < 5; i++)\n{setTimeout(()=>\n{\nif (lowCounterLCDStatus >= 255)\n{highCounterLCDStatus++; lowCounterLCDStatus = 0;}\nif (highCounterLCDStatus >= 255) {highCounterLCDStatus = 0; lowCounterLCDStatus++;}\n\nlowCounterLCDStatus++;\n\nLCDStatus[9] = highCounterLCDStatus;\nLCDStatus[10] = lowCounterLCDStatus;\n\nvar NewLCDStatus = {payload:LCDStatus};\n\nnode.send(NewLCDStatus);\nnode.done();\n\nflow.set(\"highCounterLCDStatus\",highCounterLCDStatus);\nflow.set(\"lowCounterLCDStatus\",lowCounterLCDStatus);\n    \n}, 3 * delay + i * delay)}\n\n\n//count up StatusReport\nif (lowCounterStatusReport >= 255)\n{highCounterStatusReport++; lowCounterStatusReport = 0;}\nif (highCounterStatusReport >= 255) {highCounterStatusReport = 0; lowCounterStatusReport++;}\n\nlowCounterStatusReport++;\n\nStatusReport[9] = highCounterStatusReport;\nStatusReport[10] = lowCounterStatusReport;\n\n\nflow.set(\"highCounterStatusReport\",highCounterStatusReport);\nflow.set(\"lowCounterStatusReport\",lowCounterStatusReport);\n\nsetTimeout(()=>{\nnode.send({payload:StatusReport});\nnode.done();\n}, 8 * delay);","outputs":1,"noerr":0,"x":250,"y":420,"wires":[["5316125d.25b53c","212d622b.85f77e"]]},{"id":"6768f82f.e5de68","type":"inject","z":"89b9f172.e63fe","d":true,"name":"","repeat":"6.4","crontab":"","once":true,"onceDelay":"0","topic":"","payload":"true","payloadType":"bool","x":90,"y":340,"wires":[["f7dd97da.158c18"]]},{"id":"5316125d.25b53c","type":"debug","z":"89b9f172.e63fe","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":510,"y":380,"wires":[]},{"id":"212d622b.85f77e","type":"udp out","z":"89b9f172.e63fe","name":"GoProHero5black","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":630,"y":520,"wires":[]},{"id":"42bb9fad.e2d86","type":"function","z":"89b9f172.e63fe","name":"UDP_HeartBeat_sepp89117","func":"var LCDStatus = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6c, 0x63]);\nvar StatusReport = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x73, 0x74]);\nvar Wait = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x77, 0x74]);\n\n//Intervall für Nachrichten senden\nvar delay = 800;\n\n// ein 2-Byte-Zähler für alle Nachrichten\nvar highCounter = 0;\nvar lowCounter = 0;\n\n// ein Indikator welche Nachricht diesesmal zu senden ist\nvar indicator = 0;\n\n//Setze Timer der gemäß Intervall ausführt\nsetInterval(()=>{\n    switch(indicator){\n        case 0:\n            Wait[9] = highCounter;\n            Wait[10] = lowCounter;\n            node.send({payload:Wait});\n            node.done();\n            indicator++; //Indikator hochzählen\n            break;\n        case 1:\n            StatusReport[9] = highCounter;\n            StatusReport[10] = lowCounter;\n            node.send({payload:StatusReport});\n            node.done();\n            indicator++; //Indikator hochzählen\n            break;\n        case 2:\n            LCDStatus[9] = highCounter;\n            LCDStatus[10] = lowCounter;            \n            node.send({payload:LCDStatus});\n            node.done();\n            indicator++; //Indikator hochzählen\n            break;\n        case 3:\n            StatusReport[9] = highCounter;\n            StatusReport[10] = lowCounter;\n            node.send({payload:StatusReport});\n            node.done();\n            indicator++; //Indikator zurücksetzen\n            break;\n    }\n\n    //Nachrichtenzähler hochzählen nachdem Nachricht gesendet wurde\n    lowCounter++;\n\n    //Sollte lowCounter > 255 sein (lowCounter > 0xFF), wird der highCounter erhöht und der lowCounter zurück auf 0 gesetzt\n    if (lowCounter > 255) {\n        highCounter++;\n        lowCounter = 0;\n    }\n    //Sollte highCounter > 255 sein (highCounter > 0xFF), wird auch der highCounter zurück auf 0 gesetzt\n    if (highCounter > 255) {\n        highCounter = 0;\n    }\n}, delay);","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":660,"wires":[["a4ce7172.89ca1","3ab68782.f99848","a861b82e.17c0b8"]]},{"id":"5f62ac67.66dd14","type":"inject","z":"89b9f172.e63fe","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3.2","crontab":"","once":true,"onceDelay":"0.1","topic":"","payload":"true","payloadType":"bool","x":110,"y":580,"wires":[["42bb9fad.e2d86"]]},{"id":"a4ce7172.89ca1","type":"debug","z":"89b9f172.e63fe","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":530,"y":620,"wires":[]},{"id":"3ab68782.f99848","type":"udp out","z":"89b9f172.e63fe","name":"GoProHero5black","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":650,"y":760,"wires":[]},{"id":"a358be1b.cf4f8","type":"function","z":"89b9f172.e63fe","name":"UDP_HeartBeat_sepp_merged_singel","func":"\nvar highCounterWait = flow.get(\"highCounterWait\")||0;\nvar lowCounterWait = flow.get(\"lowCounterWait\")||0;\nvar highCounterStatusReport = flow.get(\"highCounterStatusReport\")||0;\nvar lowCounterStatusReport = flow.get(\"lowCounterStatusReport\")||0;\nvar highCounterLCDStatus = flow.get(\"highCounterLCDStatus\")||0;\nvar lowCounterLCDStatus = flow.get(\"lowCounterLCDStatus\")||0;\nvar Wait = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x77, 0x74]);\nvar StatusReport = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x73, 0x74])\nvar LCDStatus = new Buffer ([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6C, 0x63, 0x05]);\nvar delay = 800;\n\n//count up Wait\n\nif (lowCounterWait >= 255)\n{highCounterWait++; lowCounterWait = 0;}\nif (highCounterWait >= 255) {highCounterWait = 0; lowCounterWait++;}\n\nlowCounterWait++;\n\nStatusReport[9] = highCounterWait;\nStatusReport[10] = lowCounterWait;\n\n\nflow.set(\"highCounterWait\",highCounterWait);\nflow.set(\"lowCounterWait\",lowCounterWait);\n\nsetTimeout(()=>{\nnode.send({payload:Wait});\nnode.done();\n}, delay);\n\n\n\n\n//count up StatusReport\n\nif (lowCounterStatusReport >= 255)\n{highCounterStatusReport++; lowCounterStatusReport = 0;}\nif (highCounterStatusReport >= 255) {highCounterStatusReport = 0; lowCounterStatusReport++;}\n\nlowCounterStatusReport++;\n\nStatusReport[9] = highCounterStatusReport;\nStatusReport[10] = lowCounterStatusReport;\n\n\nflow.set(\"highCounterStatusReport\",highCounterStatusReport);\nflow.set(\"lowCounterStatusReport\",lowCounterStatusReport);\n\nsetTimeout(()=>{\nnode.send({payload:StatusReport});\nnode.done();\n}, 2 * delay);\n\n\n\n//count up and send LCDStatus 2 times\n\nfor (var i = 0; i < 2; i++)\n{setTimeout(()=>\n{\nif (lowCounterLCDStatus >= 255)\n{highCounterLCDStatus++; lowCounterLCDStatus = 0;}\nif (highCounterLCDStatus >= 255) {highCounterLCDStatus = 0; lowCounterLCDStatus++;}\n\nlowCounterLCDStatus++;\n\nLCDStatus[9] = highCounterLCDStatus;\nLCDStatus[10] = lowCounterLCDStatus;\n\nvar NewLCDStatus = {payload:LCDStatus};\n\nnode.send(NewLCDStatus);\nnode.done();\n\nflow.set(\"highCounterLCDStatus\",highCounterLCDStatus);\nflow.set(\"lowCounterLCDStatus\",lowCounterLCDStatus);\n    \n}, 3 * delay + i * delay)};\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":900,"wires":[["d50ac62c.d85e18","dbbce4dd.89ee78"]]},{"id":"6004adf1.594074","type":"inject","z":"89b9f172.e63fe","d":true,"name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3.2","crontab":"","once":true,"onceDelay":"0","topic":"","payload":"true","payloadType":"bool","x":90,"y":820,"wires":[["a358be1b.cf4f8"]]},{"id":"d50ac62c.d85e18","type":"debug","z":"89b9f172.e63fe","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":510,"y":860,"wires":[]},{"id":"dbbce4dd.89ee78","type":"udp out","z":"89b9f172.e63fe","name":"GoProHero5black","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":630,"y":1000,"wires":[]},{"id":"a861b82e.17c0b8","type":"link out","z":"89b9f172.e63fe","name":"UDP_Heartbeat->DB_connectivity","mode":"link","links":["1315e90e.09bc97"],"x":585,"y":700,"wires":[]},{"id":"41da3390f80951b7","type":"comment","z":"89b9f172.e63fe","name":"des is a ","info":"","x":250,"y":580,"wires":[]},{"id":"565babb67fed3832","type":"inject","z":"fb013fe93cb41d30","name":"","props":[{"p":"payload"}],"repeat":"6","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":80,"wires":[["62746159d85e65b5"]]},{"id":"41649e89e9d80095","type":"comment","z":"fb013fe93cb41d30","name":"BLE_Heartbeat","info":"","x":140,"y":40,"wires":[]},{"id":"61752b4d9f525766","type":"mysql","z":"fb013fe93cb41d30","mydb":"230fd081.affe6","name":"","x":570,"y":160,"wires":[["58bd18d9694c7ded","322d8f0601f4dcde"]]},{"id":"58bd18d9694c7ded","type":"debug","z":"fb013fe93cb41d30","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":590,"y":220,"wires":[]},{"id":"322d8f0601f4dcde","type":"function","z":"fb013fe93cb41d30","name":"","func":"\nvar HW1 = msg.payload[0].HW1;\nvar HW2 = msg.payload[0].HW2;\nvar HW3 = msg.payload[0].HW3;\nvar HW4 = msg.payload[0].HW4;\nvar HW5 = msg.payload[0].HW5;\nvar HW6 = msg.payload[0].HW6;\nvar Separator = \"-\";\nvar BLE = msg.payload[0].BLE_HEX;\nvar Info = msg.payload[0].Info;\n\nmsg.handle = HW1 + HW2 + Separator + HW3 + Separator + HW4 + Separator + HW5 + Separator + HW6;\nmsg.command = BLE;\nmsg.payload = \" \" + \"'\" + msg.handle + \"'\" + \" \" + '\"' + \"'\" + msg.command + \"'\" + '\"';\nmsg.topic = 'Keep Alive';\n\n//msg.handle = msg.payload[0].HW1.concat(msg.payload[0].HW2)'-'msg.payload[0].HW3'-'msg.payload[0].HW4'-'msg.payload[0].HW5'-'msg.payload[0].HW6;\nreturn msg;\n\n//payload[0].HW1","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":160,"wires":[["2cc2f615245302cd","d7acff986b8b5e8e"]]},{"id":"2cc2f615245302cd","type":"debug","z":"fb013fe93cb41d30","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":750,"y":220,"wires":[]},{"id":"d7acff986b8b5e8e","type":"exec","z":"fb013fe93cb41d30","command":"timeout 5 /home/odroid/BLE_command.sh","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"BLE Command bluetoothctl","x":940,"y":160,"wires":[["fcbfff36abc6d52f"],["12cb176b2a84c499"],["899ed2cf1cee3462","6f499fb8d23beee5"]]},{"id":"fcbfff36abc6d52f","type":"debug","z":"fb013fe93cb41d30","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1170,"y":120,"wires":[]},{"id":"12cb176b2a84c499","type":"debug","z":"fb013fe93cb41d30","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1170,"y":160,"wires":[]},{"id":"899ed2cf1cee3462","type":"debug","z":"fb013fe93cb41d30","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1170,"y":200,"wires":[]},{"id":"a63b9d66484a559b","type":"function","z":"fb013fe93cb41d30","name":"SELECT Keep Alive","func":"msg.topic = \"SELECT BLE_HEX, HW1, HW2, HW3, HW4, HW5, HW6, Info FROM BLE WHERE UniqueID = 29\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":160,"wires":[["61752b4d9f525766"]]},{"id":"6f499fb8d23beee5","type":"link out","z":"fb013fe93cb41d30","name":"BLE_Heartbeat->DB_connectivity","mode":"link","links":["3107c338.6444ac"],"x":1135,"y":260,"wires":[]},{"id":"62746159d85e65b5","type":"switch","z":"fb013fe93cb41d30","name":"BLE_DeviceConnected","property":"BLE_DeviceConnected","propertyType":"global","rules":[{"t":"eq","v":"yes","vt":"str"},{"t":"eq","v":"no","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":150,"y":160,"wires":[["a63b9d66484a559b"],[]]},{"id":"4672e707.47a5f8","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":360,"wires":[["f921478b.d22178"]]},{"id":"b92fed1a.7c89","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_CLUTCH","links":["844284c6.d8c958"],"x":75,"y":360,"wires":[["dea918b1.712018","668f3c9e.6affa4"]]},{"id":"dea918b1.712018","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":440,"wires":[]},{"id":"668f3c9e.6affa4","type":"function","z":"a71d92ae.7639a","name":"Insert CLUTCH","func":"var onoff1 = msg.Signal1.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\nvar onoff2 = msg.Signal2.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\nconst reg = /\\.\\d{3}Z/;\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.timestamp = (new Date(msg.timestamp - offset)).toISOString().replace(\"T\", \" \").replace(reg, \"\");\n\nmsg.topic = \"INSERT INTO clutch(Timestamp_at_end, Signal1, Signal2, Timespan) VALUES( '\"+msg.timestamp+\"', '\"+onoff1+\"', '\"+onoff2+\"', '\"+msg.Timespan+\"' );\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":360,"wires":[["4672e707.47a5f8","d37e318b.ea619"]]},{"id":"d37e318b.ea619","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":440,"wires":[]},{"id":"f921478b.d22178","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":360,"wires":[]},{"id":"31fa38e7.ec2ee8","type":"mysql","z":"a71d92ae.7639a","mydb":"395f2a47.6cfaf6","name":"","x":570,"y":1800,"wires":[["e28cd4de.a80628"]]},{"id":"b49543d5.2ef48","type":"comment","z":"a71d92ae.7639a","name":"INSERT","info":"","x":110,"y":100,"wires":[]},{"id":"7590ddb1.667e34","type":"comment","z":"a71d92ae.7639a","name":"SELECT","info":"","x":100,"y":1720,"wires":[]},{"id":"1dd1b78a.ae42f8","type":"function","z":"a71d92ae.7639a","name":"SELECT PW0","func":"//var onoff1 = msg.Signal1.replace(\"1\", \"OFF\").replace(\"0\", \"ON\");\n//var onoff2 = msg.Signal2.replace(\"1\", \"OFF\").replace(\"0\", \"ON\");\n//const reg = /\\.\\d{3}Z/;\n\n//msg.timestamp = new Date(msg.Timestamp2).toISOString().replace(\"T\", \" \").replace(reg, \"\");\n//msg.topic = \"INSERT INTO clutch(Timestamp_at_end, Signal1, Signal2, Timespan) VALUES( '\"+msg.timestamp+\"', '\"+onoff1+\"', '\"+onoff2+\"', '\"+msg.Timespan+\"' );\";\nmsg.topic = \"SELECT `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Param1, Param2, DC FROM sepp89117 WHERE UniqueID = 16\";\nreturn msg;","outputs":1,"noerr":0,"x":320,"y":1800,"wires":[["31fa38e7.ec2ee8","b665934c.b6568"]]},{"id":"e619e57e.62e168","type":"inject","z":"a71d92ae.7639a","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":120,"y":1820,"wires":[["1dd1b78a.ae42f8"]]},{"id":"b665934c.b6568","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":520,"y":1880,"wires":[]},{"id":"e28cd4de.a80628","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":780,"y":1880,"wires":[]},{"id":"4d46fb18.4ae4f4","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":1120,"wires":[["dae0a606.cbc898"]]},{"id":"3c199cc1.ecbb94","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_BLE_reconnect","links":["33b67730.daa2a8","0e781052f3560396"],"x":75,"y":1120,"wires":[["61d8ce28.057f","3e1723e1c9e5d02e"]]},{"id":"61d8ce28.057f","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":1200,"wires":[]},{"id":"37f7d71.d29c428","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":1200,"wires":[]},{"id":"dae0a606.cbc898","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":1120,"wires":[]},{"id":"ee0d4e3c.6f4cb","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":560,"wires":[["baf27fa5.ec327"]]},{"id":"89ffb456.200978","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_Brake","links":["a1934b83.ac2d28"],"x":75,"y":560,"wires":[["6b66ba19.bd8094","99b59d6.fab236"]]},{"id":"6b66ba19.bd8094","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":640,"wires":[]},{"id":"99b59d6.fab236","type":"function","z":"a71d92ae.7639a","name":"Insert Brake","func":"var onoff1 = msg.Signal1.replace(\"1\", \"OFF\").replace(\"0\", \"ON\");\nvar onoff2 = msg.Signal2.replace(\"1\", \"OFF\").replace(\"0\", \"ON\");\nconst reg = /\\.\\d{3}Z/;\n\nmsg.timestamp = new Date(msg.Timestamp2).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = \"INSERT INTO brake(Timestamp_at_end, Signal1, Signal2, Timespan) VALUES( '\"+msg.timestamp+\"', '\"+onoff1+\"', '\"+onoff2+\"', '\"+msg.Timespan+\"' );\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":560,"wires":[["ee0d4e3c.6f4cb","61ba8007.2ceae"]]},{"id":"61ba8007.2ceae","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":640,"wires":[]},{"id":"baf27fa5.ec327","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":560,"wires":[]},{"id":"58d788840283593e","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":1320,"wires":[["9225cdff36e6bd01"]]},{"id":"c9f216694f74788a","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_GPS","links":["e1518f926f6f7eb2"],"x":75,"y":1320,"wires":[["38c0b889ab64cd90","6c25cd23921b5784"]]},{"id":"38c0b889ab64cd90","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":1400,"wires":[]},{"id":"6c25cd23921b5784","type":"function","z":"a71d92ae.7639a","name":"Insert GPS","func":"\n//const reg = /\\.\\d{3}Z/;\n\n//msg.timestamp = new Date(msg.payload).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = \"INSERT INTO GPS(Timestamp, Lat_DG, Long_DG) VALUES( '\"+msg.timestamp+\"', '\"+msg.Lat+\"', '\"+msg.Long+\"' );\";\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":1320,"wires":[["58d788840283593e","738de03e7b3efb4a"]]},{"id":"738de03e7b3efb4a","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":1400,"wires":[]},{"id":"9225cdff36e6bd01","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":1320,"wires":[]},{"id":"3e1723e1c9e5d02e","type":"function","z":"a71d92ae.7639a","name":"Insert BLE_reconnect","func":"\nconst reg = /\\.\\d{3}Z/;\n\nmsg.timestamp = new Date(msg.payload).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = \"INSERT INTO ble_reconnect(Timestamp, Counter) VALUES( '\"+msg.timestamp+\"', '\"+msg.counter+\"' );\";\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":1120,"wires":[["4d46fb18.4ae4f4","37f7d71.d29c428"]]},{"id":"6a6bf6f92d5ca03f","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":1500,"wires":[["a2c5863ea3b63a95"]]},{"id":"45257d0bc62128b9","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_AHRS","links":["c2385e8766c88819"],"x":75,"y":1500,"wires":[["a2ea967cec42ec3a","328c161d388b5837"]]},{"id":"a2ea967cec42ec3a","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":1580,"wires":[]},{"id":"328c161d388b5837","type":"function","z":"a71d92ae.7639a","name":"Insert AHRS","func":"\n//const reg = /\\.\\d{3}Z/;\n\n//msg.timestamp = new Date(msg.payload).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = \"INSERT INTO AHRS(Timestamp, roll, pitch, yaw, ax, ay, az, gx, gy, gz, mx, my, mz, temp) VALUES( '\"+msg.timestamp+\"', '\"+msg.roll+\"', '\"+msg.pitch+\"', '\"+msg.yaw+\"', '\"+msg.ax+\"', '\"+msg.ay+\"', '\"+msg.az+\"', '\"+msg.gx+\"', '\"+msg.gy+\"', '\"+msg.gz+\"', '\"+msg.mx+\"', '\"+msg.my+\"', '\"+msg.mz+\"', '\"+msg.temp+\"' );\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":1500,"wires":[["6a6bf6f92d5ca03f","bff6f1257ee57e4c"]]},{"id":"bff6f1257ee57e4c","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":1580,"wires":[]},{"id":"a2c5863ea3b63a95","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":1500,"wires":[]},{"id":"10c84c1d5a18a6fb","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":180,"wires":[["4a69b8809d224172"]]},{"id":"616a5d227d0d8ef5","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_Velocity","links":["69db7770298ddf02"],"x":75,"y":180,"wires":[["2a9260891b1c5700","c9412127711f76b6"]]},{"id":"2a9260891b1c5700","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":260,"wires":[]},{"id":"c9412127711f76b6","type":"function","z":"a71d92ae.7639a","name":"Insert VELOCITY","func":"//var onoff1 = msg.Signal1.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\n//var onoff2 = msg.Signal2.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\nconst reg = /\\.\\d{3}Z/;\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.timestamp = (new Date(msg.timestamp - offset)).toISOString().replace(\"T\", \" \").replace(reg, \"\");\n\nmsg.topic = \"INSERT INTO velocity(Timestamp, Speed) VALUES( '\"+msg.timestamp+\"', '\"+msg.speed+\"' );\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":180,"wires":[["10c84c1d5a18a6fb","96a8593562103fe9"]]},{"id":"96a8593562103fe9","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":430,"y":260,"wires":[]},{"id":"4a69b8809d224172","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":180,"wires":[]},{"id":"1cfef1ea2aca6402","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":760,"wires":[["88865f6a660d2eec"]]},{"id":"36d5dba87349797e","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_Velocity","links":["044afda276389a72"],"x":75,"y":760,"wires":[["2d7f3ca987cbad08","e183cb9d4b46f96e"]]},{"id":"2d7f3ca987cbad08","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":840,"wires":[]},{"id":"e183cb9d4b46f96e","type":"function","z":"a71d92ae.7639a","name":"Insert WISH","func":"//var onoff1 = msg.Signal1.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\n//var onoff2 = msg.Signal2.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\nconst reg = /\\.\\d{3}Z/;\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.timestamp = (new Date(msg.timestamp - offset)).toISOString().replace(\"T\", \" \").replace(reg, \"\");\n\nmsg.topic = \"INSERT INTO wish(Timestamp, Wish) VALUES( '\"+msg.timestamp+\"', '\"+msg.wish+\"' );\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":760,"wires":[["1cfef1ea2aca6402","34723d4dcf38083a"]]},{"id":"34723d4dcf38083a","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":840,"wires":[]},{"id":"88865f6a660d2eec","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":760,"wires":[]},{"id":"d0b416d46e6ad724","type":"mysql","z":"a71d92ae.7639a","mydb":"4b0eb527.16d5ec","name":"","x":520,"y":920,"wires":[["81e109e1d7da665c"]]},{"id":"13faf8da46ebcd22","type":"link in","z":"a71d92ae.7639a","name":"BlackBox_to_MySQL_insert_Ingnition","links":["f1af1d779606acf1"],"x":75,"y":920,"wires":[["65d5599502c85e20","1cea31c22f9c0a71"]]},{"id":"65d5599502c85e20","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":190,"y":1000,"wires":[]},{"id":"1cea31c22f9c0a71","type":"function","z":"a71d92ae.7639a","name":"Insert IGNITION","func":"//var onoff1 = msg.Signal1.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\n//var onoff2 = msg.Signal2.replace(\"1\", \"ON\").replace(\"0\", \"OFF\");\nconst reg = /\\.\\d{3}Z/;\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.timestamp = (new Date(msg.timestamp - offset)).toISOString().replace(\"T\", \" \").replace(reg, \"\");\n\nmsg.topic = \"INSERT INTO ignition(Timestamp, ignition) VALUES( '\"+msg.timestamp+\"', '\"+msg.payload+\"' );\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":920,"wires":[["d0b416d46e6ad724","8499f9c7d52bc5a8"]]},{"id":"8499f9c7d52bc5a8","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":1000,"wires":[]},{"id":"81e109e1d7da665c","type":"debug","z":"a71d92ae.7639a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":920,"wires":[]},{"id":"a87f056ae715c6e6","type":"bigtimer","z":"1ae5525ffad3fdda","outtopic":"","outpayload1":"","outpayload2":"","name":"Big Timer","comment":"","lat":"48.185340","lon":"13.304730","starttime":"60","endtime":"120","starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"","outtext2":"","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":1020,"y":400,"wires":[["e8ead6f76db03e36"],["0f5a3b44bb3d4421","fd93c3067b32f844","3ecb0cfbabebefa7"],["27e885cb836fb0c2"]]},{"id":"9f032682758c2984","type":"chronos-scheduler","z":"1ae5525ffad3fdda","name":"","config":"d097ac8344ca5755","schedule":[{"trigger":{"type":"sun","value":"nightEnd","offset":0,"random":false},"output":{"type":"msg","property":{"name":"payload","type":"str","value":""}}}],"multiPort":false,"nextEventPort":false,"disabled":false,"outputs":1,"x":200,"y":80,"wires":[[]]},{"id":"5f1cdf5fb6abad5a","type":"ui_text_input","z":"1ae5525ffad3fdda","name":"ON TIME","label":"ON TIME","tooltip":"","group":"611a0edaaf8618ed","order":1,"width":0,"height":0,"passthru":true,"mode":"time","delay":"50","topic":"payload","sendOnBlur":true,"className":"","topicType":"msg","x":280,"y":220,"wires":[["81cb28ae5211265d","3d14ea9930b71d81"]]},{"id":"3d14ea9930b71d81","type":"function","z":"1ae5525ffad3fdda","name":"BigTimer_ON_Time declaration","func":"global.set('BigTimer_ON_Time',msg.payload);\n\n\n//parse Timestamp\nconst reg1 = /\\S{10}T/;\nconst reg2= /:\\S{6}Z/;\n\n\nmsg.time = (new Date(msg.payload).toISOString()).replace(reg1, \"\").replace(reg2, \"\");\n\nmsg.payload = 'on_override ' + msg.time;\n\nreturn msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":220,"wires":[["a87f056ae715c6e6"]]},{"id":"cef5f1096f979e88","type":"link in","z":"1ae5525ffad3fdda","name":"DB_AutoSet->Global_Variable_Backup_BigTimer_ON_Time","links":["091d8b207b631689"],"x":95,"y":220,"wires":[["5f1cdf5fb6abad5a","0ef2ede5ae9f066a"]]},{"id":"90ac69cc0c0c8584","type":"ui_text_input","z":"1ae5525ffad3fdda","name":"OFF TIME","label":"OFF TIME","tooltip":"","group":"611a0edaaf8618ed","order":2,"width":0,"height":0,"passthru":true,"mode":"time","delay":"50","topic":"payload","sendOnBlur":true,"className":"","topicType":"msg","x":270,"y":300,"wires":[["143f5455f4c1f768","81cb28ae5211265d"]]},{"id":"143f5455f4c1f768","type":"function","z":"1ae5525ffad3fdda","name":"BigTimer_OFF_Time declaration","func":"global.set('BigTimer_OFF_Time',msg.payload);\n\n\n//parse Timestamp\nconst reg1 = /\\S{10}T/;\nconst reg2= /:\\S{6}Z/;\n\nmsg.time = (new Date(msg.payload).toISOString()).replace(reg1, \"\").replace(reg2, \"\");\n\nmsg.payload = 'off_override ' + msg.time\nreturn msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":300,"wires":[["a87f056ae715c6e6"]]},{"id":"81cb28ae5211265d","type":"ui_button","z":"1ae5525ffad3fdda","name":"","group":"611a0edaaf8618ed","order":3,"width":0,"height":0,"passthru":false,"label":"SYNC","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"sync","payloadType":"str","topic":"topic","topicType":"msg","x":490,"y":400,"wires":[["a87f056ae715c6e6"]]},{"id":"e8ead6f76db03e36","type":"debug","z":"1ae5525ffad3fdda","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1190,"y":240,"wires":[]},{"id":"0f5a3b44bb3d4421","type":"debug","z":"1ae5525ffad3fdda","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1190,"y":280,"wires":[]},{"id":"27e885cb836fb0c2","type":"debug","z":"1ae5525ffad3fdda","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1190,"y":320,"wires":[]},{"id":"fd93c3067b32f844","type":"ui_text","z":"1ae5525ffad3fdda","group":"611a0edaaf8618ed","order":4,"width":"5","height":"1","name":"","label":"Status","format":"{{msg.extState}}","layout":"row-spread","className":"","x":1190,"y":480,"wires":[]},{"id":"4092d95575141929","type":"ui_led","z":"1ae5525ffad3fdda","order":5,"group":"611a0edaaf8618ed","width":"1","height":"1","label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"1","valueType":"num"},{"color":"#ff0000","value":"0","valueType":"num"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"","x":1330,"y":400,"wires":[]},{"id":"3ecb0cfbabebefa7","type":"switch","z":"1ae5525ffad3fdda","name":"","property":"extState","propertyType":"msg","rules":[{"t":"cont","v":"On","vt":"str"},{"t":"cont","v":"Off","vt":"str"},{"t":"cont","v":"ON","vt":"str"},{"t":"cont","v":"OFF","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":1190,"y":400,"wires":[["4092d95575141929"],["4092d95575141929"],["4092d95575141929"],["4092d95575141929"]]},{"id":"f61bae2a41610efd","type":"ui_text_input","z":"1ae5525ffad3fdda","name":"","label":"","tooltip":"","group":"611a0edaaf8618ed","order":7,"width":"3","height":"1","passthru":true,"mode":"text","delay":300,"topic":"","sendOnBlur":true,"className":"","topicType":"str","x":1020,"y":700,"wires":[[]]},{"id":"e9957ea93fd2a931","type":"ui_slider","z":"1ae5525ffad3fdda","name":"","label":"Mode","tooltip":"","group":"611a0edaaf8618ed","order":6,"width":"3","height":"1","passthru":true,"outs":"end","topic":"topic","topicType":"msg","min":"1","max":"3","step":1,"className":"","x":290,"y":700,"wires":[["81cb28ae5211265d","03f23b6015097258"]]},{"id":"4c60f6433483e0d6","type":"change","z":"1ae5525ffad3fdda","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"default","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"2","fromt":"num","to":"auto","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"3","fromt":"num","to":"manual","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":700,"wires":[["a87f056ae715c6e6","f61bae2a41610efd"]]},{"id":"5f79d9f9a4f4981c","type":"link in","z":"1ae5525ffad3fdda","name":"DB_AutoSet->Global_Variable_Backup_BigTimer_OFF_Time","links":["d1f72aa77a7c9207"],"x":95,"y":300,"wires":[["90ac69cc0c0c8584","656e35206dd2f335"]]},{"id":"03f23b6015097258","type":"function","z":"1ae5525ffad3fdda","name":"BigTimer_Mode declaration","func":"global.set('BigTimer_Mode',msg.payload);\n\nreturn msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":700,"wires":[["4c60f6433483e0d6"]]},{"id":"abbe06f972e76250","type":"link in","z":"1ae5525ffad3fdda","name":"DB_AutoSet->Global_Variable_Backup_BigTimer_Mode","links":["876c7094e64e43aa"],"x":95,"y":700,"wires":[["e9957ea93fd2a931"]]},{"id":"782043043e0ca5aa","type":"link in","z":"1ae5525ffad3fdda","name":"DB_AutoSet->Global_Variable_Backup_BigTimer_Manual_ON","links":["d243992b52cda3da"],"x":95,"y":440,"wires":[["ed1822e8f3ca275e"]]},{"id":"1188147a65910edb","type":"link in","z":"1ae5525ffad3fdda","name":"DB_AutoSet->Global_Variable_Backup_BigTimer_Manual_OFF","links":["a39d09c292c4a825"],"x":95,"y":600,"wires":[["964cb33ffa08bccd"]]},{"id":"a692bd1771b3cd0b","type":"function","z":"1ae5525ffad3fdda","name":"BigTimer_Manual_ON declaration","func":"global.set('BigTimer_Manual_ON',msg.payload);\n\nreturn msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":480,"wires":[["a87f056ae715c6e6"]]},{"id":"bdd93867b8d5326d","type":"function","z":"1ae5525ffad3fdda","name":"BigTimer_Manual_OFF declaration","func":"global.set('BigTimer_Manual_OFF',msg.payload);\n\nreturn msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":560,"wires":[["a87f056ae715c6e6"]]},{"id":"ed1822e8f3ca275e","type":"ui_switch","z":"1ae5525ffad3fdda","name":"","label":"Manual ON","tooltip":"","group":"611a0edaaf8618ed","order":8,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"s1","topicType":"str","style":"","onvalue":"on","onvalueType":"str","onicon":"radio_button_checked","oncolor":"green","offvalue":"disabled","offvalueType":"str","officon":"radio_button_unchecked","offcolor":"green","animate":true,"className":"","x":270,"y":440,"wires":[["a692bd1771b3cd0b","81cb28ae5211265d","1b26b4fca3d653cb"]]},{"id":"964cb33ffa08bccd","type":"ui_switch","z":"1ae5525ffad3fdda","name":"","label":"Manual OFF","tooltip":"","group":"611a0edaaf8618ed","order":9,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"s2","topicType":"str","style":"","onvalue":"off","onvalueType":"str","onicon":"radio_button_checked","oncolor":"red","offvalue":"disabled","offvalueType":"str","officon":"radio_button_unchecked","offcolor":"red","animate":true,"className":"","x":270,"y":600,"wires":[["81cb28ae5211265d","bdd93867b8d5326d","1b26b4fca3d653cb"]]},{"id":"1b26b4fca3d653cb","type":"function","z":"1ae5525ffad3fdda","name":"","func":"var msg1={}; //switch 1 state\nvar msg2={}; //switch 2 state\n\n\n\nif(msg.topic==\"s1\")\n{\n    if (msg.payload==\"on\")\n    {\n        msg2.payload = \"disabled\"\n        return [null, msg2];\n    } \n}\n\nif(msg.topic==\"s2\")\n{\n    if (msg.payload==\"off\")\n    {\n    msg1.payload = \"disabled\"\n    return [msg1, null];\n    }\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":520,"wires":[["ed1822e8f3ca275e"],["964cb33ffa08bccd"]]},{"id":"0ef2ede5ae9f066a","type":"debug","z":"1ae5525ffad3fdda","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":280,"y":160,"wires":[]},{"id":"656e35206dd2f335","type":"debug","z":"1ae5525ffad3fdda","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":300,"y":380,"wires":[]},{"id":"3670b7a410525237","type":"inject","z":"1ae5525ffad3fdda","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Dawn","payloadType":"str","x":130,"y":1220,"wires":[["d216b1d4a8c573af"]]},{"id":"d216b1d4a8c573af","type":"ui_text_input","z":"1ae5525ffad3fdda","name":"ON TIME","label":"ON TIME","tooltip":"","group":"611a0edaaf8618ed","order":1,"width":0,"height":0,"passthru":true,"mode":"text","delay":"50","topic":"payload","sendOnBlur":true,"className":"","topicType":"msg","x":300,"y":1220,"wires":[[]]},{"id":"82e61596c5fc28ed","type":"debug","z":"1ae5525ffad3fdda","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":470,"y":780,"wires":[]},{"id":"d56fb43ab8fc37cf","type":"function","z":"1ae5525ffad3fdda","name":"","func":"\nmsg.payload = 'on_override ' + msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":820,"wires":[["a87f056ae715c6e6"]]},{"id":"39c7959270d170ac","type":"inject","z":"1ae5525ffad3fdda","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Dusk","payloadType":"str","x":110,"y":1140,"wires":[["2641d49bf6bab488"]]},{"id":"2641d49bf6bab488","type":"ui_text_input","z":"1ae5525ffad3fdda","name":"OFF TIME","label":"OFF TIME","tooltip":"","group":"611a0edaaf8618ed","order":1,"width":0,"height":0,"passthru":true,"mode":"text","delay":"50","topic":"payload","sendOnBlur":true,"className":"","topicType":"msg","x":290,"y":1140,"wires":[["993870880b03cf3e","f78962c1c1a67a49"]]},{"id":"993870880b03cf3e","type":"debug","z":"1ae5525ffad3fdda","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":560,"y":1220,"wires":[]},{"id":"f78962c1c1a67a49","type":"function","z":"1ae5525ffad3fdda","name":"","func":"\nmsg.payload = 'off_override ' + msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":1060,"wires":[["a87f056ae715c6e6"]]},{"id":"b24c030860f0574a","type":"ui_dropdown","z":"1ae5525ffad3fdda","name":"","label":"ON TIME","tooltip":"","place":"Special Time","group":"611a0edaaf8618ed","order":11,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"","value":"Dawn","type":"str"},{"label":"","value":"Dusk","type":"str"},{"label":"","value":"Sunrise","type":"str"},{"label":"","value":"Sunset","type":"str"},{"label":"","value":"Moonrise","type":"str"},{"label":"","value":"Moonset","type":"str"},{"label":"","value":"Night","type":"str"},{"label":"","value":"Nightend","type":"str"},{"label":"","value":"Solarnoon","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":280,"y":820,"wires":[["82e61596c5fc28ed","d56fb43ab8fc37cf"]]},{"id":"7e41279f7f7ad6cc","type":"debug","z":"1ae5525ffad3fdda","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":470,"y":880,"wires":[]},{"id":"ea81d8621cc81637","type":"function","z":"1ae5525ffad3fdda","name":"","func":"\nmsg.payload = 'off_override ' + msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":920,"wires":[["a87f056ae715c6e6"]]},{"id":"27d6b06451e17a64","type":"ui_dropdown","z":"1ae5525ffad3fdda","name":"","label":"OFF TIME","tooltip":"","place":"Special Time","group":"611a0edaaf8618ed","order":11,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"","value":"Dawn","type":"str"},{"label":"","value":"Dusk","type":"str"},{"label":"","value":"Sunrise","type":"str"},{"label":"","value":"Sunset","type":"str"},{"label":"","value":"Moonrise","type":"str"},{"label":"","value":"Moonset","type":"str"},{"label":"","value":"Night","type":"str"},{"label":"","value":"Nightend","type":"str"},{"label":"","value":"Solarnoon","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":290,"y":920,"wires":[["7e41279f7f7ad6cc","ea81d8621cc81637"]]},{"id":"d810a272.2ce32","type":"link in","z":"d3786684.caf558","name":"UDP_GoProOnline->DB-Connectivity","links":["361974a2.a6fe8c","e674fa56.5827c8","252acee6f195baed","4448c0b18c09cd22"],"x":215,"y":480,"wires":[["852ba70.cfdc558","13ab4bfd.cb8724"]]},{"id":"852ba70.cfdc558","type":"ui_text","z":"d3786684.caf558","group":"fb75f346.d7f78","order":2,"width":0,"height":0,"name":"UDP connected","label":"UDP connected","format":"{{msg.payload}}","layout":"row-spread","x":900,"y":480,"wires":[]},{"id":"13ab4bfd.cb8724","type":"ui_led","z":"d3786684.caf558","order":2,"group":"ad805b2f.308398","width":"1","height":"1","label":"","labelPlacement":"left","labelAlignment":"right","colorForValue":[{"color":"#ff0000","value":"GoProOffline","valueType":"str"},{"color":"#008000","value":"GoProOnline","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_UDP connected","x":920,"y":540,"wires":[]},{"id":"8590d124.137bc","type":"ping","z":"d3786684.caf558","protocol":"Automatic","mode":null,"name":"HERO-RC-800001","host":"10.71.79.1","timer":"3","inputs":0,"x":290,"y":720,"wires":[["e0f86a4f.221668"]]},{"id":"a7a40755.cd14d8","type":"ui_led","z":"d3786684.caf558","order":3,"group":"ad805b2f.308398","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"down","valueType":"str"},{"color":"#008000","value":"online","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_OdroidAP","x":900,"y":740,"wires":[]},{"id":"e3e977a3.5288a8","type":"ui_text","z":"d3786684.caf558","group":"fb75f346.d7f78","order":3,"width":0,"height":0,"name":"","label":"Odroid AccessPoint (ping)","format":"{{msg.topic}}","layout":"row-spread","x":930,"y":680,"wires":[]},{"id":"e0f86a4f.221668","type":"function","z":"d3786684.caf558","name":"","func":"msg.topic = msg.payload +' ms';\n  if (msg.payload > 0) {\n    msg.payload = 'online';\n  } else {\n    msg.payload = 'down';\n    msg.topic = msg.payload;\n  }\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":720,"wires":[["a7a40755.cd14d8","e3e977a3.5288a8"]]},{"id":"1315e90e.09bc97","type":"link in","z":"d3786684.caf558","name":"UDP_Heartbeat->DB_Connenctivity","links":["a861b82e.17c0b8"],"x":215,"y":200,"wires":[["bb4c6010.3831","5daf6247.21002c","49814b0c.ee06e4"]]},{"id":"ef3946ba.04ae18","type":"ui_led","z":"d3786684.caf558","order":1,"group":"ad805b2f.308398","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"down","valueType":"str"},{"color":"#fbf304","value":"on","valueType":"str"},{"color":"#9da49d","value":"0","valueType":"num"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_UDP Heartbeat","x":920,"y":340,"wires":[]},{"id":"4da0bc55.c49d24","type":"ui_text","z":"d3786684.caf558","group":"fb75f346.d7f78","order":1,"width":0,"height":0,"name":"UDP Heartbeat","label":"UDP Heartbeat","format":"{{msg.payload}}","layout":"row-spread","x":900,"y":200,"wires":[]},{"id":"5daf6247.21002c","type":"trigger","z":"d3786684.caf558","name":"Watchdog-Heartbeat","op1":"","op2":"down","op1type":"nul","op2type":"str","duration":"820","extend":true,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":420,"y":340,"wires":[["ef3946ba.04ae18","4da0bc55.c49d24"]],"info":"setze \n\"dann\" \"warten auf\" auf 3 x var:delay des Heartbeats für beste Ergebnisse (nicht kürzer sonst beginnt er zu flappen!)\n\nDieses WakeUp Gopro bewirkt:\n1.) Overruled sozusagen die \"Automatische Kammeraabschaltung\" der GoPro - Settings und\n2.) dedektiert und behebt Abrisse in der UDP Kommunikation zwischen Node-red und GoProHero5Black"},{"id":"bb4c6010.3831","type":"function","z":"d3786684.caf558","name":"Led on","func":"\nmsg.payload = 'on'; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":200,"wires":[["ef3946ba.04ae18","4da0bc55.c49d24"]]},{"id":"73f5e24c.e1970c","type":"function","z":"d3786684.caf558","name":"Led off","func":"msg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":260,"wires":[["ef3946ba.04ae18"]]},{"id":"49814b0c.ee06e4","type":"delay","z":"d3786684.caf558","name":"","pauseType":"delay","timeout":"1200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":420,"y":260,"wires":[["73f5e24c.e1970c"]]},{"id":"4d04c00.156254","type":"comment","z":"d3786684.caf558","name":"UDP (Smart Remote)","info":"","x":180,"y":120,"wires":[]},{"id":"f6e873b0.4694b","type":"comment","z":"d3786684.caf558","name":"HTTP (GoPro APP)","info":"","x":190,"y":840,"wires":[]},{"id":"1a5c1a7.1c9d9e6","type":"ui_led","z":"d3786684.caf558","order":3,"group":"22f841fd.fe797e","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"GoPro Down","valueType":"str"},{"color":"#008000","value":"GoPro Up","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_GoProAP","x":900,"y":1320,"wires":[]},{"id":"1e07a178.11b99f","type":"ui_text","z":"d3786684.caf558","group":"f5a966d8.d5c368","order":3,"width":0,"height":0,"name":"","label":"GoPro_AP (TCP)","format":"{{msg.topic}}","layout":"row-spread","className":"","x":910,"y":1260,"wires":[]},{"id":"9491a9aa.74ba18","type":"ping","z":"d3786684.caf558","protocol":"Automatic","mode":"timed","name":"Odroid_HTTPClient","host":"${Odroid_IP_from_GoProAP_DHCP}","timer":"5","inputs":0,"x":290,"y":1080,"wires":[["b929c0d5.c4c31","93c2fe7.c41d4"]]},{"id":"90e461ec.8db21","type":"ui_led","z":"d3786684.caf558","order":2,"group":"22f841fd.fe797e","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"down","valueType":"str"},{"color":"#008000","value":"online","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_Odroid HTTPClient","x":930,"y":1100,"wires":[]},{"id":"43733e8e.ca766","type":"ui_text","z":"d3786684.caf558","group":"f5a966d8.d5c368","order":2,"width":0,"height":0,"name":"","label":"Odroid_Client (TCP)","format":"{{msg.topic}}","layout":"row-spread","className":"","x":920,"y":1040,"wires":[]},{"id":"b929c0d5.c4c31","type":"function","z":"d3786684.caf558","name":"","func":"msg.topic = 'OdroidOnline';\n  if (msg.payload > 0) {\n    msg.payload = 'online';\n  } else {\n    msg.payload = 'down';\n    msg.topic = msg.payload;\n  }\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":1080,"wires":[["90e461ec.8db21","43733e8e.ca766"]]},{"id":"93c2fe7.c41d4","type":"debug","z":"d3786684.caf558","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":430,"y":1180,"wires":[]},{"id":"9fdf854a.bb7c98","type":"comment","z":"d3786684.caf558","name":"BLE (GoPro App)","info":"","x":180,"y":1700,"wires":[]},{"id":"ecb82265.b3833","type":"ui_text","z":"d3786684.caf558","d":true,"group":"7193ba64.490654","order":2,"width":0,"height":0,"name":"","label":"BLE connected","format":"{{msg.topic}}","layout":"row-spread","className":"","x":920,"y":2960,"wires":[]},{"id":"ef25c9cc.31f3b8","type":"function","z":"d3786684.caf558","d":true,"name":"","func":"\n  if (msg.status.text == \"generic-ble.status.disconnected\") {\n    msg.topic = 'GoPro disconnected';\n  } else \n  if (msg.status.text == \"generic-ble.status.connected\") {\n    msg.topic = 'GoPro connected';\n  } else \n  if (msg.status.text == 'generic-ble.status.connecting') {\n    msg.topic = 'GoPro connecting';\n  } else \n  if (msg.status.text == 'generic-ble.status.disconnecting') {\n    msg.topic = 'GoPro disconnecting';\n  } else \n  if (msg.status.text == 'generic-ble.status.missing') {\n    msg.topic = 'GoPro missing';\n  }\nmsg.payload = msg.topic\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":2960,"wires":[["9ee56321.dc991","ecb82265.b3833","66234f5b.e763c"]]},{"id":"9ee56321.dc991","type":"debug","z":"d3786684.caf558","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":770,"y":3040,"wires":[]},{"id":"ccc52554.62e3e8","type":"link in","z":"d3786684.caf558","name":"DB_Connectivity->WakeUp BLE_Status","links":["c748025e.3b26e","39b7041a02395c28"],"x":225,"y":2960,"wires":[["ef25c9cc.31f3b8"]]},{"id":"66234f5b.e763c","type":"ui_led","z":"d3786684.caf558","d":true,"order":2,"group":"3e4e30cc.ab175","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"GoPro missing","valueType":"str"},{"color":"#008000","value":"GoPro connected","valueType":"str"},{"color":"#000000","value":"GoPro disconnected","valueType":"str"},{"color":"#878787","value":"GoPro disconnecting","valueType":"str"},{"color":"#baf2ba","value":"GoPro connecting","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_GoPro BLE_connected","x":940,"y":2900,"wires":[]},{"id":"89e8a11c.5fd0c","type":"function","z":"d3786684.caf558","name":"","func":"\n  if (msg.status.text == \"common.status.disconnected\") {\n    msg.topic = 'GoPro Down';\n  } else \n  if (msg.status.text == \"common.status.connected\") {\n    msg.topic = 'GoPro Up';\n  } \n  \nmsg.payload = msg.topic\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":1300,"wires":[["1e07a178.11b99f","1a5c1a7.1c9d9e6","f3add184.9a58f","f9d44bec.94e2a8"]]},{"id":"f3add184.9a58f","type":"link out","z":"d3786684.caf558","name":"DB_Connectivity->WakeUp GoPro BLEsetWifion","links":[],"x":835,"y":1360,"wires":[]},{"id":"f9d44bec.94e2a8","type":"debug","z":"d3786684.caf558","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":740,"y":1440,"wires":[]},{"id":"a4bef44c.c585c8","type":"link in","z":"d3786684.caf558","name":"DB_Connectivity->WakeUp GoPro HTTP tcp Status","links":["10c80e5b.c623e2","266895e7.36ba8a","8a81287b.a72b78","2ee67e6b8c1e83cd"],"x":175,"y":1300,"wires":[["89e8a11c.5fd0c"]]},{"id":"c5038ab0.53a088","type":"ui_text","z":"d3786684.caf558","group":"7193ba64.490654","order":3,"width":0,"height":0,"name":"","label":"BLE active","format":"{{msg.topic}}","layout":"row-spread","className":"","x":850,"y":1820,"wires":[]},{"id":"3107c338.6444ac","type":"link in","z":"d3786684.caf558","name":"DB_Connectivity->BLE_Heartbeat","links":["6f499fb8d23beee5"],"x":155,"y":1820,"wires":[["e9cca6365c0e95af","d665d1683566905f","302dcd5221cb15ca"]]},{"id":"d8ba7acd.7321c8","type":"ui_led","z":"d3786684.caf558","order":3,"group":"3e4e30cc.ab175","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#9da49d","value":"off","valueType":"str"},{"color":"#fbf304","value":"on","valueType":"str"},{"color":"#ff0000","value":"down","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_GoPro BLE_active","x":890,"y":1900,"wires":[]},{"id":"e69dc1f7a5302b8a","type":"inject","z":"d3786684.caf558","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":280,"y":960,"wires":[["a1f421a45d41f2d7"]]},{"id":"a1f421a45d41f2d7","type":"function","z":"d3786684.caf558","name":"","func":"msg.payload = env.get ('Odroid_IP_from_GoProAP_DHCP')\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":960,"wires":[["ec5f990eab54dffb"]]},{"id":"ec5f990eab54dffb","type":"debug","z":"d3786684.caf558","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":800,"y":960,"wires":[]},{"id":"15783b7eb05c86cc","type":"ui_text","z":"d3786684.caf558","group":"7193ba64.490654","order":4,"width":0,"height":0,"name":"","label":"BLE paired (since)","format":"{{msg.topic}}","layout":"row-spread","className":"","x":930,"y":2160,"wires":[]},{"id":"37bb43f946d904df","type":"debug","z":"d3786684.caf558","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":2200,"wires":[]},{"id":"d501669af4e3bcc3","type":"link in","z":"d3786684.caf558","name":"DB_Connectivity->Global_Variable_Backup","links":["c048503838c1bb5a"],"x":155,"y":2180,"wires":[[]]},{"id":"19cdafc8af33e6fb","type":"ui_led","z":"d3786684.caf558","order":4,"group":"3e4e30cc.ab175","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"yes","valueType":"str"},{"color":"#ff0000","value":"no","valueType":"str"},{"color":"#808080","value":"null","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_GoPro BLE_paired","x":950,"y":2100,"wires":[]},{"id":"99de8617eafcb6ae","type":"function","z":"d3786684.caf558","name":"","func":"\nmsg.topic = global.get(\"BLE_PairingSuccessTimestamp\");\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":2160,"wires":[["15783b7eb05c86cc","37bb43f946d904df","19cdafc8af33e6fb"]]},{"id":"86663cc8173dba6f","type":"inject","z":"d3786684.caf558","name":"Inject BLE_DevicePaired","props":[{"p":"payload"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"BLE_DevicePaired","payloadType":"global","x":270,"y":2180,"wires":[["99de8617eafcb6ae"]]},{"id":"f5bef7655846554f","type":"ui_text","z":"d3786684.caf558","group":"7193ba64.490654","order":6,"width":0,"height":0,"name":"","label":"BLE connected (since)","format":"{{msg.topic}}","layout":"row-spread","className":"","x":920,"y":2600,"wires":[]},{"id":"b36d89e5ebe689ab","type":"ui_led","z":"d3786684.caf558","order":6,"group":"3e4e30cc.ab175","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"successful","valueType":"str"},{"color":"#ff0000","value":"no","valueType":"str"},{"color":"#008000","value":"yes","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_GoPro BLE_connected","x":940,"y":2540,"wires":[]},{"id":"ab9433e781952b4c","type":"debug","z":"d3786684.caf558","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":2640,"wires":[]},{"id":"3601d5f6e90fd0eb","type":"function","z":"d3786684.caf558","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":2580,"wires":[["ab9433e781952b4c","b36d89e5ebe689ab","f5bef7655846554f"]]},{"id":"eb858f2d01625607","type":"inject","z":"d3786684.caf558","name":"Inject BLE_DeviceConnected","props":[{"p":"payload"},{"p":"topic","v":"BLE_DeviceConnectedTimestamp","vt":"global"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"BLE_DeviceConnected","payloadType":"global","x":270,"y":2600,"wires":[["3601d5f6e90fd0eb"]]},{"id":"724b8465a0d86e19","type":"ui_text","z":"d3786684.caf558","group":"7193ba64.490654","order":5,"width":0,"height":0,"name":"","label":"BLE trusted (since)","format":"{{msg.topic}}","layout":"row-spread","className":"","x":910,"y":2380,"wires":[]},{"id":"e0388d6ee482917e","type":"ui_led","z":"d3786684.caf558","order":5,"group":"3e4e30cc.ab175","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"succeeded","valueType":"str"},{"color":"#ff0000","value":"no","valueType":"str"},{"color":"#008000","value":"yes","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"LED_GoPro BLE_trusted","x":930,"y":2320,"wires":[]},{"id":"d6f74ac8c717a8b2","type":"debug","z":"d3786684.caf558","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":2420,"wires":[]},{"id":"ac7a9f8e255e5244","type":"function","z":"d3786684.caf558","name":"","func":"\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":2380,"wires":[["d6f74ac8c717a8b2","e0388d6ee482917e","724b8465a0d86e19"]]},{"id":"68df2325b7691ee0","type":"inject","z":"d3786684.caf558","name":"Inject BLE_DeviceTrusted","props":[{"p":"payload"},{"p":"topic","v":"BLE_DeviceTrustedTimestamp","vt":"global"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"BLE_DeviceTrusted","payloadType":"global","x":260,"y":2400,"wires":[["ac7a9f8e255e5244"]]},{"id":"4632e9bd0154d804","type":"ui_button","z":"d3786684.caf558","name":"","group":"7193ba64.490654","order":8,"width":0,"height":0,"passthru":false,"label":"BLE Connect","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":190,"y":2760,"wires":[["7db3d15fd4afefb7"]]},{"id":"7db3d15fd4afefb7","type":"change","z":"d3786684.caf558","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":2760,"wires":[["c51b3d19f0477af1"]]},{"id":"c51b3d19f0477af1","type":"link out","z":"d3786684.caf558","name":"DB_Connectivity--> BLE_Connection_Bluetoothctl connect","mode":"link","links":["4ea62f1dea08b4bb","32c1500175f73a95"],"x":595,"y":2760,"wires":[]},{"id":"8e9620345cfbb7b1","type":"ui_button","z":"d3786684.caf558","name":"","group":"7193ba64.490654","order":9,"width":0,"height":0,"passthru":false,"label":"BLE Disconnect","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":200,"y":2820,"wires":[["e002644db88049f0"]]},{"id":"e002644db88049f0","type":"change","z":"d3786684.caf558","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":2820,"wires":[["9eb116a6b8b13106"]]},{"id":"9eb116a6b8b13106","type":"link out","z":"d3786684.caf558","name":"DB_Connectivity--> BLE_Connection_Bluetoothctl disconnect","mode":"link","links":["6e1aa8e336f7d0ea"],"x":595,"y":2820,"wires":[]},{"id":"fd5cfd3e12f465e0","type":"ui_button","z":"d3786684.caf558","name":"","group":"7193ba64.490654","order":7,"width":0,"height":0,"passthru":false,"label":"BLE Pair","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":180,"y":2700,"wires":[["d39c37b237427604"]]},{"id":"d39c37b237427604","type":"change","z":"d3786684.caf558","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":2700,"wires":[["1b70b9832d39b0e8"]]},{"id":"1b70b9832d39b0e8","type":"link out","z":"d3786684.caf558","name":"DB_Connectivity--> BLE_Connection_PairingProcess","mode":"link","links":["1ccab08185f3ad95"],"x":595,"y":2700,"wires":[]},{"id":"adfcbe81c482c35e","type":"ui_button","z":"d3786684.caf558","name":"","group":"7193ba64.490654","order":9,"width":0,"height":0,"passthru":false,"label":"BLE Wifi ON","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":190,"y":2880,"wires":[["e9d643b0afa6ce8e"]]},{"id":"e9d643b0afa6ce8e","type":"link out","z":"d3786684.caf558","name":"DB_Connectivity--> BLE_from_MySQL_WifiON","mode":"link","links":["4fc071f8f4099767"],"x":595,"y":2880,"wires":[]},{"id":"302dcd5221cb15ca","type":"trigger","z":"d3786684.caf558","name":"Watchdog-Heartbeat","op1":"","op2":"down","op1type":"nul","op2type":"str","duration":"6000","extend":true,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":380,"y":1960,"wires":[["d8ba7acd.7321c8","c5038ab0.53a088"]],"info":"setze \n\"dann\" \"warten auf\" auf 3 x var:delay des Heartbeats für beste Ergebnisse (nicht kürzer sonst beginnt er zu flappen!)\n\nDieses WakeUp Gopro bewirkt:\n1.) Overruled sozusagen die \"Automatische Kammeraabschaltung\" der GoPro - Settings und\n2.) dedektiert und behebt Abrisse in der UDP Kommunikation zwischen Node-red und GoProHero5Black"},{"id":"e9cca6365c0e95af","type":"function","z":"d3786684.caf558","name":"Led on","func":"\nmsg.payload = 'on'; \nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":1820,"wires":[["d8ba7acd.7321c8","c5038ab0.53a088"]]},{"id":"a2284f43c2db65b3","type":"function","z":"d3786684.caf558","name":"Led off","func":"msg.payload = 'off';\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":1880,"wires":[["d8ba7acd.7321c8"]]},{"id":"d665d1683566905f","type":"delay","z":"d3786684.caf558","name":"","pauseType":"delay","timeout":"1000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":380,"y":1880,"wires":[["a2284f43c2db65b3"]]},{"id":"12175058b6aec6a1","type":"link in","z":"d3786684.caf558","name":"DB_Connectivity_BLE_Paired-->BLE_Connection","links":["4f2fbe0762cc8384"],"x":155,"y":2120,"wires":[["99de8617eafcb6ae"]]},{"id":"9e1a7c42d7becd3b","type":"comment","z":"d3786684.caf558","name":"BLE_PairingSuccess und BLE_PairingSuccessTimestamp","info":"","x":350,"y":2080,"wires":[]},{"id":"82b8220e060e3430","type":"link in","z":"d3786684.caf558","name":"DB_Connectivity_BLE_trust-->BLE_Connection","links":["e5f46fb4b0a37e06"],"x":155,"y":2340,"wires":[["ac7a9f8e255e5244"]]},{"id":"df6968ac508a5b7d","type":"comment","z":"d3786684.caf558","name":"BLE_TrustSuccess und BLE_TrustSuccessTimestamp","info":"","x":340,"y":2300,"wires":[]},{"id":"fc0a2cf0aaeb3dac","type":"link in","z":"d3786684.caf558","name":"DB_Connectivity_BLE_connect-->BLE_Connection","links":[],"x":155,"y":2540,"wires":[["3601d5f6e90fd0eb"]]},{"id":"bf879f7d63f1c071","type":"comment","z":"d3786684.caf558","name":"BLE_ConnectSuccess und BLE_ConnectSuccessTimestamp","info":"","x":360,"y":2500,"wires":[]},{"id":"5ddeef9c8ca6f73d","type":"ui_led","z":"d3786684.caf558","order":3,"group":"22f841fd.fe797e","width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"not available","valueType":"str"},{"color":"#008000","value":"available and connected","valueType":"str"},{"color":"#ffff00","value":"available","valueType":"str"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":false,"name":"GoProAP","x":880,"y":1540,"wires":[]},{"id":"1033937cf7a76067","type":"ui_text","z":"d3786684.caf558","group":"f5a966d8.d5c368","order":4,"width":0,"height":0,"name":"","label":"GoPro_AP","format":"{{msg.topic}}","layout":"row-spread","className":"","x":870,"y":1480,"wires":[]},{"id":"155b728d04f0a9ab","type":"function","z":"d3786684.caf558","name":"","func":"msg.topic = global.get (\"GoPro_AP_Status\")\nmsg.payload = msg.topic\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":1520,"wires":[["1033937cf7a76067","5ddeef9c8ca6f73d","6a0c9cd6889a586b","338ac2bcf3396ff8"]]},{"id":"6a0c9cd6889a586b","type":"link out","z":"d3786684.caf558","name":"DB_Connectivity->WakeUp GoPro BLEsetWifion","links":[],"x":835,"y":1580,"wires":[]},{"id":"338ac2bcf3396ff8","type":"debug","z":"d3786684.caf558","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":740,"y":1660,"wires":[]},{"id":"b104d8b498fd6c0d","type":"inject","z":"d3786684.caf558","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":290,"y":1520,"wires":[["155b728d04f0a9ab"]]},{"id":"59f04859.656478","type":"ui_text_input","z":"c31f75c1.823298","name":"GeräteName (SSID)","label":"GeräteName (SSID)","tooltip":"","group":"43eeb9362523944e","order":1,"width":0,"height":0,"passthru":true,"mode":"text","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":320,"y":240,"wires":[["3e051b12.52fb24"]]},{"id":"3e051b12.52fb24","type":"function","z":"c31f75c1.823298","name":"DeviceName declaration","func":"global.set('DeviceName',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":240,"wires":[["95c9a2cb.8a9dd"]]},{"id":"95c9a2cb.8a9dd","type":"debug","z":"c31f75c1.823298","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1030,"y":240,"wires":[]},{"id":"1206971e.cd3a59","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DeviceName","links":["639a9d50.086244"],"x":95,"y":240,"wires":[["59f04859.656478"]]},{"id":"10dc739e7dce48d7","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DecDegMsg.Lat","links":["a7481f7.b0107e"],"x":115,"y":3020,"wires":[["311d06c405121f08"]]},{"id":"af8ed51a4a96b906","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DecDegMsg.Long","links":["6566100b.6370a"],"x":115,"y":3220,"wires":[["825371a71b604b92"]]},{"id":"5cc7f53f1d2a6f8b","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"Dezimalgrad_Lat","payloadType":"global","x":220,"y":2960,"wires":[["311d06c405121f08"]]},{"id":"5e97aa665631a21d","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"Dezimalgrad_Long","payloadType":"global","x":220,"y":3100,"wires":[["825371a71b604b92"]]},{"id":"6e06d07d5894ecce","type":"comment","z":"c31f75c1.823298","name":"GoPro - Connectivity","info":"","x":110,"y":160,"wires":[]},{"id":"b8d0df27086c3260","type":"comment","z":"c31f75c1.823298","name":"GPS","info":"","x":70,"y":1400,"wires":[]},{"id":"311d06c405121f08","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":12,"width":0,"height":0,"name":"","label":"Latitude","format":"{{msg.payload}}°","layout":"row-spread","x":460,"y":3020,"wires":[]},{"id":"825371a71b604b92","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":13,"width":0,"height":0,"name":"","label":"Longitude","format":"{{msg.payload}}°","layout":"row-spread","x":460,"y":3220,"wires":[]},{"id":"aed41b2adcaf89e4","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":11,"width":0,"height":0,"name":"","label":"DezimalGrad","format":"{{msg.payload}}","layout":"row-spread","x":150,"y":2880,"wires":[]},{"id":"b47db269d09e4d0a","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DegMinSec_Lat_Degree","links":["20bdd39245962387"],"x":115,"y":1980,"wires":[["eded59ba186e7c71"]]},{"id":"34a24617bd4916d2","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DegMinSec_Lat_Minutes","links":["df5aefe955974d25"],"x":115,"y":2120,"wires":[["4a43817fdf8793a1"]]},{"id":"0fadb966144f4adf","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"DegMinSec_Lat_Degree","payloadType":"global","x":220,"y":1920,"wires":[["eded59ba186e7c71"]]},{"id":"12dc5773b7bdca16","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"DegMinSec_Lat_Minutes","payloadType":"global","x":220,"y":2060,"wires":[["4a43817fdf8793a1"]]},{"id":"eded59ba186e7c71","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":5,"width":"3","height":1,"name":"DegMinSec_Lat_Degree","label":"Latitude","format":"{{msg.payload}}°","layout":"row-spread","className":"","x":510,"y":1980,"wires":[]},{"id":"4a43817fdf8793a1","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":6,"width":1,"height":1,"name":"DegMinSec_Lat_Minutes","label":"","format":"{{msg.payload}}'","layout":"row-center","className":"","x":510,"y":2120,"wires":[]},{"id":"51915c872d738ef4","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":4,"width":0,"height":0,"name":"","label":"Grad Minuten Sekunden","format":"{{msg.payload}}","layout":"row-spread","x":190,"y":1840,"wires":[]},{"id":"bf1231f10af93d6b","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DegMinSec_Lat_Seconds","links":["2a5b957da19aa5b3"],"x":115,"y":2260,"wires":[["405f513cafbdadb6"]]},{"id":"9b82ff8887be2571","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"DegMinSec_Lat_Seconds","payloadType":"global","x":220,"y":2200,"wires":[["405f513cafbdadb6"]]},{"id":"405f513cafbdadb6","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":10,"width":3,"height":1,"name":"DegMinSec_Lat_Seconds","label":"","format":"{{msg.payload}}''","layout":"row-left","className":"","x":510,"y":2260,"wires":[]},{"id":"8c8db49ba4f5522c","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DegMinSec_Long_Degree","links":["b0beab3cd4dfa0dc"],"x":115,"y":2400,"wires":[["dec216ea949f7fad"]]},{"id":"92cfe3d62548e833","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"DegMinSec_Long_Degree","payloadType":"global","x":220,"y":2340,"wires":[["dec216ea949f7fad"]]},{"id":"dec216ea949f7fad","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":8,"width":"3","height":1,"name":"DegMinSec_Long_Degree","label":"Longitude","format":"{{msg.payload}}°","layout":"row-spread","className":"","x":520,"y":2400,"wires":[]},{"id":"be3b73a07dd8f388","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DegMinSec_Long_Minutes","links":["e84cb9a144849b24"],"x":115,"y":2560,"wires":[["8e63754c7ae29526"]]},{"id":"303b8d55e5ac54df","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"DegMinSec_Long_Minutes","payloadType":"global","x":220,"y":2500,"wires":[["8e63754c7ae29526"]]},{"id":"8e63754c7ae29526","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":9,"width":1,"height":1,"name":"DegMinSec_Long_Minutes","label":"","format":"{{msg.payload}}'","layout":"row-center","className":"","x":520,"y":2560,"wires":[]},{"id":"e943c065fbcee004","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_DegMinSec_Long_Seconds","links":["a27059a91b257dc1"],"x":115,"y":2700,"wires":[["c9158c2c2ee00326"]]},{"id":"571b4b9f9d299913","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"DegMinSec_Long_Seconds","payloadType":"global","x":220,"y":2640,"wires":[["c9158c2c2ee00326"]]},{"id":"c9158c2c2ee00326","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":7,"width":3,"height":1,"name":"DegMinSec_Long_Seconds","label":"","format":"{{msg.payload}}''","layout":"row-left","className":"","x":520,"y":2700,"wires":[]},{"id":"2121fb6158213ea9","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_NMEA_Lat","links":["a65cb628105a1f6f"],"x":95,"y":1600,"wires":[["c740f8e45a1d79f9"]]},{"id":"b6292ab0f85ca8b1","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_NMEA_Long","links":["e1eb6b5ebeaed27c"],"x":95,"y":1740,"wires":[["b76736cbabd96789"]]},{"id":"d9ce8b48d6827e42","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"NMEA_Lat","payloadType":"global","x":200,"y":1540,"wires":[["c740f8e45a1d79f9"]]},{"id":"6b70c09159ec884e","type":"inject","z":"c31f75c1.823298","name":"Update from global variable","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"NMEA_Long","payloadType":"global","x":200,"y":1680,"wires":[["b76736cbabd96789"]]},{"id":"c740f8e45a1d79f9","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":2,"width":0,"height":0,"name":"","label":"Latitude","format":"{{msg.payload}}","layout":"row-spread","className":"","x":440,"y":1600,"wires":[]},{"id":"b76736cbabd96789","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":3,"width":0,"height":0,"name":"","label":"Longitude","format":"{{msg.payload}}","layout":"row-spread","className":"","x":440,"y":1740,"wires":[]},{"id":"bde6a9e732f0cdb3","type":"ui_text","z":"c31f75c1.823298","group":"2f80fea05ac68d06","order":1,"width":0,"height":0,"name":"","label":"NMEA (raw Data)","format":"{{msg.payload}}","layout":"row-spread","x":150,"y":1460,"wires":[]},{"id":"6938ecbcda94e945","type":"comment","z":"c31f75c1.823298","name":"Odroid - Connectivitiy","info":"","x":120,"y":620,"wires":[]},{"id":"4b04b894b2660fc9","type":"ui_text_input","z":"c31f75c1.823298","name":"Odroid-IP_from_GoProAP-DHCP","label":"Odroid-IP(wlan1) by GoProAP-DHCP (HTTP)","tooltip":"GoProAP - IP: 10.5.5.9 ","group":"43eeb9362523944e","order":3,"width":0,"height":0,"passthru":true,"mode":"text","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":360,"y":360,"wires":[["5c6ec18f7b92273e"]]},{"id":"5c6ec18f7b92273e","type":"function","z":"c31f75c1.823298","name":"Odroid_IP_from_GoProAP_DHCP declaration","func":"global.set('Odroid_IP_from_GoProAP_DHCP',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":360,"wires":[["cf3b6849f2ab50d5"]]},{"id":"cf3b6849f2ab50d5","type":"debug","z":"c31f75c1.823298","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1030,"y":360,"wires":[]},{"id":"28bf2222176037e4","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Odroid-IP_from_GoProAP-DHCP","links":["dd8532c3.a1061"],"x":95,"y":360,"wires":[["4b04b894b2660fc9"]]},{"id":"c8d44db9d4c3a90f","type":"ui_text_input","z":"c31f75c1.823298","name":"GoPro-IP_from_Odroid-DHCP","label":"GoPro-IP from Odroid-DHCP (wlan0) (UDP)","tooltip":"Odroid-DHCP-IP: 10.71.79.1 ","group":"c63c3171.75836","order":1,"width":0,"height":0,"passthru":true,"mode":"text","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":350,"y":700,"wires":[["3fe13c72b4028f78"]]},{"id":"3fe13c72b4028f78","type":"function","z":"c31f75c1.823298","name":"GoPro_IP_from_Odroid_DHCP declaration","func":"global.set('GoPro_IP_from_Odroid_DHCP',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":700,"wires":[["d33080901106f9b7"]]},{"id":"d33080901106f9b7","type":"debug","z":"c31f75c1.823298","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1030,"y":700,"wires":[]},{"id":"8f9e4080f30fe240","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->GoPro-IP_from_Odroid-DHCP","links":["2dd73717.36ac78"],"x":95,"y":700,"wires":[["c8d44db9d4c3a90f"]]},{"id":"0f7dc6b38c053be7","type":"ui_text","z":"c31f75c1.823298","group":"43eeb9362523944e","order":4,"width":0,"height":0,"name":"BLE_DeviceName","label":"BLE_DeviceName","format":"{{msg.payload}}","layout":"row-spread","className":"","x":310,"y":400,"wires":[]},{"id":"0773b01366e539c3","type":"link in","z":"c31f75c1.823298","name":"Global_Variable_Backup --> DB_Parameter_BLE_DeviceName","links":["95c19abc.16a1f8"],"x":95,"y":400,"wires":[["0f7dc6b38c053be7"]]},{"id":"efef0a99014d28ce","type":"ui_text","z":"c31f75c1.823298","group":"43eeb9362523944e","order":5,"width":0,"height":0,"name":"BLE_DeviceMAC","label":"BLE_DeviceMAC","format":"{{msg.payload}}","layout":"row-spread","className":"","x":310,"y":440,"wires":[]},{"id":"9de3b3cce5b4aa0f","type":"link in","z":"c31f75c1.823298","name":"Global_Variable_Backup --> DB_Parameter_BLE_DeviceMAC","links":["01118aa8440c158d"],"x":95,"y":440,"wires":[["efef0a99014d28ce"]]},{"id":"a80ed048f891a305","type":"ui_text_input","z":"c31f75c1.823298","name":"GeräteWifi_PWD (WPA2)","label":"GeräteWifi_PWD (WPA2)","tooltip":"","group":"43eeb9362523944e","order":2,"width":0,"height":0,"passthru":true,"mode":"password","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":330,"y":280,"wires":[["80afb3585672e263"]]},{"id":"80afb3585672e263","type":"function","z":"c31f75c1.823298","name":"DeviceWifi_PWD declaration","func":"global.set('DeviceWifi_PWD',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":280,"wires":[["7caafd0bd6bd4ecd"]]},{"id":"7caafd0bd6bd4ecd","type":"debug","z":"c31f75c1.823298","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1030,"y":280,"wires":[]},{"id":"20383df41e409076","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_Wifi_PWD","links":["7ba73f0deedb6e15"],"x":95,"y":280,"wires":[["a80ed048f891a305"]]},{"id":"adc3955c89d6ccc2","type":"function","z":"c31f75c1.823298","name":"BLE_DeviceName und BLE_DeviceMAC declaration from new devices","func":"\n\n\nconst before_DeviceName = /[\\s\\S]{11}/;\nconst before_DeviceMAC = /[\\s\\S]{24}/;\nconst after_DeviceName = /\\s:[\\s\\S]*/;\nconst after_DeviceMAC = /\\n/;\n\nBLE_DeviceName = msg.payload.replace(before_DeviceName, \"\").replace(after_DeviceName, \"\");\nBLE_DeviceMAC = msg.payload.replace(before_DeviceMAC, \"\").replace(after_DeviceMAC, \"\");\n\nmsg.payload = BLE_DeviceName;\nglobal.set('BLE_DeviceName',BLE_DeviceName);\nmsg.topic = BLE_DeviceMAC;\nglobal.set('BLE_DeviceMAC',BLE_DeviceMAC);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":500,"wires":[[]]},{"id":"0509d454252bb5d9","type":"comment","z":"c31f75c1.823298","name":"Date and Time","info":"","x":100,"y":820,"wires":[]},{"id":"5494b55b992768c5","type":"ui_text","z":"c31f75c1.823298","group":"582c96de511bcea0","order":1,"width":0,"height":0,"name":"","label":"GoPro Date","format":"{{msg.payload}}","layout":"row-spread","className":"","x":610,"y":960,"wires":[]},{"id":"18c4566a23aba313","type":"ui_text","z":"c31f75c1.823298","group":"582c96de511bcea0","order":2,"width":0,"height":0,"name":"","label":"GoPro Time","format":"{{msg.payload}}","layout":"row-spread","className":"","x":610,"y":1020,"wires":[]},{"id":"8776ea74d345c959","type":"function","z":"c31f75c1.823298","name":"parsing GoPro Date","func":"\nmsg.payload = global.get('GoPro_UDP_datetime_day') + \". \" + global.get('GoPro_UDP_datetime_month') + \". \" + global.get('GoPro_UDP_datetime_year');\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":960,"wires":[["5494b55b992768c5"]]},{"id":"01a0cf3e593982cc","type":"inject","z":"c31f75c1.823298","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"1","topic":"","payloadType":"date","x":170,"y":960,"wires":[["8776ea74d345c959"]]},{"id":"4d95a7db378549d9","type":"function","z":"c31f75c1.823298","name":"parsing GoPro Time","func":"\nmsg.payload = global.get('GoPro_UDP_datetime_hour') + \" : \" + global.get('GoPro_UDP_datetime_minute') + \" : \" + global.get('GoPro_UDP_datetime_second');\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":1020,"wires":[["18c4566a23aba313"]]},{"id":"6fb93d790417449b","type":"inject","z":"c31f75c1.823298","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"1","topic":"","payloadType":"date","x":170,"y":1020,"wires":[["4d95a7db378549d9"]]},{"id":"5ed4f746bcf8abcd","type":"ui_text","z":"c31f75c1.823298","group":"582c96de511bcea0","order":3,"width":0,"height":0,"name":"","label":"Odroid Timestamp","format":"{{msg.payload}}","layout":"row-spread","className":"","x":630,"y":900,"wires":[]},{"id":"03877a26b29cf2c4","type":"function","z":"c31f75c1.823298","name":"parsing GoPro Date","func":"\n\n//parse Timestamp\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\nconst reg1 = /-/g;\nconst reg2 = /:/g;\nconst reg3= /\\.\\d{3}Z/;\n\nmsg.timestamp = ((new Date(Date.now() - offset)).toISOString()).replace(reg1, \". \").replace(\"T\", \" - \").replace(reg2, \" : \").replace(reg3, \"\");\n//msg.timestamp = msg.timestamp.split(\" \");\n\n\n\nmsg.payload = msg.timestamp\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":900,"wires":[["5ed4f746bcf8abcd"]]},{"id":"8995c61560ceaea6","type":"inject","z":"c31f75c1.823298","name":"","props":[{"p":"payload"}],"repeat":"1","crontab":"","once":true,"onceDelay":"1","topic":"","payloadType":"date","x":170,"y":900,"wires":[["03877a26b29cf2c4"]]},{"id":"69e5c862b31d46a9","type":"ui_button","z":"c31f75c1.823298","name":"","group":"582c96de511bcea0","order":4,"width":0,"height":0,"passthru":false,"label":"Manual Sync","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":150,"y":1120,"wires":[["80519dd4cf5f3b7f"]]},{"id":"80519dd4cf5f3b7f","type":"change","z":"c31f75c1.823298","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1120,"wires":[["bac441912b83de28","981e999fcd97db9b"]]},{"id":"bac441912b83de28","type":"link out","z":"c31f75c1.823298","name":"DB_Parameter --> UDP_from_MySQL_Date_time_SET","mode":"link","links":["56596fca2165d8da"],"x":775,"y":1120,"wires":[]},{"id":"5c9e0970602249d3","type":"link out","z":"c31f75c1.823298","name":"DB_Parameter --> UDP_from_MySQL_Date_time_GET","mode":"link","links":["1bb0c03f5f2a11e2"],"x":775,"y":1200,"wires":[]},{"id":"981e999fcd97db9b","type":"delay","z":"c31f75c1.823298","name":"","pauseType":"delay","timeout":"0.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":520,"y":1180,"wires":[["5c9e0970602249d3"]]},{"id":"a280813118f16c4e","type":"ui_button","z":"c31f75c1.823298","name":"","group":"582c96de511bcea0","order":5,"width":0,"height":0,"passthru":false,"label":"Refresh","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"topic","topicType":"msg","x":140,"y":1260,"wires":[["0f6616c5205d799c"]]},{"id":"0f6616c5205d799c","type":"change","z":"c31f75c1.823298","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1260,"wires":[["5c9e0970602249d3"]]},{"id":"32fe30d7d382582c","type":"comment","z":"c31f75c1.823298","name":"Tacho","info":"","x":70,"y":3340,"wires":[]},{"id":"b54335bac82e0254","type":"ui_text_input","z":"c31f75c1.823298","name":"Tacho Frequenzlimit","label":"Tacho Frequency Limit (ms)","tooltip":"minimaler Abstand gültiger Tacho - Ticks","group":"8e256a02493c1822","order":1,"width":0,"height":0,"passthru":true,"mode":"number","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":320,"y":3420,"wires":[["fbc5dbf504347dfe"]]},{"id":"7ae6cabdb03d9135","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_TachoLimitFreq","links":["2bf6b059a44f68e7"],"x":95,"y":3420,"wires":[["b54335bac82e0254"]]},{"id":"fbc5dbf504347dfe","type":"function","z":"c31f75c1.823298","name":"TachoLimitFreq declaration","func":"global.set('TachoLimitFreq',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3420,"wires":[[]]},{"id":"23a5299d35ec2e83","type":"ui_text_input","z":"c31f75c1.823298","name":"Tacho Sample Rate","label":"Tacho Sample Rate (ms)","tooltip":"Abtastfrequenz der Geschwindigkeit (Restart NodeRed!)","group":"8e256a02493c1822","order":2,"width":0,"height":0,"passthru":true,"mode":"number","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":310,"y":3500,"wires":[["d5fb8f25b8e299b3"]]},{"id":"8565398c18600180","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_TachoSampleRate","links":["e55b425fae4c3db4"],"x":95,"y":3500,"wires":[["23a5299d35ec2e83"]]},{"id":"d5fb8f25b8e299b3","type":"function","z":"c31f75c1.823298","name":"TachoSampleRate declaration","func":"global.set('TachoSampleRate',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":3500,"wires":[[]]},{"id":"7f46a6b3131e0dc2","type":"ui_gauge","z":"c31f75c1.823298","name":"Velocity","group":"8e256a02493c1822","order":3,"width":0,"height":0,"gtype":"gage","title":"Velocity","label":"km/h","format":"{{msg.speed}}","min":0,"max":"230","colors":["#00b500","#e6e600","#ca3838"],"seg1":"60","seg2":"130","className":"","x":280,"y":3580,"wires":[]},{"id":"5cda5648b888f4c2","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter-->Tachosignal","links":["69db7770298ddf02"],"x":95,"y":3580,"wires":[["7f46a6b3131e0dc2"]]},{"id":"a044aecba50eabc2","type":"comment","z":"c31f75c1.823298","name":"Wish","info":"","x":70,"y":3700,"wires":[]},{"id":"7a9952f6136884a7","type":"ui_text_input","z":"c31f75c1.823298","name":"Throttle - Treshold Zero","label":"Throttle - Treshold Zero (value)","tooltip":"alles unter diesem Wert wird als 0-Position interpretiert","group":"3407add49c3a0bc6","order":3,"width":0,"height":0,"passthru":true,"mode":"number","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":330,"y":3940,"wires":[["da66bd7e1eba1724"]]},{"id":"4c1e21d3e481e1e4","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_ThrottleTresholdZero","links":["6fb067314de6aa0a"],"x":95,"y":3940,"wires":[["7a9952f6136884a7"]]},{"id":"da66bd7e1eba1724","type":"function","z":"c31f75c1.823298","name":"ThrottleTresholdZero declaration","func":"global.set('ThrottleTresholdZero',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":3940,"wires":[[]]},{"id":"59b4361568637eb4","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_ThrottleTresholdFull","links":["0d5b935c5d6cf3c5"],"x":95,"y":4020,"wires":[["5da61fe0d42d86a1"]]},{"id":"fd17969823d60150","type":"function","z":"c31f75c1.823298","name":"ThrottleTresholdFull declaration","func":"global.set('ThrottleTresholdFull',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":4020,"wires":[[]]},{"id":"5da61fe0d42d86a1","type":"ui_text_input","z":"c31f75c1.823298","name":"Throttle - Treshold Full","label":"Throttle - Treshold Full (value)","tooltip":"alles über diesem Wert wird als Vollgas-Position interpretiert","group":"3407add49c3a0bc6","order":4,"width":0,"height":0,"passthru":true,"mode":"number","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":320,"y":4020,"wires":[["fd17969823d60150"]]},{"id":"db9e1873a2b62231","type":"ui_text_input","z":"c31f75c1.823298","name":"Throttle - Sample Rate","label":"Throttle - Sample Rate (ms)","tooltip":"Abtastfrequenz vom Wish (Restart NodeRed!)","group":"3407add49c3a0bc6","order":1,"width":0,"height":0,"passthru":true,"mode":"number","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":320,"y":3780,"wires":[["ec42a03c19e8805d"]]},{"id":"ec42a03c19e8805d","type":"function","z":"c31f75c1.823298","name":"ThrottleSampleRate declaration","func":"global.set('ThrottleSampleRate',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":3780,"wires":[[]]},{"id":"b9ec0b7d6caa6de0","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_ThrottleSampleRate","links":["f0feaf5085f2b18f"],"x":95,"y":3780,"wires":[["db9e1873a2b62231"]]},{"id":"beac6986304599e0","type":"ui_text_input","z":"c31f75c1.823298","name":"Throttle - Mean Pool","label":"Throttle - Mean Pool (size)","tooltip":"Anzahl der Wish-Samples für Mittelwert","group":"3407add49c3a0bc6","order":2,"width":0,"height":0,"passthru":true,"mode":"number","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":320,"y":3860,"wires":[["d6a9f7951543b970"]]},{"id":"d6a9f7951543b970","type":"function","z":"c31f75c1.823298","name":"ThrottleMeanPool declaration","func":"global.set('ThrottleMeanPool',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3860,"wires":[[]]},{"id":"9a93be396ff9fd4e","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_ThrottleMeanPool","links":["5472c676fe192b95"],"x":95,"y":3860,"wires":[["beac6986304599e0"]]},{"id":"3f04706fcd513b18","type":"function","z":"c31f75c1.823298","name":"ThrottleRoundto declaration","func":"global.set('ThrottleRoundto',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":4100,"wires":[[]]},{"id":"b5448d2b9e0d73ab","type":"ui_text_input","z":"c31f75c1.823298","name":"Throttle - Round to","label":"Throttle - Round to (No. of decimals)","tooltip":"Wish - Anzahl der Kommastellen (%) (2 max.)","group":"3407add49c3a0bc6","order":5,"width":0,"height":0,"passthru":true,"mode":"number","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":310,"y":4100,"wires":[["3f04706fcd513b18"]]},{"id":"a520f815dde078aa","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Global_Variable_Backup_ThrottleRoundto","links":["d0c9175a73a64b64"],"x":95,"y":4100,"wires":[["b5448d2b9e0d73ab"]]},{"id":"0b9bebbcdc75f508","type":"ui_gauge","z":"c31f75c1.823298","name":"Wish","group":"3407add49c3a0bc6","order":6,"width":0,"height":0,"gtype":"donut","title":"Wish","label":"%","format":"{{msg.wish}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"33","seg2":"66","className":"","x":270,"y":4180,"wires":[]},{"id":"63e06f37f1767389","type":"link in","z":"c31f75c1.823298","name":"DB_Settings_Parameter->Wish","links":["044afda276389a72"],"x":95,"y":4180,"wires":[["0b9bebbcdc75f508"]]},{"id":"b54ddabf.fec0f8","type":"ui_numeric","z":"9004c20f.8cb68","name":"OnClutchLimit","label":"OnClutchLimit (sec)","tooltip":"max. On Clutch Time (sec) before Tag","group":"a3598685.c656f8","order":1,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"OnClutchLimit","topicType":"str","format":"{{value}}","min":0,"max":"20","step":"0.1","className":"","x":340,"y":40,"wires":[["9888120e.2d7ec"]]},{"id":"9888120e.2d7ec","type":"function","z":"9004c20f.8cb68","name":"OnClutchLimit declaration","func":"global.set('OnClutchLimit',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":40,"wires":[["26323a1e.29f506"]]},{"id":"26323a1e.29f506","type":"debug","z":"9004c20f.8cb68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":40,"wires":[]},{"id":"90235181.1bd48","type":"link in","z":"9004c20f.8cb68","name":"DB_TagSettings .--> OnClutchLimit","links":["fa6f14b5.9e8898"],"x":95,"y":40,"wires":[["b54ddabf.fec0f8"]]},{"id":"6663fd6c.8d5544","type":"ui_numeric","z":"9004c20f.8cb68","name":"OnBrakeLimit","label":"OnBrakeLimit (sec)","tooltip":"max. On Brake Time (sec) before Tag","group":"a3598685.c656f8","order":2,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"OnBrakeLimit","topicType":"str","format":"{{value}}","min":0,"max":"20","step":"0.1","x":340,"y":100,"wires":[["e7d5bd52.ee961"]]},{"id":"e7d5bd52.ee961","type":"function","z":"9004c20f.8cb68","name":"OnBrakeLimit declaration","func":"global.set('OnBrakeLimit',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":100,"wires":[["e4dd68ca.f1f2b8"]]},{"id":"e4dd68ca.f1f2b8","type":"debug","z":"9004c20f.8cb68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":100,"wires":[]},{"id":"cabbed93.9bb77","type":"link in","z":"9004c20f.8cb68","name":"DB_TagSettings - OnBrakeLimit","links":["441c4e8e.0d9c9"],"x":95,"y":100,"wires":[["6663fd6c.8d5544"]]},{"id":"b208c9ddf8030432","type":"udp out","z":"9004c20f.8cb68","name":"GoProHero5black send","addr":"${GoPro_IP_from_Odroid_DHCP}","iface":"","port":"8484","ipv":"udp4","outport":"8383","base64":false,"multicast":"false","x":850,"y":240,"wires":[]},{"id":"c8891a6f6e7f08e8","type":"debug","z":"9004c20f.8cb68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":810,"y":200,"wires":[]},{"id":"722f27aebde948b4","type":"function","z":"9004c20f.8cb68","name":"YY_SuperView","func":"\nvar highCounter_YY = flow.get(\"highCounter_YY\")||0;\nvar lowCounter_YY = flow.get(\"lowCounter_YY\")||0;\n//highCounter_YY = 0;\n//lowCounter_YY = 0;\n\n//count up\nif (lowCounter_YY >= 255)\n{highCounter_YY++; lowCounter_YY = 0;}\nif (highCounter_YY >= 255) {highCounter_YY = 0; lowCounter_YY++;}\n\nlowCounter_YY++;\n\nmsg.payload = new Buffer([msg.payload[0][\"0\"], msg.payload[0][\"1\"], msg.payload[0][\"2\"], msg.payload[0][\"3\"], msg.payload[0][\"4\"], msg.payload[0][\"5\"], msg.payload[0][\"6\"], msg.payload[0][\"7\"], msg.payload[0].Flag, msg.payload[0].HC, msg.payload[0].LC, msg.payload[0].Y1, msg.payload[0].Y2, msg.payload[0].DC, msg.payload[0][\"14\"], msg.payload[0][\"15\"], msg.payload[0][\"16\"], msg.payload[0][\"17\"], msg.payload[0][\"18\"], msg.payload[0][\"19\"], msg.payload[0][\"20\"]]);\nmsg.payload[9] = highCounter_YY;\nmsg.payload[10] = lowCounter_YY;\n\n\nflow.set(\"highCounter_YY\",highCounter_YY);\nflow.set(\"lowCounter_YY\",lowCounter_YY);\n\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":240,"wires":[["b208c9ddf8030432","c8891a6f6e7f08e8"]]},{"id":"736c7644de99c4e8","type":"comment","z":"2c60e581ebb81688","name":"GoPro Setting","info":"","x":90,"y":20,"wires":[]},{"id":"d856ad2ee00fbe28","type":"ui_dropdown","z":"2c60e581ebb81688","name":"MAIN MODE","label":"<b>MAIN MODE</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":28,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1030,"y":1680,"wires":[["32f9fc534ab638ec","b5d15a44676b3d79"]]},{"id":"5fed1e04b12a430f","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1680,"wires":[["13c33123c6e9c8df","c29ce1d46c8b46a8"]]},{"id":"1cd9331d4d417d53","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1 AND UniqueID < 8\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1680,"wires":[["5fed1e04b12a430f"]]},{"id":"fc89c2cd457ca72c","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1680,"wires":[["1cd9331d4d417d53"]]},{"id":"13c33123c6e9c8df","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":1740,"wires":[]},{"id":"32f9fc534ab638ec","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1150,"y":1740,"wires":[]},{"id":"8f7f39b1d5544f69","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1680,"wires":[["d856ad2ee00fbe28"]]},{"id":"e528257564adfc10","type":"ui_dropdown","z":"2c60e581ebb81688","name":"SUB MODE","label":"<b>SUB MODE</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":30,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1030,"y":1800,"wires":[["d61201e622c53926","a8bb4d66d9b94c7c"]]},{"id":"753c1592bcc6e5fb","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1800,"wires":[["9711382a0108de10","51cc24b48c8426cb"]]},{"id":"fdd14c1091c09a63","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID < 19 AND UniqueID > 8\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1800,"wires":[["753c1592bcc6e5fb"]]},{"id":"eb662693bed932d5","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1800,"wires":[["fdd14c1091c09a63"]]},{"id":"9711382a0108de10","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":1860,"wires":[]},{"id":"d61201e622c53926","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":1880,"wires":[]},{"id":"4d2ebd6e5ab6479d","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1800,"wires":[["e528257564adfc10"]]},{"id":"333bf2090da2d451","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO DEFAULT SUB MODE","label":"<b>VIDEO DEFAULT SUB MODE</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":34,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":1980,"wires":[["db1fd496df8ffc89","a41fdd29be51800c"]]},{"id":"bb969d72fbc0303a","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1980,"wires":[["0be3c92ad6b024b3","38ace8347cd4c61c"]]},{"id":"703275fc712eea19","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 19 AND UniqueID < 24\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1980,"wires":[["bb969d72fbc0303a"]]},{"id":"aa5bd074f7af4edf","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1980,"wires":[["703275fc712eea19"]]},{"id":"0be3c92ad6b024b3","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2040,"wires":[]},{"id":"db1fd496df8ffc89","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2040,"wires":[]},{"id":"b5a91464f35accf4","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1980,"wires":[["333bf2090da2d451"]]},{"id":"8baf211d7fe93723","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO MODE 4k","label":"<b>VIDEO MODE 4k</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":36,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":2100,"wires":[["1b95e2682472dd19","c1e04f3c8a359865"]]},{"id":"c5908438552156a6","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2100,"wires":[["7015f90087ed1fef","9f6f48e527952881"]]},{"id":"d7217614a0016dc9","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 24 AND UniqueID < 142\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2100,"wires":[["c5908438552156a6"]]},{"id":"8bee64548278ae6f","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2100,"wires":[["d7217614a0016dc9"]]},{"id":"7015f90087ed1fef","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2160,"wires":[]},{"id":"1b95e2682472dd19","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2160,"wires":[]},{"id":"d39871ac58e85a24","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2100,"wires":[["8baf211d7fe93723"]]},{"id":"5873dd547121fa85","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO MODE 2k","label":"<b>VIDEO MODE 2k</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":38,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":2220,"wires":[["0b3565fccbecf35a","967b8b431566bca5"]]},{"id":"2c591e124b4dcdba","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2220,"wires":[["d4e03a3d456c38ba","67b9d85070374db4"]]},{"id":"f2d5ecbf9ef29a6d","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 141 AND UniqueID < 324\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2220,"wires":[["2c591e124b4dcdba"]]},{"id":"b77f9b78b9656445","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2220,"wires":[["f2d5ecbf9ef29a6d"]]},{"id":"d4e03a3d456c38ba","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2280,"wires":[]},{"id":"0b3565fccbecf35a","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2280,"wires":[]},{"id":"ec72bceecf7ea71c","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2220,"wires":[["5873dd547121fa85"]]},{"id":"b07de874db8210b7","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO MODE 1440","label":"<b>VIDEO MODE 1440</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":40,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1060,"y":2340,"wires":[["e5aed78d9a8ff082","1fc55afa111ba11f"]]},{"id":"f7359ac9d64de5ca","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2340,"wires":[["c80f469aa08a5c1d","eb383d930d144ab2"]]},{"id":"42a0e5b1c0085654","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 323 AND UniqueID < 389\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2340,"wires":[["f7359ac9d64de5ca"]]},{"id":"5c998e33f9683a6e","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2340,"wires":[["42a0e5b1c0085654"]]},{"id":"c80f469aa08a5c1d","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2400,"wires":[]},{"id":"e5aed78d9a8ff082","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2400,"wires":[]},{"id":"fa2b894a174898ea","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2340,"wires":[["b07de874db8210b7"]]},{"id":"c29ce1d46c8b46a8","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{30}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1680,"wires":[["8f7f39b1d5544f69"]]},{"id":"51cc24b48c8426cb","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{29}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1800,"wires":[["4d2ebd6e5ab6479d"]]},{"id":"38ace8347cd4c61c","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{31}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1980,"wires":[["b5a91464f35accf4"]]},{"id":"9f6f48e527952881","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{23}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2100,"wires":[["d39871ac58e85a24"]]},{"id":"67b9d85070374db4","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{25}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2220,"wires":[["ec72bceecf7ea71c"]]},{"id":"eb383d930d144ab2","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{25}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2340,"wires":[["fa2b894a174898ea"]]},{"id":"8a5ddbaa70ecfd8d","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO MODE 1080","label":"<b>VIDEO MODE 1080</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":42,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1060,"y":2460,"wires":[["73a6d0924f6af571","4065ed7008a14209"]]},{"id":"e783d33da2af7447","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2460,"wires":[["5b2e9ebc4df94edc","6dd752093fe79f9d"]]},{"id":"46eca7d065dfebd8","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 388 AND UniqueID < 506\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2460,"wires":[["e783d33da2af7447"]]},{"id":"e2ce801fb07fb6d0","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2460,"wires":[["46eca7d065dfebd8"]]},{"id":"5b2e9ebc4df94edc","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2520,"wires":[]},{"id":"73a6d0924f6af571","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2520,"wires":[]},{"id":"a617cbe1cb7346ac","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2460,"wires":[["8a5ddbaa70ecfd8d"]]},{"id":"6dd752093fe79f9d","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{24}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2460,"wires":[["a617cbe1cb7346ac"]]},{"id":"206c72a0e254f886","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO MODE 960","label":"<b>VIDEO MODE 960</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":44,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":2580,"wires":[["0e8bd5156e1ac880","44416ae9decddc6a"]]},{"id":"16e130b36d1370db","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2580,"wires":[["5e46298031350498","33919179ac1de9e5"]]},{"id":"65bc05f9f5aafd3c","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 505 AND UniqueID < 571\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2580,"wires":[["16e130b36d1370db"]]},{"id":"13cb8e6ebacb07d5","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2580,"wires":[["65bc05f9f5aafd3c"]]},{"id":"5e46298031350498","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2640,"wires":[]},{"id":"0e8bd5156e1ac880","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2640,"wires":[]},{"id":"b514813f75c2ce2a","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2580,"wires":[["206c72a0e254f886"]]},{"id":"33919179ac1de9e5","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{24}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2580,"wires":[["b514813f75c2ce2a"]]},{"id":"4a0ed1a9ef1505a5","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO MODE 720","label":"<b>VIDEO MODE 720</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":46,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":2700,"wires":[["8b86d233e60ad3e8","32f82ffc05ad505b"]]},{"id":"daf4675f922e428d","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2700,"wires":[["f39a8859ac532517","4d616c255043df3f"]]},{"id":"4774bd403829a1b5","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 570 AND UniqueID < 688\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2700,"wires":[["daf4675f922e428d"]]},{"id":"b72ac2332aef5812","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2700,"wires":[["4774bd403829a1b5"]]},{"id":"f39a8859ac532517","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2760,"wires":[]},{"id":"8b86d233e60ad3e8","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2760,"wires":[]},{"id":"02a73d964f8e5e13","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2700,"wires":[["4a0ed1a9ef1505a5"]]},{"id":"4d616c255043df3f","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{23}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2700,"wires":[["02a73d964f8e5e13"]]},{"id":"b09dd425cbb78552","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO MODE WVGA","label":"<b>VIDEO MODE WVGA</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":48,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1060,"y":2820,"wires":[["f759ad00ce896173","efbbc3bff191eb53"]]},{"id":"5757392012d6ef96","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2820,"wires":[["260cb42300c5b40e","657680e7c5492ceb"]]},{"id":"7e6bd650c0ec39b5","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 687 AND UniqueID < 753\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2820,"wires":[["5757392012d6ef96"]]},{"id":"ec0b6d8efc0a1f0b","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2820,"wires":[["7e6bd650c0ec39b5"]]},{"id":"260cb42300c5b40e","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":2880,"wires":[]},{"id":"f759ad00ce896173","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":2880,"wires":[]},{"id":"a9517993dd401f29","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2820,"wires":[["b09dd425cbb78552"]]},{"id":"657680e7c5492ceb","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{25}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2820,"wires":[["a9517993dd401f29"]]},{"id":"6e9c49c19eb9c995","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO + photo","label":"<b>VIDEO + photo</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":50,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1040,"y":2940,"wires":[["32a6ac897e2734b3","ba893fc1097beffc"]]},{"id":"ee9d27e2fc7051a9","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2940,"wires":[["40ad749e119c7a18","59cc4b71bfc47735"]]},{"id":"04b6b9e21f912ef0","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 753 AND UniqueID < 758\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2940,"wires":[["ee9d27e2fc7051a9"]]},{"id":"22c476bebf6f6fe7","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2940,"wires":[["04b6b9e21f912ef0"]]},{"id":"40ad749e119c7a18","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3000,"wires":[]},{"id":"32a6ac897e2734b3","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3000,"wires":[]},{"id":"05eaa21c8be66a71","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2940,"wires":[["6e9c49c19eb9c995"]]},{"id":"59cc4b71bfc47735","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{22}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2940,"wires":[["05eaa21c8be66a71"]]},{"id":"a58e7d9410bebee3","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO looping","label":"<b>VIDEO looping</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":52,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1040,"y":3060,"wires":[["12c572afc678fa4b","35a60b9d78b26372"]]},{"id":"ba98143e4ebe93c6","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3060,"wires":[["d83a0156442829ce","3a9874b67152b403"]]},{"id":"14de69857421d29f","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 758 AND UniqueID < 764\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3060,"wires":[["ba98143e4ebe93c6"]]},{"id":"9d2a937369ce7249","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3060,"wires":[["14de69857421d29f"]]},{"id":"d83a0156442829ce","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3120,"wires":[]},{"id":"12c572afc678fa4b","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3120,"wires":[]},{"id":"6b3e34ad4951d1a1","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3060,"wires":[["a58e7d9410bebee3"]]},{"id":"3a9874b67152b403","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{22}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3060,"wires":[["6b3e34ad4951d1a1"]]},{"id":"a4769fac38497e83","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO low light","label":"<b>VIDEO low light</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":54,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1040,"y":3180,"wires":[["5e032f52ff521415","8ca8fe1dbe84790e"]]},{"id":"a716712c8ee354f3","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3180,"wires":[["2f1231a7e2990c8c","c87fde7e50543221"]]},{"id":"781a96b61407fae2","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 764 AND UniqueID < 767\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3180,"wires":[["a716712c8ee354f3"]]},{"id":"fcba802c68d59882","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3180,"wires":[["781a96b61407fae2"]]},{"id":"2f1231a7e2990c8c","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3240,"wires":[]},{"id":"5e032f52ff521415","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3240,"wires":[]},{"id":"6bfb64a5498637fc","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3180,"wires":[["a4769fac38497e83"]]},{"id":"c87fde7e50543221","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{24}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3180,"wires":[["6bfb64a5498637fc"]]},{"id":"3e84fe92b05d1e4d","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO spot meter","label":"<b>VIDEO spot meter</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":56,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":3300,"wires":[["eca2d30e96e7c617","cc65cb24014484ba"]]},{"id":"d996da42a5c6aeab","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3300,"wires":[["f3ea2cf219699182","83ecdf91cf298e8c"]]},{"id":"fe65c63d8cd3758c","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 767 AND UniqueID < 770\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3300,"wires":[["d996da42a5c6aeab"]]},{"id":"acd2983bf1ab5971","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3300,"wires":[["fe65c63d8cd3758c"]]},{"id":"f3ea2cf219699182","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3360,"wires":[]},{"id":"eca2d30e96e7c617","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3360,"wires":[]},{"id":"63e41251b8dd7093","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3300,"wires":[["3e84fe92b05d1e4d"]]},{"id":"83ecdf91cf298e8c","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{25}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3300,"wires":[["63e41251b8dd7093"]]},{"id":"ea4d86bb62cf9e58","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO timelapse rate","label":"<b>VIDEO timelapse rate</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":58,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1060,"y":3420,"wires":[["0bfd905d0eb2a5db","09f6f1b6280e69b1"]]},{"id":"1f7dc0c9a4e843da","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3420,"wires":[["deed7a7b4b36fe5a","6164401a07980702"]]},{"id":"5b413acf2b87e64a","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 770 AND UniqueID < 777\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3420,"wires":[["1f7dc0c9a4e843da"]]},{"id":"5de28eb942e447a3","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3420,"wires":[["5b413acf2b87e64a"]]},{"id":"deed7a7b4b36fe5a","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3480,"wires":[]},{"id":"0bfd905d0eb2a5db","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3480,"wires":[]},{"id":"0937f78552dae575","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3420,"wires":[["ea4d86bb62cf9e58"]]},{"id":"6164401a07980702","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{29}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3420,"wires":[["0937f78552dae575"]]},{"id":"f22d7cd76deffbea","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT","label":"<b>VIDEO PT</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":60,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1030,"y":3540,"wires":[["5c32662eb3b1bf31","e766211fe781522d"]]},{"id":"306672014a0f6195","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3540,"wires":[["4142637561eed76f","1d279fa2e6d9d29e"]]},{"id":"7ff995f54365df31","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 778 AND UniqueID < 781\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3540,"wires":[["306672014a0f6195"]]},{"id":"4bc7fee6ed213dd5","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3540,"wires":[["7ff995f54365df31"]]},{"id":"4142637561eed76f","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3600,"wires":[]},{"id":"5c32662eb3b1bf31","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3600,"wires":[]},{"id":"3436865a93ed1e4f","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3540,"wires":[["f22d7cd76deffbea"]]},{"id":"1d279fa2e6d9d29e","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{22}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3540,"wires":[["3436865a93ed1e4f"]]},{"id":"19ab1bf076fe8272","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT white balance","label":"<b>VIDEO PT white balance</b>","tooltip":"(v4 or later firmware only)","place":"Select option","group":"9a6307ee14eb63d3","order":62,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1070,"y":3660,"wires":[["5388f5448c75e3a5","c536c0324ff65180"]]},{"id":"93aee4602d769dc0","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3660,"wires":[["9b089acdbf933d95","3159191ccb66ab99"]]},{"id":"6e1cabe11a461963","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 781 AND UniqueID < 790\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3660,"wires":[["93aee4602d769dc0"]]},{"id":"6ab197ad9cfa6df2","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3660,"wires":[["6e1cabe11a461963"]]},{"id":"9b089acdbf933d95","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3720,"wires":[]},{"id":"5388f5448c75e3a5","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3720,"wires":[]},{"id":"bf01a7a6d3a8a116","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3660,"wires":[["19ab1bf076fe8272"]]},{"id":"3159191ccb66ab99","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{36}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3660,"wires":[["bf01a7a6d3a8a116"]]},{"id":"2e9658a7d8ef2e4d","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT color","label":"<b>VIDEO PT color</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":64,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1040,"y":3780,"wires":[["7c0fbca08abefd89","ba82fc9af70b6dae"]]},{"id":"b196ec4b1f0b7536","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3780,"wires":[["2ec4b740289854ba","d1026db6518a0c59"]]},{"id":"f5817d2ac48fafe9","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 790 AND UniqueID < 793\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3780,"wires":[["b196ec4b1f0b7536"]]},{"id":"a40c04e42822e20a","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3780,"wires":[["f5817d2ac48fafe9"]]},{"id":"2ec4b740289854ba","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3840,"wires":[]},{"id":"7c0fbca08abefd89","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3840,"wires":[]},{"id":"0d962fdc6f8cbe44","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3780,"wires":[["2e9658a7d8ef2e4d"]]},{"id":"d1026db6518a0c59","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{28}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3780,"wires":[["0d962fdc6f8cbe44"]]},{"id":"f4c30676177379e0","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT sharpness","label":"<b>VIDEO PT sharpness</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":66,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1060,"y":3900,"wires":[["8761e611030a8f42","df6d59c17cd8e3af"]]},{"id":"1e881ab2a7d0ef29","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3900,"wires":[["972f4d06802583a7","aeafe5af282512fc"]]},{"id":"aba77b747afcb5d8","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 793 AND UniqueID < 797\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3900,"wires":[["1e881ab2a7d0ef29"]]},{"id":"5ab2e405cfb6e3fe","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3900,"wires":[["aba77b747afcb5d8"]]},{"id":"972f4d06802583a7","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":3960,"wires":[]},{"id":"8761e611030a8f42","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3960,"wires":[]},{"id":"1e82626869803e90","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3900,"wires":[["f4c30676177379e0"]]},{"id":"aeafe5af282512fc","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{32}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3900,"wires":[["1e82626869803e90"]]},{"id":"ebd5f936a172c12f","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT ISO","label":"<b>VIDEO PT ISO</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":68,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1040,"y":4020,"wires":[["c082095dc539bb69","1972dde7d873d2df"]]},{"id":"968894b62496dc50","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":4020,"wires":[["a7ad89131f5ecb72","b46e36fdca5f32b1"]]},{"id":"e7427cdb11ccad9b","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 797 AND UniqueID < 805\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":4020,"wires":[["968894b62496dc50"]]},{"id":"21194fdb484267c7","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":4020,"wires":[["e7427cdb11ccad9b"]]},{"id":"a7ad89131f5ecb72","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":4080,"wires":[]},{"id":"c082095dc539bb69","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":4080,"wires":[]},{"id":"779df52df18dec4a","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":4020,"wires":[["ebd5f936a172c12f"]]},{"id":"b46e36fdca5f32b1","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{25}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":4020,"wires":[["779df52df18dec4a"]]},{"id":"53b3b07eea96c6b6","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT exposure value","label":"<b>VIDEO PT exposure value</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":70,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":4140,"wires":[["b7936f386eea967e","ebcceee5138f00d9"]]},{"id":"fd4f127b2cc7ac5e","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":4140,"wires":[["68d91c12bbb6c58b","1e2b6ba9a01475ab"]]},{"id":"e6b130d767947e32","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 805 AND UniqueID < 815\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":4140,"wires":[["fd4f127b2cc7ac5e"]]},{"id":"2e448ff24d13161e","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":4140,"wires":[["e6b130d767947e32"]]},{"id":"68d91c12bbb6c58b","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":4200,"wires":[]},{"id":"b7936f386eea967e","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":4200,"wires":[]},{"id":"769881e46f9fbcf5","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":4140,"wires":[["53b3b07eea96c6b6"]]},{"id":"1e2b6ba9a01475ab","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{37}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":4140,"wires":[["769881e46f9fbcf5"]]},{"id":"1db94cd06fae63a7","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT exposure time","label":"<b>VIDEO PT exposure time</b>","tooltip":"(v4 or later firmware only)","place":"Select option","group":"9a6307ee14eb63d3","order":72,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1070,"y":4260,"wires":[["dbff3a63edf0b8b4","52188b808879340d"]]},{"id":"b5faf6173fde2554","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":4260,"wires":[["854cd8e4ee4b213c","790691324e7107e6"]]},{"id":"63c75cc88719d9c0","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 818 AND UniqueID < 843\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":4260,"wires":[["b5faf6173fde2554"]]},{"id":"81fc85c6922dab3b","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":4260,"wires":[["63c75cc88719d9c0"]]},{"id":"854cd8e4ee4b213c","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":4320,"wires":[]},{"id":"dbff3a63edf0b8b4","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":4320,"wires":[]},{"id":"7ebb7d295213d66c","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":4260,"wires":[["1db94cd06fae63a7"]]},{"id":"790691324e7107e6","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{56}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":4260,"wires":[["7ebb7d295213d66c"]]},{"id":"0d5b8de5a31cf5e4","type":"ui_dropdown","z":"2c60e581ebb81688","name":"VIDEO PT ISO mode","label":"<b>VIDEO PT ISO mode</b>","tooltip":"(v4 or later firmware only)","place":"Select option","group":"9a6307ee14eb63d3","order":74,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1060,"y":4380,"wires":[["4d2c21b1490d388f","64fb0c679b71db4d"]]},{"id":"99d23d0720d9174b","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":4380,"wires":[["49d3ecca32f7e86c","bedb21aacc94d273"]]},{"id":"3807b3eb7bf7351e","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 843 AND UniqueID < 846\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":4380,"wires":[["99d23d0720d9174b"]]},{"id":"ba7773b9bbab37f4","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":4380,"wires":[["3807b3eb7bf7351e"]]},{"id":"49d3ecca32f7e86c","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":4440,"wires":[]},{"id":"4d2c21b1490d388f","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":4440,"wires":[]},{"id":"a019d6e707687a8d","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":4380,"wires":[["0d5b8de5a31cf5e4"]]},{"id":"bedb21aacc94d273","type":"function","z":"2c60e581ebb81688","name":"","func":"\nconst before_label = /[\\s\\S]{59}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":4380,"wires":[["a019d6e707687a8d"]]},{"id":"b3af6f362ae3e0c6","type":"ui_text","z":"2c60e581ebb81688","group":"9a6307ee14eb63d3","order":33,"width":26,"height":1,"name":"Video Mode","label":"<h3>Video Mode</h3>","format":"{{msg.payload}}","layout":"col-center","className":"","x":110,"y":1900,"wires":[]},{"id":"bf95a7d8c213f75b","type":"ui_text","z":"2c60e581ebb81688","group":"9a6307ee14eb63d3","order":27,"width":26,"height":1,"name":"Mode Selection","label":"<h3>Mode Selection</h3>","format":"{{msg.payload}}","layout":"col-center","className":"","x":120,"y":1620,"wires":[]},{"id":"b5d15a44676b3d79","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_MAIN_MODE declaration","func":"global.set('UDP_YY_MAIN_MODE',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1420,"y":1680,"wires":[[]]},{"id":"a8bb4d66d9b94c7c","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_SUB_MODE declaration","func":"global.set('UDP_YY_SUB_MODE',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1420,"y":1800,"wires":[[]]},{"id":"a41fdd29be51800c","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_DEFAULT_SUB_MODE declaration","func":"global.set('UDP_YY_VIDEO_DEFAULT_SUB_MODE',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":1980,"wires":[[]]},{"id":"c1e04f3c8a359865","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_MODE_4k declaration","func":"global.set('UDP_YY_VIDEO_MODE_4k',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":2100,"wires":[[]]},{"id":"967b8b431566bca5","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_MODE_2k declaration","func":"global.set('UDP_YY_VIDEO_MODE_2k',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":2220,"wires":[[]]},{"id":"1fc55afa111ba11f","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_MODE_1440 declaration","func":"global.set('UDP_YY_VIDEO_MODE_1440',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1450,"y":2340,"wires":[[]]},{"id":"4065ed7008a14209","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_MODE_1080 declaration","func":"global.set('UDP_YY_VIDEO_MODE_1080',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1450,"y":2460,"wires":[[]]},{"id":"44416ae9decddc6a","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_MODE_960 declaration","func":"global.set('UDP_YY_VIDEO_MODE_960',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":2580,"wires":[[]]},{"id":"32f82ffc05ad505b","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_MODE_720 declaration","func":"global.set('UDP_YY_VIDEO_MODE_720',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":2700,"wires":[[]]},{"id":"efbbc3bff191eb53","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_MODE_WVGA declaration","func":"global.set('UDP_YY_VIDEO_MODE_WVGA',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1450,"y":2820,"wires":[[]]},{"id":"ba893fc1097beffc","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_+_photo declaration","func":"global.set('UDP_YY_VIDEO_+_photo',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1430,"y":2940,"wires":[[]]},{"id":"35a60b9d78b26372","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_looping declaration","func":"global.set('UDP_YY_VIDEO_looping',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1430,"y":3060,"wires":[[]]},{"id":"8ca8fe1dbe84790e","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_low_light declaration","func":"global.set('UDP_YY_VIDEO_low_light',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1430,"y":3180,"wires":[[]]},{"id":"cc65cb24014484ba","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_spot_meter declaration","func":"global.set('UDP_YY_VIDEO_spot_meter',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":3300,"wires":[[]]},{"id":"09f6f1b6280e69b1","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_timelapse_rate declaration","func":"global.set('UDP_YY_VIDEO_timelapse_rate',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1450,"y":3420,"wires":[[]]},{"id":"e766211fe781522d","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO _PT declaration","func":"global.set('UDP_YY_VIDEO_PT',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1420,"y":3540,"wires":[[]]},{"id":"c536c0324ff65180","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_PT_white_balance declaration","func":"global.set('UDP_YY_VIDEO_PT_white_balance',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1460,"y":3660,"wires":[[]]},{"id":"ba82fc9af70b6dae","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_PT_color declaration","func":"global.set('UDP_YY_VIDEO_PT_color',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":3780,"wires":[[]]},{"id":"df6d59c17cd8e3af","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_PT_sharpness declaration","func":"global.set('UDP_YY_VIDEO_PT_sharpness',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1450,"y":3900,"wires":[[]]},{"id":"1972dde7d873d2df","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_PT_ISO declaration","func":"global.set('UDP_YY_VIDEO_PT_ISO',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1430,"y":4020,"wires":[[]]},{"id":"ebcceee5138f00d9","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_PT_exposure_value declaration","func":"global.set('UDP_YY_VIDEO_PT_exposure_value',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":4140,"wires":[[]]},{"id":"52188b808879340d","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_PT_exposure_time declaration","func":"global.set('UDP_YY_VIDEO_PT_exposure_time',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":4260,"wires":[[]]},{"id":"64fb0c679b71db4d","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_VIDEO_PT_ISO_mode declaration","func":"global.set('UDP_YY_VIDEO_PT_ISO_mode',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1450,"y":4380,"wires":[[]]},{"id":"70f0fc63888ef82d","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS LCD brightness","label":"<b>GLOBAL SETTINGS LCD brightness</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":2,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1110,"y":160,"wires":[["c50c083d5fabf9a7","5533108ef233defc"]]},{"id":"5b3bbc5ce1d3d261","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":160,"wires":[["a376b640643e4a97","411daade49fcdb11"]]},{"id":"1f0cf8ce4c9a8c5c","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1001 AND UniqueID < 1005\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":160,"wires":[["5b3bbc5ce1d3d261"]]},{"id":"9ea124940f43f7f8","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":160,"wires":[["1f0cf8ce4c9a8c5c"]]},{"id":"a376b640643e4a97","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":220,"wires":[]},{"id":"c50c083d5fabf9a7","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":200,"wires":[]},{"id":"ef73e87c9491d191","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"Select Option","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":160,"wires":[["70f0fc63888ef82d"]]},{"id":"411daade49fcdb11","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{39}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":160,"wires":[["ef73e87c9491d191"]]},{"id":"07df402f227500a3","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":280,"wires":[["72e58a283d235d1b","78d0ea54c5211b46"]]},{"id":"13b13a57512b77c1","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1005 AND UniqueID < 1010\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":280,"wires":[["07df402f227500a3"]]},{"id":"3ce106fba9d4870e","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":280,"wires":[["13b13a57512b77c1"]]},{"id":"72e58a283d235d1b","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":340,"wires":[]},{"id":"8bf80b4deaa5018c","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":320,"wires":[]},{"id":"e7b90738570bd698","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":280,"wires":[["45da62b81f16e30a"]]},{"id":"78d0ea54c5211b46","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{34}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":280,"wires":[["e7b90738570bd698"]]},{"id":"9d63fc587de017f8","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS LCD lock","label":"<b>GLOBAL SETTINGS LCD lock</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":6,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":400,"wires":[["3f4021ab47d6f4d7","4913b7b9fd234f69"]]},{"id":"1ae89c06635e8242","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":400,"wires":[["88bcc28d44d630e0","3a18e80e45637498"]]},{"id":"400f8efa19649772","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1010 AND UniqueID < 1013\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":400,"wires":[["1ae89c06635e8242"]]},{"id":"b3623e1758f00558","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":400,"wires":[["400f8efa19649772"]]},{"id":"88bcc28d44d630e0","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":460,"wires":[]},{"id":"3f4021ab47d6f4d7","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":440,"wires":[]},{"id":"19d1ee9991f3fd02","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":400,"wires":[["9d63fc587de017f8"]]},{"id":"3a18e80e45637498","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{32}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":400,"wires":[["19d1ee9991f3fd02"]]},{"id":"8298838dfaab25a8","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS LCD power","label":"<b>GLOBAL SETTINGS LCD power</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":8,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":520,"wires":[["6dd57303bccade43","8131659e0803cb1b"]]},{"id":"f68beee2fc3b61cb","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":520,"wires":[["bd8afd5373dea3b5","aa7b77f139392c53"]]},{"id":"63dd5c6faccc33ea","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1013 AND UniqueID < 1016\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":520,"wires":[["f68beee2fc3b61cb"]]},{"id":"afcb2552404e70df","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":520,"wires":[["63dd5c6faccc33ea"]]},{"id":"bd8afd5373dea3b5","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":580,"wires":[]},{"id":"6dd57303bccade43","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":560,"wires":[]},{"id":"386c89c94ef853cf","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":520,"wires":[["8298838dfaab25a8"]]},{"id":"aa7b77f139392c53","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{34}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":520,"wires":[["386c89c94ef853cf"]]},{"id":"3ecbcceeca1d428b","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS orientation","label":"<b>GLOBAL SETTINGS orientation</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":10,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":640,"wires":[["29f4408e1ff2c823","66d3c4b34fc7efca"]]},{"id":"905ef69cce810aa7","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":640,"wires":[["8ae05244b6e81946","f823e253de63c228"]]},{"id":"db1e9da6f5515342","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1016 AND UniqueID < 1020\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":640,"wires":[["905ef69cce810aa7"]]},{"id":"31827a830487143e","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":640,"wires":[["db1e9da6f5515342"]]},{"id":"8ae05244b6e81946","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":700,"wires":[]},{"id":"29f4408e1ff2c823","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":680,"wires":[]},{"id":"304882f862820843","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":640,"wires":[["3ecbcceeca1d428b"]]},{"id":"f823e253de63c228","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{36}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":640,"wires":[["304882f862820843"]]},{"id":"61efe944571047aa","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS default mode","label":"<b>GLOBAL SETTINGS default mode</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":12,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1100,"y":760,"wires":[["d6bda076d20b5d9e","03b569fdb7b3e675"]]},{"id":"1b232b7a5cf6e1d4","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":760,"wires":[["d2f7f43166c4d63a","b40a9ee1a6b58bb7"]]},{"id":"e36717cf3d224dd0","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1020 AND UniqueID < 1024\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":760,"wires":[["1b232b7a5cf6e1d4"]]},{"id":"3f9d25057adbbb37","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":760,"wires":[["e36717cf3d224dd0"]]},{"id":"d2f7f43166c4d63a","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":820,"wires":[]},{"id":"d6bda076d20b5d9e","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":800,"wires":[]},{"id":"25d6e56699426b55","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":760,"wires":[["61efe944571047aa"]]},{"id":"b40a9ee1a6b58bb7","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{36}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":760,"wires":[["25d6e56699426b55"]]},{"id":"195d3f8c38c8d17c","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS quick capture","label":"<b>GLOBAL SETTINGS quick capture</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":14,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1100,"y":880,"wires":[["d882b38e294996da","8439ae9af86d15e2"]]},{"id":"1e5979605d777a87","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":880,"wires":[["9bd30975326b55f7","9eca42a7b9bf1295"]]},{"id":"ce0a615475544ce9","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1024 AND UniqueID < 1027\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":880,"wires":[["1e5979605d777a87"]]},{"id":"dd4473293b0b8ea1","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":880,"wires":[["ce0a615475544ce9"]]},{"id":"9bd30975326b55f7","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":940,"wires":[]},{"id":"d882b38e294996da","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":920,"wires":[]},{"id":"e6a28373081bec83","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":880,"wires":[["195d3f8c38c8d17c"]]},{"id":"9eca42a7b9bf1295","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{38}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":880,"wires":[["e6a28373081bec83"]]},{"id":"0f6d1eb1f4bee8ce","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS LEDs","label":"<b>GLOBAL SETTINGS LEDs</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":16,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":1000,"wires":[["ec3d22b5ed59d51c","832c90528266e646"]]},{"id":"e34fd3912e5ad432","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1000,"wires":[["06f816a55ea530a1","cba2d6564fe5bd9c"]]},{"id":"8665e9820b938069","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1027 AND UniqueID < 1031\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1000,"wires":[["e34fd3912e5ad432"]]},{"id":"346e75201966ba8c","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1000,"wires":[["8665e9820b938069"]]},{"id":"06f816a55ea530a1","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1060,"wires":[]},{"id":"ec3d22b5ed59d51c","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":1040,"wires":[]},{"id":"84b49741c9d7a67a","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1000,"wires":[["0f6d1eb1f4bee8ce"]]},{"id":"cba2d6564fe5bd9c","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{29}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1000,"wires":[["84b49741c9d7a67a"]]},{"id":"a09e6cf944384365","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS beeps","label":"<b>GLOBAL SETTINGS beeps</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":18,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":1120,"wires":[["a1420e6128231f8c","4d89f3d66faf5dce"]]},{"id":"9873727ef1d9ba90","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1120,"wires":[["5cbeff761ff2ac4d","1f47e28115d18b7f"]]},{"id":"16171ba0cede20d9","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1031 AND UniqueID < 1036\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1120,"wires":[["9873727ef1d9ba90"]]},{"id":"cdc00ae234e0f09a","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1120,"wires":[["16171ba0cede20d9"]]},{"id":"5cbeff761ff2ac4d","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1180,"wires":[]},{"id":"a1420e6128231f8c","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":1160,"wires":[]},{"id":"39c0223cc5fe5edf","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1120,"wires":[["a09e6cf944384365"]]},{"id":"1f47e28115d18b7f","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{30}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1120,"wires":[["39c0223cc5fe5edf"]]},{"id":"f8dec2718d6d75fc","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS video format","label":"<b>GLOBAL SETTINGS video format</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":20,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1100,"y":1240,"wires":[["12faae4f12e19e5e","5fc95ba21db56031"]]},{"id":"8ba1421428d30d22","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1240,"wires":[["9eca02ca37a8bcb2","f5dbe9bf8d6c8611"]]},{"id":"5a927cd8f48d9e5c","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1036 AND UniqueID < 1039\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1240,"wires":[["8ba1421428d30d22"]]},{"id":"c48fabb1cbad5265","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1240,"wires":[["5a927cd8f48d9e5c"]]},{"id":"9eca02ca37a8bcb2","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1300,"wires":[]},{"id":"12faae4f12e19e5e","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":1280,"wires":[]},{"id":"646e03b786f1e401","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1240,"wires":[["f8dec2718d6d75fc"]]},{"id":"f5dbe9bf8d6c8611","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{37}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1240,"wires":[["646e03b786f1e401"]]},{"id":"740d79b799b4478c","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS OSD","label":"<b>GLOBAL SETTINGS OSD</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":22,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":1360,"wires":[["fb039060598ce839","f6816b5687c4d729"]]},{"id":"4d5417c6a69bab44","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1360,"wires":[["82c0c8da8be6ada9","af96be176c61ace1"]]},{"id":"580e74bed140fdba","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1039 AND UniqueID < 1042\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1360,"wires":[["4d5417c6a69bab44"]]},{"id":"e722b4a83f6efe7f","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1360,"wires":[["580e74bed140fdba"]]},{"id":"82c0c8da8be6ada9","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1420,"wires":[]},{"id":"fb039060598ce839","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":1400,"wires":[]},{"id":"df36ee780fb877e9","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1360,"wires":[["740d79b799b4478c"]]},{"id":"af96be176c61ace1","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{28}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1360,"wires":[["df36ee780fb877e9"]]},{"id":"916b38d4dfbc1d14","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS auto power down","label":"<b>GLOBAL SETTINGS auto power down</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":24,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1110,"y":1480,"wires":[["5a594a244d8efb79","b574eb195c734bdd"]]},{"id":"dacce477987db17a","type":"mysql","z":"2c60e581ebb81688","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1480,"wires":[["00b64fd3f6a498e9","1086b6263761dfac"]]},{"id":"5c0ff286a079d7c1","type":"function","z":"2c60e581ebb81688","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 1042 AND UniqueID < 1047\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1480,"wires":[["dacce477987db17a"]]},{"id":"0cf231fc17686e04","type":"inject","z":"2c60e581ebb81688","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1480,"wires":[["5c0ff286a079d7c1"]]},{"id":"00b64fd3f6a498e9","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1540,"wires":[]},{"id":"5a594a244d8efb79","type":"debug","z":"2c60e581ebb81688","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":1520,"wires":[]},{"id":"32cd9da3ec6cb504","type":"change","z":"2c60e581ebb81688","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1480,"wires":[["916b38d4dfbc1d14"]]},{"id":"1086b6263761dfac","type":"function","z":"2c60e581ebb81688","name":"","func":"const before_label = /[\\s\\S]{40}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1480,"wires":[["32cd9da3ec6cb504"]]},{"id":"29aba83c96ba503c","type":"ui_text","z":"2c60e581ebb81688","group":"9a6307ee14eb63d3","order":1,"width":0,"height":0,"name":"Global Settings","label":"<h3>Global Settings</h3>","format":"{{msg.payload}}","layout":"col-center","className":"","x":100,"y":80,"wires":[]},{"id":"45da62b81f16e30a","type":"ui_dropdown","z":"2c60e581ebb81688","name":"GLOBAL SETTINGS LCD sleep","label":"<b>GLOBAL SETTINGS LCD sleep</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":4,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":280,"wires":[["8bf80b4deaa5018c","ae059a753f69226d"]]},{"id":"b574eb195c734bdd","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_auto_power_down declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_auto_power_down',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1510,"y":1480,"wires":[[]]},{"id":"f6816b5687c4d729","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_OSD declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_OSD',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":1360,"wires":[[]]},{"id":"5fc95ba21db56031","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_video_format declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_video_format',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":1240,"wires":[[]]},{"id":"4d89f3d66faf5dce","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_beeps declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_beeps',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":1120,"wires":[[]]},{"id":"832c90528266e646","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_LEDs declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_LEDs',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":1000,"wires":[[]]},{"id":"8439ae9af86d15e2","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_quick_capture declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_quick_capture',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":880,"wires":[[]]},{"id":"03b569fdb7b3e675","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_default_mode declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_default_mode',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":760,"wires":[[]]},{"id":"66d3c4b34fc7efca","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_orientation declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_orientation',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":640,"wires":[[]]},{"id":"8131659e0803cb1b","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_LCD_power declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_LCD_power',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":520,"wires":[[]]},{"id":"4913b7b9fd234f69","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_LCD_lock declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_LCD_lock',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":400,"wires":[[]]},{"id":"ae059a753f69226d","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_LCD_sleep declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_LCD_sleep',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":280,"wires":[[]]},{"id":"5533108ef233defc","type":"function","z":"2c60e581ebb81688","name":"UDP_YY_GLOBAL_SETTINGS_LCD_brightness declaration","func":"global.set('UDP_YY_GLOBAL_SETTINGS_LCD_brightness',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":160,"wires":[[]]},{"id":"852eb14112b7a3c3","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_LCD_brightness","payloadType":"global","x":880,"y":200,"wires":[["70f0fc63888ef82d"]]},{"id":"8759bbd2df181478","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_LCD_sleep","payloadType":"global","x":880,"y":320,"wires":[["45da62b81f16e30a"]]},{"id":"a462ef6a44659c05","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_LCD_lock","payloadType":"global","x":880,"y":440,"wires":[["9d63fc587de017f8"]]},{"id":"acd583b7b963a01c","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_LCD_power","payloadType":"global","x":880,"y":560,"wires":[["8298838dfaab25a8"]]},{"id":"2374278ccc63046a","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_orientation","payloadType":"global","x":880,"y":680,"wires":[["3ecbcceeca1d428b"]]},{"id":"162370ae69134268","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_default_mode","payloadType":"global","x":880,"y":800,"wires":[["61efe944571047aa"]]},{"id":"e9d5a320c2a88bc2","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_quick_capture","payloadType":"global","x":880,"y":920,"wires":[["195d3f8c38c8d17c"]]},{"id":"1a5d101d02c4fe1d","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_LEDs","payloadType":"global","x":880,"y":1040,"wires":[["0f6d1eb1f4bee8ce"]]},{"id":"1d802ca1517cec11","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_beeps","payloadType":"global","x":880,"y":1160,"wires":[["a09e6cf944384365"]]},{"id":"6cab9abe1638e1b6","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_video_format","payloadType":"global","x":880,"y":1280,"wires":[["f8dec2718d6d75fc"]]},{"id":"96134d624578c2b7","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_OSD","payloadType":"global","x":880,"y":1400,"wires":[["740d79b799b4478c"]]},{"id":"88938c630c94ccc6","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_GLOBAL_SETTINGS_auto_power_down","payloadType":"global","x":880,"y":1520,"wires":[["916b38d4dfbc1d14"]]},{"id":"03178a7e7b6b43fe","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MAIN_MODE","payloadType":"global","x":880,"y":1720,"wires":[["d856ad2ee00fbe28"]]},{"id":"b1da61b7d9b8979d","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_SUB_MODE","payloadType":"global","x":880,"y":1840,"wires":[["e528257564adfc10"]]},{"id":"f158df9c95798fab","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_DEFAULT_SUB_MODE","payloadType":"global","x":880,"y":2020,"wires":[["333bf2090da2d451"]]},{"id":"b341e9b11e8c9062","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_MODE_4k","payloadType":"global","x":880,"y":2140,"wires":[["8baf211d7fe93723"]]},{"id":"06e1c3c7342a0fbd","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_MODE_2k","payloadType":"global","x":880,"y":2260,"wires":[["5873dd547121fa85"]]},{"id":"5f6fcaa8e2c3933b","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_MODE_1440","payloadType":"global","x":880,"y":2380,"wires":[["b07de874db8210b7"]]},{"id":"bc2d6e2698f68008","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_MODE_1080","payloadType":"global","x":880,"y":2500,"wires":[["8a5ddbaa70ecfd8d"]]},{"id":"8333392696399cdd","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_MODE_960","payloadType":"global","x":880,"y":2620,"wires":[["206c72a0e254f886"]]},{"id":"932912dbd5dc19d5","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_MODE_720","payloadType":"global","x":880,"y":2740,"wires":[["4a0ed1a9ef1505a5"]]},{"id":"08dc0de86c42e0d4","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_MODE_WVGA","payloadType":"global","x":880,"y":2860,"wires":[["b09dd425cbb78552"]]},{"id":"61e2aa7809da3985","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_+_photo","payloadType":"global","x":880,"y":2980,"wires":[["6e9c49c19eb9c995"]]},{"id":"b3e64f87e5603796","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_looping","payloadType":"global","x":880,"y":3100,"wires":[["a58e7d9410bebee3"]]},{"id":"8ddf81fe44a0b966","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_low_light","payloadType":"global","x":880,"y":3220,"wires":[["a4769fac38497e83"]]},{"id":"75c1a91fb8b28a1a","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_spot_meter","payloadType":"global","x":880,"y":3340,"wires":[["3e84fe92b05d1e4d"]]},{"id":"1ebb93bfc42ce8cf","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_timelapse_rate","payloadType":"global","x":880,"y":3460,"wires":[["ea4d86bb62cf9e58"]]},{"id":"77be233dfebcd7eb","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT","payloadType":"global","x":880,"y":3580,"wires":[["f22d7cd76deffbea"]]},{"id":"62afb83fc6d413e7","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT_white_balance","payloadType":"global","x":880,"y":3700,"wires":[["19ab1bf076fe8272"]]},{"id":"539342aa60f29830","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT_color","payloadType":"global","x":880,"y":3820,"wires":[["2e9658a7d8ef2e4d"]]},{"id":"84efce88b4c4baa5","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT_sharpness","payloadType":"global","x":880,"y":3940,"wires":[["f4c30676177379e0"]]},{"id":"3559bb59e0e973ec","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT_ISO","payloadType":"global","x":880,"y":4060,"wires":[["ebd5f936a172c12f"]]},{"id":"9b588cd41f5f4cf6","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT_exposure_value","payloadType":"global","x":880,"y":4180,"wires":[["53b3b07eea96c6b6"]]},{"id":"cb82e9b9f65bfa67","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT_exposure_time","payloadType":"global","x":880,"y":4300,"wires":[["1db94cd06fae63a7"]]},{"id":"2412faf4f83e8d88","type":"inject","z":"2c60e581ebb81688","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_VIDEO_PT_ISO_mode","payloadType":"global","x":880,"y":4420,"wires":[["0d5b8de5a31cf5e4"]]},{"id":"8e5a9f264bcd9894","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":3,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":120,"wires":[["70f0fc63888ef82d","3590c6c72f0edf55"]]},{"id":"3590c6c72f0edf55","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":120,"wires":[["5533108ef233defc"]]},{"id":"fd676b684846dc1a","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":5,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":240,"wires":[["6dd164b1ec888557","45da62b81f16e30a"]]},{"id":"6dd164b1ec888557","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":240,"wires":[["ae059a753f69226d"]]},{"id":"7bfa762390483ddb","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":7,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":360,"wires":[["4a8e86e6f985d07c","9d63fc587de017f8"]]},{"id":"4a8e86e6f985d07c","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":360,"wires":[["4913b7b9fd234f69"]]},{"id":"5fd5558d2fe8027f","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":9,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":480,"wires":[["e9bb4612e3112fe7","8298838dfaab25a8"]]},{"id":"e9bb4612e3112fe7","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":480,"wires":[["8131659e0803cb1b"]]},{"id":"246867ec0a681435","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":11,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":600,"wires":[["90968344331e3479","3ecbcceeca1d428b"]]},{"id":"90968344331e3479","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":600,"wires":[["66d3c4b34fc7efca"]]},{"id":"20b6521b60e7a1f1","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":13,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":720,"wires":[["9358bc060d2e1629","61efe944571047aa"]]},{"id":"9358bc060d2e1629","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":720,"wires":[["03b569fdb7b3e675"]]},{"id":"3b669eb02c3ecd1e","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":15,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":840,"wires":[["ce2a37b39d6c2686","195d3f8c38c8d17c"]]},{"id":"ce2a37b39d6c2686","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":840,"wires":[["8439ae9af86d15e2"]]},{"id":"9503d37083682971","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":17,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":960,"wires":[["51779753929dd1f1","0f6d1eb1f4bee8ce"]]},{"id":"51779753929dd1f1","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":960,"wires":[["832c90528266e646"]]},{"id":"60e8abfa68c12a0f","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":19,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1080,"wires":[["4ff7f8524b87c939","a09e6cf944384365"]]},{"id":"4ff7f8524b87c939","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":1080,"wires":[["4d89f3d66faf5dce"]]},{"id":"c84199269e5a223c","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":21,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1200,"wires":[["fcaf9bd94bd3f129","f8dec2718d6d75fc"]]},{"id":"fcaf9bd94bd3f129","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":1200,"wires":[["5fc95ba21db56031"]]},{"id":"94bf778a6c53c852","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":23,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1320,"wires":[["426ebe91028f3a04","740d79b799b4478c"]]},{"id":"426ebe91028f3a04","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":1320,"wires":[["f6816b5687c4d729"]]},{"id":"1c1825f58c5c87e6","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":25,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1440,"wires":[["dfe50bdd0e808bc4","916b38d4dfbc1d14"]]},{"id":"dfe50bdd0e808bc4","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":1440,"wires":[["b574eb195c734bdd"]]},{"id":"b7c8797f1dd9eb64","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":29,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1640,"wires":[["b9c621a109c34b2d","d856ad2ee00fbe28"]]},{"id":"b9c621a109c34b2d","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":1640,"wires":[["b5d15a44676b3d79"]]},{"id":"933940fa8e71869a","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":31,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1760,"wires":[["478b3bce05cd970c","e528257564adfc10"]]},{"id":"478b3bce05cd970c","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":1760,"wires":[["a8bb4d66d9b94c7c"]]},{"id":"3031930ca4f50be2","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":35,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1940,"wires":[["88641c6dbd1949b5","333bf2090da2d451"]]},{"id":"88641c6dbd1949b5","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":1940,"wires":[["a41fdd29be51800c"]]},{"id":"09397a2094c4c3f0","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":37,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2060,"wires":[["2aa8a62d75bb59bb","8baf211d7fe93723"]]},{"id":"2aa8a62d75bb59bb","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2060,"wires":[["c1e04f3c8a359865"]]},{"id":"921a1580c2103355","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":39,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2180,"wires":[["20db029c22bd3fca","5873dd547121fa85"]]},{"id":"20db029c22bd3fca","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2180,"wires":[["967b8b431566bca5"]]},{"id":"c6cd5a08254cdd35","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":41,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2300,"wires":[["05e918bc5321092c","b07de874db8210b7"]]},{"id":"05e918bc5321092c","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2300,"wires":[["1fc55afa111ba11f"]]},{"id":"a3741428550d8e14","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":43,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2420,"wires":[["2908c991b9539112","8a5ddbaa70ecfd8d"]]},{"id":"2908c991b9539112","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2420,"wires":[["4065ed7008a14209"]]},{"id":"3f74375792b4f966","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":45,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2540,"wires":[["9ab28fe929adb0d2","206c72a0e254f886"]]},{"id":"9ab28fe929adb0d2","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2540,"wires":[["44416ae9decddc6a"]]},{"id":"4c2f2b12d7064c75","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":47,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2660,"wires":[["7dd9aa5e3214822a","4a0ed1a9ef1505a5"]]},{"id":"7dd9aa5e3214822a","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2660,"wires":[["32f82ffc05ad505b"]]},{"id":"ea397588ee52a11a","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":49,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2780,"wires":[["9c372be9e3f6231c","b09dd425cbb78552"]]},{"id":"9c372be9e3f6231c","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2780,"wires":[["efbbc3bff191eb53"]]},{"id":"f82a483d58f7f334","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":51,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2900,"wires":[["f0540ce26d31228b","6e9c49c19eb9c995"]]},{"id":"f0540ce26d31228b","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2900,"wires":[["ba893fc1097beffc"]]},{"id":"64ab75ceca1d3d29","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":53,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3020,"wires":[["e6ef2371501d2084","a58e7d9410bebee3"]]},{"id":"e6ef2371501d2084","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3020,"wires":[["35a60b9d78b26372"]]},{"id":"b3477392b129115a","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":55,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3140,"wires":[["0234a3fb3bbe48f4","a4769fac38497e83"]]},{"id":"0234a3fb3bbe48f4","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3140,"wires":[["8ca8fe1dbe84790e"]]},{"id":"84979f0936e6fbc8","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":57,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3260,"wires":[["15751642d83f3f6c","3e84fe92b05d1e4d"]]},{"id":"15751642d83f3f6c","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3260,"wires":[["cc65cb24014484ba"]]},{"id":"416a09f437531634","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":59,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3380,"wires":[["3cb8e04f68febfca","ea4d86bb62cf9e58"]]},{"id":"3cb8e04f68febfca","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3380,"wires":[["09f6f1b6280e69b1"]]},{"id":"c1acf6a05a772566","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":63,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3620,"wires":[["009ea4aec4889b49","19ab1bf076fe8272"]]},{"id":"009ea4aec4889b49","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3620,"wires":[["c536c0324ff65180"]]},{"id":"7766647923e15572","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":65,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3740,"wires":[["8a77e7350e2c3a93","2e9658a7d8ef2e4d"]]},{"id":"8a77e7350e2c3a93","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3740,"wires":[["ba82fc9af70b6dae"]]},{"id":"dc75d58329bdf840","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":67,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3860,"wires":[["d9d77db396a3644f","f4c30676177379e0"]]},{"id":"d9d77db396a3644f","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3860,"wires":[["df6d59c17cd8e3af"]]},{"id":"b8f33c272ecfb287","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":69,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3980,"wires":[["365cbb1b5b788a1f","ebd5f936a172c12f"]]},{"id":"365cbb1b5b788a1f","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3980,"wires":[["1972dde7d873d2df"]]},{"id":"1592c679b1e4b1d8","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":71,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":4100,"wires":[["daa7d219d693066f","53b3b07eea96c6b6"]]},{"id":"daa7d219d693066f","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4100,"wires":[["ebcceee5138f00d9"]]},{"id":"7c89d87bfb51afe1","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":73,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":4220,"wires":[["354a3ee57be09792","1db94cd06fae63a7"]]},{"id":"354a3ee57be09792","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4220,"wires":[["52188b808879340d"]]},{"id":"5b00ff1155e06e51","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":75,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":4340,"wires":[["b7cee92389d47f05","0d5b8de5a31cf5e4"]]},{"id":"b7cee92389d47f05","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":4340,"wires":[["64fb0c679b71db4d"]]},{"id":"4e1f9df3f3d23b53","type":"ui_button","z":"2c60e581ebb81688","name":"","group":"9a6307ee14eb63d3","order":61,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3500,"wires":[["bb4ad58b9b5a0634","f22d7cd76deffbea"]]},{"id":"bb4ad58b9b5a0634","type":"change","z":"2c60e581ebb81688","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3500,"wires":[["e766211fe781522d"]]},{"id":"f913392638a58856","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT default sub mode","label":"<b>MULTI-SHOT default sub mode</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":104,"width":12,"height":1,"passthru":true,"multiple":false,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":1110,"y":1540,"wires":[["c4cb32f4057e1e12","45d206a71b6f595d"]]},{"id":"5d20c435fc4cb2d8","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1540,"wires":[["ded4c8d98b3e8bc6","0524971829aad408"]]},{"id":"2ad25952b51884a7","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 911 AND UniqueID < 915\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1540,"wires":[["5d20c435fc4cb2d8"]]},{"id":"a7e2f1033cfd6a8d","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1540,"wires":[["2ad25952b51884a7"]]},{"id":"ded4c8d98b3e8bc6","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1600,"wires":[]},{"id":"c4cb32f4057e1e12","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":1600,"wires":[]},{"id":"be93765175de2cae","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1540,"wires":[["f913392638a58856"]]},{"id":"0524971829aad408","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{36}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1540,"wires":[["be93765175de2cae"]]},{"id":"f819a903712c0eec","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT resolution","label":"<b>MULTI-SHOT resolution</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":106,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":1660,"wires":[["80875436e69b3cad","06a360ecf90ad0de"]]},{"id":"25408799bc0396bc","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1660,"wires":[["9093365968ae1079","4b7c362797bd5a61"]]},{"id":"6d9a300d3d19291a","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 915 AND UniqueID < 920\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1660,"wires":[["25408799bc0396bc"]]},{"id":"64c9ae6f10339ae2","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1660,"wires":[["6d9a300d3d19291a"]]},{"id":"9093365968ae1079","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1720,"wires":[]},{"id":"80875436e69b3cad","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":1720,"wires":[]},{"id":"de84a9462e19b751","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1660,"wires":[["f819a903712c0eec"]]},{"id":"4b7c362797bd5a61","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{30}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1660,"wires":[["de84a9462e19b751"]]},{"id":"2b25bdc0df47c920","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT burst rate","label":"<b>MULTI-SHOT burst rate</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":108,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":1780,"wires":[["7211306f5ba5bd92","bc3870038ab5774b"]]},{"id":"58a01b9f00ab8647","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1780,"wires":[["6f985e22896069ba","a806ff8092acce17"]]},{"id":"a5a7b2f77d2fb456","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 920 AND UniqueID < 930\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1780,"wires":[["58a01b9f00ab8647"]]},{"id":"81629bd92a095bd5","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1780,"wires":[["a5a7b2f77d2fb456"]]},{"id":"6f985e22896069ba","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1840,"wires":[]},{"id":"7211306f5ba5bd92","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":1840,"wires":[]},{"id":"cbe6423b93f93a3e","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1780,"wires":[["2b25bdc0df47c920"]]},{"id":"a806ff8092acce17","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{30}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1780,"wires":[["cbe6423b93f93a3e"]]},{"id":"75d6710ef81db523","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT timelapse rate","label":"<b>MULTI-SHOT timelapse rate</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":110,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1100,"y":1900,"wires":[["e4fb8f1ac96f3805","290c6fb80bd7ec44"]]},{"id":"24ceaae42093b27f","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1900,"wires":[["13adefba0798f248","1948f6a8a2d540c2"]]},{"id":"c7854b336cf20fe5","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 930 AND UniqueID < 938\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1900,"wires":[["24ceaae42093b27f"]]},{"id":"d5a28dd30c95143b","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1900,"wires":[["c7854b336cf20fe5"]]},{"id":"13adefba0798f248","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1960,"wires":[]},{"id":"e4fb8f1ac96f3805","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":1960,"wires":[]},{"id":"e46e434028dbb501","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1900,"wires":[["75d6710ef81db523"]]},{"id":"1948f6a8a2d540c2","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{34}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1900,"wires":[["e46e434028dbb501"]]},{"id":"9a9682a2acfecabd","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT nightlapse rate interval","label":"<b>MULTI-SHOT nightlapse rate interval</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":112,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1130,"y":2020,"wires":[["3dd6a8f113a448ef","d5886ea6faada4e3"]]},{"id":"070fd589b1c93dd9","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2020,"wires":[["1a41c5900b2cf4a3","8ace46558050a206"]]},{"id":"c51716eb5e925cde","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 938 AND UniqueID < 947\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2020,"wires":[["070fd589b1c93dd9"]]},{"id":"894edf57446f49af","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2020,"wires":[["c51716eb5e925cde"]]},{"id":"1a41c5900b2cf4a3","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2080,"wires":[]},{"id":"3dd6a8f113a448ef","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2080,"wires":[]},{"id":"e1f6533949fffd25","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2020,"wires":[["9a9682a2acfecabd"]]},{"id":"8ace46558050a206","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{44}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2020,"wires":[["e1f6533949fffd25"]]},{"id":"a51471ddaf940892","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT spot meter state","label":"<b>MULTI-SHOT spot meter state</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":114,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1110,"y":2140,"wires":[["d9846e18460c8564","410a126d34cbb2a0"]]},{"id":"49c4db4a189ff358","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2140,"wires":[["2f8a68bd87f52741","9677a8aaed0c6138"]]},{"id":"e979671f291fba2d","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 948 AND UniqueID < 951\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2140,"wires":[["49c4db4a189ff358"]]},{"id":"b747b79226e7b17d","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2140,"wires":[["e979671f291fba2d"]]},{"id":"2f8a68bd87f52741","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2200,"wires":[]},{"id":"d9846e18460c8564","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2200,"wires":[]},{"id":"2b382b23387ef3a6","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2140,"wires":[["a51471ddaf940892"]]},{"id":"9677a8aaed0c6138","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{37}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2140,"wires":[["2b382b23387ef3a6"]]},{"id":"4c7d1eff008ab3f1","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT exposure time shutter","label":"<b>MULTI-SHOT exposure time shutter</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":116,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1120,"y":2260,"wires":[["1bc8b916e1dcbc1b","4253c97746ea6f9b"]]},{"id":"21ebe360e9a27ab8","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2260,"wires":[["99e0d966e49ca3c4","7960eaa76e26d97f"]]},{"id":"988609df36484074","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 951 AND UniqueID < 959\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2260,"wires":[["21ebe360e9a27ab8"]]},{"id":"33d3a9234ced0685","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2260,"wires":[["988609df36484074"]]},{"id":"99e0d966e49ca3c4","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2320,"wires":[]},{"id":"1bc8b916e1dcbc1b","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2320,"wires":[]},{"id":"1060ab614c5ed6eb","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2260,"wires":[["4c7d1eff008ab3f1"]]},{"id":"7960eaa76e26d97f","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{42}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2260,"wires":[["1060ab614c5ed6eb"]]},{"id":"819b0e92cdd1ace2","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT PT state","label":"<b>MULTI-SHOT PT state</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":118,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":2380,"wires":[["a8b4b9527f1bb119","1c1aa4ad5d40dfdc"]]},{"id":"d69b72c437815611","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2380,"wires":[["7616a6ba0dc3b5f5","9f74a0e39d0be0db"]]},{"id":"728f316798d09b62","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 959 AND UniqueID < 962\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2380,"wires":[["d69b72c437815611"]]},{"id":"1c91e2864b75fee8","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2380,"wires":[["728f316798d09b62"]]},{"id":"7616a6ba0dc3b5f5","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2440,"wires":[]},{"id":"a8b4b9527f1bb119","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2440,"wires":[]},{"id":"f7bef41d9e954f17","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2380,"wires":[["819b0e92cdd1ace2"]]},{"id":"9f74a0e39d0be0db","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{33}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2380,"wires":[["f7bef41d9e954f17"]]},{"id":"686194f207bec99f","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT PT white balance","label":"<b>MULTI-SHOT PT white balance</b>","tooltip":"(v4 or later firmware only)","place":"Select option","group":"9a6307ee14eb63d3","order":120,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1110,"y":2500,"wires":[["c4376894e3a9f232","671507a9fd5b69b9"]]},{"id":"02fc102bea98c0d7","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2500,"wires":[["5081695fb2eca285","3e4cc2bc9b953a75"]]},{"id":"40cad41bbe18f2e3","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 962 AND UniqueID < 971\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2500,"wires":[["02fc102bea98c0d7"]]},{"id":"0248b2872d996a7d","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2500,"wires":[["40cad41bbe18f2e3"]]},{"id":"5081695fb2eca285","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2560,"wires":[]},{"id":"c4376894e3a9f232","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2560,"wires":[]},{"id":"ea36d6bf4394477b","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2500,"wires":[["686194f207bec99f"]]},{"id":"3e4cc2bc9b953a75","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{41}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2500,"wires":[["ea36d6bf4394477b"]]},{"id":"2e92dff2e59a5b16","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT PT color","label":"<b>MULTI-SHOT PT color</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":122,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":2620,"wires":[["b51bb53156fa24cd","310e5fa444788212"]]},{"id":"e3e376ae4c74e843","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2620,"wires":[["f6c583faf1d3232e","23fc6de27b451f2c"]]},{"id":"e8094a7f4299476d","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 971 AND UniqueID < 974\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2620,"wires":[["e3e376ae4c74e843"]]},{"id":"3043e2859feb0f5c","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2620,"wires":[["e8094a7f4299476d"]]},{"id":"f6c583faf1d3232e","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2680,"wires":[]},{"id":"b51bb53156fa24cd","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2680,"wires":[]},{"id":"729e268448819b96","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2620,"wires":[["2e92dff2e59a5b16"]]},{"id":"23fc6de27b451f2c","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{33}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2620,"wires":[["729e268448819b96"]]},{"id":"c2bdabda91959dca","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT PT sharpness","label":"<b>MULTI-SHOT PT sharpness</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":124,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1100,"y":2740,"wires":[["ee3da4cc69373f02","88f65ab7cb8c807b"]]},{"id":"cdd478c2c6c08254","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2740,"wires":[["6400ae0d77a4746b","f60c77fae484696c"]]},{"id":"1867ae1cfa65de9e","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 974 AND UniqueID < 978\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2740,"wires":[["cdd478c2c6c08254"]]},{"id":"db9dd2cb56bea266","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2740,"wires":[["1867ae1cfa65de9e"]]},{"id":"6400ae0d77a4746b","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2800,"wires":[]},{"id":"ee3da4cc69373f02","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2800,"wires":[]},{"id":"2edb262a5a8ee8a6","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2740,"wires":[["c2bdabda91959dca"]]},{"id":"f60c77fae484696c","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{37}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2740,"wires":[["2edb262a5a8ee8a6"]]},{"id":"446ba398b419bcf1","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT PT ISO","label":"<b>MULTI-SHOT PT ISO</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":126,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":2860,"wires":[["55f3a9d45ae7c682","2b7bd4fa7119a36b"]]},{"id":"ac80b46bb5f20e30","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2860,"wires":[["79dc4a1804ca8790","26c674e95a588437"]]},{"id":"48999ddeb9b76b51","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 978 AND UniqueID < 983\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2860,"wires":[["ac80b46bb5f20e30"]]},{"id":"789cc728c7676ced","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2860,"wires":[["48999ddeb9b76b51"]]},{"id":"79dc4a1804ca8790","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":2920,"wires":[]},{"id":"55f3a9d45ae7c682","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":2920,"wires":[]},{"id":"8695f439a5f45539","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2860,"wires":[["446ba398b419bcf1"]]},{"id":"26c674e95a588437","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{31}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2860,"wires":[["8695f439a5f45539"]]},{"id":"fa1aaea33f75e0ad","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT PT exposure value","label":"<b>MULTI-SHOT PT exposure value</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":128,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1120,"y":2980,"wires":[["68de413cfc21423d","46c7ec9e9f62ddd3"]]},{"id":"716dfd3f79aa6caa","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":2980,"wires":[["55cc558ff69e1bec","ed7d5299560259f5"]]},{"id":"6333afa8ee32364f","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 983 AND UniqueID < 993\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2980,"wires":[["716dfd3f79aa6caa"]]},{"id":"50e58f413c3497b4","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":2980,"wires":[["6333afa8ee32364f"]]},{"id":"55cc558ff69e1bec","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":3040,"wires":[]},{"id":"68de413cfc21423d","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1100,"y":3040,"wires":[]},{"id":"eff88fc9c0b40e2a","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":2980,"wires":[["fa1aaea33f75e0ad"]]},{"id":"ed7d5299560259f5","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{42}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2980,"wires":[["eff88fc9c0b40e2a"]]},{"id":"87b7608849034427","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"MULTI-SHOT PT ISO minimum","label":"<b>MULTI-SHOT PT ISO minimum</b>","tooltip":"(v4 or later firmware only)","place":"Select option","group":"9a6307ee14eb63d3","order":130,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1110,"y":3100,"wires":[["ae364b433996e3b8","f576ba81d815edb8"]]},{"id":"dd1ac26e01232b4a","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":3100,"wires":[["308c1a6028f09374","e1af60676ed60afa"]]},{"id":"db99e9ec255bb5d1","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 996 AND UniqueID < 1001\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":3100,"wires":[["dd1ac26e01232b4a"]]},{"id":"b9644dd07fdb33f8","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":3100,"wires":[["db99e9ec255bb5d1"]]},{"id":"308c1a6028f09374","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":3160,"wires":[]},{"id":"ae364b433996e3b8","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":3160,"wires":[]},{"id":"f5db0ebad2ed62ec","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3100,"wires":[["87b7608849034427"]]},{"id":"e1af60676ed60afa","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{67}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3100,"wires":[["f5db0ebad2ed62ec"]]},{"id":"f75e23115ec70710","type":"ui_text","z":"dec8dfb9.8b01d8","group":"9a6307ee14eb63d3","order":103,"width":26,"height":1,"name":"Multi Shot Mode","label":"<h3>Multi Shot Mode</h3>","format":"{{msg.payload}}","layout":"col-center","className":"","x":100,"y":1480,"wires":[]},{"id":"9e337fa6dd217d65","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO default sub mode","label":"<b>PHOTO default sub mode</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":79,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1070,"y":140,"wires":[["20331bb26f2455d6","6aa29126cc109d25"]]},{"id":"ef8d030f260ae472","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":140,"wires":[["7e48926af41f6321","77ca9f71cb990e8d"]]},{"id":"f23f0ba0fb116fd7","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 846 AND UniqueID < 850\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":140,"wires":[["ef8d030f260ae472"]]},{"id":"44b2c956ed062dd2","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":140,"wires":[["f23f0ba0fb116fd7"]]},{"id":"7e48926af41f6321","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":200,"wires":[]},{"id":"20331bb26f2455d6","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":200,"wires":[]},{"id":"a175e8ce0fba4ed4","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":140,"wires":[["9e337fa6dd217d65"]]},{"id":"51f579332d332eea","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO resolution","label":"<b>PHOTO resolution</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":81,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":260,"wires":[["a547b54ae5079cb4","f3c514a9412a4488"]]},{"id":"7da4588bca15d450","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":260,"wires":[["a3eb69054cc0c4b8","ac76e7bc8023d39a"]]},{"id":"24a55b47334a0b73","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 850 AND UniqueID < 855\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":260,"wires":[["7da4588bca15d450"]]},{"id":"725387fdcbf77767","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":260,"wires":[["24a55b47334a0b73"]]},{"id":"a3eb69054cc0c4b8","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":510,"y":320,"wires":[]},{"id":"a547b54ae5079cb4","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":320,"wires":[]},{"id":"fe29b7f881ada73f","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":260,"wires":[["51f579332d332eea"]]},{"id":"ac76e7bc8023d39a","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{25}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":260,"wires":[["fe29b7f881ada73f"]]},{"id":"9b901ac227e3ffe4","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO spot meter state","label":"<b>PHOTO spot meter state</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":83,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1070,"y":380,"wires":[["4322855c1d6eea15","f7adb3bf169ed47a"]]},{"id":"76db1b86959d2d13","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":380,"wires":[["7abb81f44806cfec","7a91a8bc90166a53"]]},{"id":"c037fc2582147f17","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 859 AND UniqueID < 862\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":380,"wires":[["76db1b86959d2d13"]]},{"id":"c848f68b53d32507","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":380,"wires":[["c037fc2582147f17"]]},{"id":"7abb81f44806cfec","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":440,"wires":[]},{"id":"4322855c1d6eea15","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":440,"wires":[]},{"id":"9f33b906400ade96","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":380,"wires":[["9b901ac227e3ffe4"]]},{"id":"7a91a8bc90166a53","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{31}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":380,"wires":[["9f33b906400ade96"]]},{"id":"0c680f1a625123c5","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO exposure time shutter","label":"<b>PHOTO exposure time shutter</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":85,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1090,"y":500,"wires":[["530976e907d6bf6f","b12f8e3292daaddc"]]},{"id":"b9444b3108f3156a","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":500,"wires":[["f78f874f1ff745e0","76802777e691af63"]]},{"id":"9a4b95a3f92a098e","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 862 AND UniqueID < 869\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":500,"wires":[["b9444b3108f3156a"]]},{"id":"37e7bccafb8ec554","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":500,"wires":[["9a4b95a3f92a098e"]]},{"id":"f78f874f1ff745e0","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":560,"wires":[]},{"id":"530976e907d6bf6f","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":560,"wires":[]},{"id":"53d8309055ef1077","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":500,"wires":[["0c680f1a625123c5"]]},{"id":"76802777e691af63","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{36}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":500,"wires":[["53d8309055ef1077"]]},{"id":"b44b7eac9161e0ec","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO PT state","label":"<b>PHOTO PT state</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":87,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":620,"wires":[["319cce49bf849dc4","4c7e942cd864b97f"]]},{"id":"87ecf5e49a494c91","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":620,"wires":[["a77cd31f067e3385","5fffe28b08076b5f"]]},{"id":"7adb646725002a89","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 869 AND UniqueID < 872\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":620,"wires":[["87ecf5e49a494c91"]]},{"id":"ba62cd5d2ee26c7e","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":620,"wires":[["7adb646725002a89"]]},{"id":"a77cd31f067e3385","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":680,"wires":[]},{"id":"319cce49bf849dc4","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":680,"wires":[]},{"id":"eee03019befe4a14","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":620,"wires":[["b44b7eac9161e0ec"]]},{"id":"5fffe28b08076b5f","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{28}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":620,"wires":[["eee03019befe4a14"]]},{"id":"c72e87c72a59d9b8","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO PT white balance","label":"<b>PHOTO PT white balance</b>","tooltip":"(v4 or later firmware only)","place":"Select option","group":"9a6307ee14eb63d3","order":89,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1070,"y":740,"wires":[["f2f32f7d13693162","9904a3083f1b6e56"]]},{"id":"946aec080e8307d7","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":740,"wires":[["e037ea93c39808ba","ab9dc8f3f8f4e53d"]]},{"id":"4e54ea04afc3d4a7","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 872 AND UniqueID < 881\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":740,"wires":[["946aec080e8307d7"]]},{"id":"8d470f4b23967c22","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":740,"wires":[["4e54ea04afc3d4a7"]]},{"id":"e037ea93c39808ba","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":800,"wires":[]},{"id":"f2f32f7d13693162","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":800,"wires":[]},{"id":"5b48fb88d5a9cc03","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":740,"wires":[["c72e87c72a59d9b8"]]},{"id":"ab9dc8f3f8f4e53d","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{39}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":740,"wires":[["5b48fb88d5a9cc03"]]},{"id":"2da435926fe3c288","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO PT color","label":"<b>PHOTO PT color</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":91,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1050,"y":860,"wires":[["55e3862b08560867","96d2c7062b4d6299"]]},{"id":"832e4cfe163aa871","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":860,"wires":[["71a8df430bc8c7b9","6da26f9859c6f356"]]},{"id":"afa40c47a0dc303d","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 881 AND UniqueID < 884\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":860,"wires":[["832e4cfe163aa871"]]},{"id":"8ef354395859c5ca","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":860,"wires":[["afa40c47a0dc303d"]]},{"id":"71a8df430bc8c7b9","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":920,"wires":[]},{"id":"55e3862b08560867","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":920,"wires":[]},{"id":"97f0208de8f92545","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":860,"wires":[["2da435926fe3c288"]]},{"id":"6da26f9859c6f356","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{28}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":860,"wires":[["97f0208de8f92545"]]},{"id":"ce2ecd04408683d2","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO PT sharpness","label":"<b>PHOTO PT sharpness</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":93,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1060,"y":980,"wires":[["54126be44979ec0c","97180e815b1a0d27"]]},{"id":"f6913d3f84e45e18","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":980,"wires":[["29460f97f237322e","c5f2ffa47055a179"]]},{"id":"0eb45b4aa6782201","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 884 AND UniqueID < 888\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":980,"wires":[["f6913d3f84e45e18"]]},{"id":"3b84253341607624","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":980,"wires":[["0eb45b4aa6782201"]]},{"id":"29460f97f237322e","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1040,"wires":[]},{"id":"54126be44979ec0c","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":1040,"wires":[]},{"id":"9c39bd8af3fdeee8","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":980,"wires":[["ce2ecd04408683d2"]]},{"id":"c5f2ffa47055a179","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{32}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":980,"wires":[["9c39bd8af3fdeee8"]]},{"id":"2102531d2a34856c","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO PT ISO maximum","label":"<b>PHOTO PT ISO maximum</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":95,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":1100,"wires":[["2ce9c7ddac1149f9","65eb2ebacc239c46"]]},{"id":"b81f167be2e87efb","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1100,"wires":[["aca6322e4de207ce","d199311c1897f06e"]]},{"id":"6efb724e07d63f15","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 888 AND UniqueID < 893\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1100,"wires":[["b81f167be2e87efb"]]},{"id":"5580284372c6d342","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1100,"wires":[["6efb724e07d63f15"]]},{"id":"aca6322e4de207ce","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1160,"wires":[]},{"id":"2ce9c7ddac1149f9","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":1160,"wires":[]},{"id":"519dd61341a96605","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1100,"wires":[["2102531d2a34856c"]]},{"id":"d199311c1897f06e","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{34}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1100,"wires":[["519dd61341a96605"]]},{"id":"1bd4ab36c3e185c7","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO PT exposure value","label":"<b>PHOTO PT exposure value</b>","tooltip":"","place":"Select option","group":"9a6307ee14eb63d3","order":97,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1080,"y":1220,"wires":[["25322bfae1e6860a","a51a8ff49fff9fd8"]]},{"id":"732e8ebc0171fdc7","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1220,"wires":[["a0f3254522a6a486","f33f11d5ed82c8c1"]]},{"id":"4671dff7161e83b9","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 893 AND UniqueID < 903\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1220,"wires":[["732e8ebc0171fdc7"]]},{"id":"aa75b76025669737","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1220,"wires":[["4671dff7161e83b9"]]},{"id":"a0f3254522a6a486","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1280,"wires":[]},{"id":"25322bfae1e6860a","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":1280,"wires":[]},{"id":"b8d18d41027d4385","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1220,"wires":[["1bd4ab36c3e185c7"]]},{"id":"f33f11d5ed82c8c1","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{37}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1220,"wires":[["b8d18d41027d4385"]]},{"id":"abc934a079adbdc4","type":"ui_dropdown","z":"dec8dfb9.8b01d8","name":"PHOTO PT ISO minimum ","label":"<b>PHOTO PT ISO minimum</b>","tooltip":"(v4 or later firmware only)","place":"Select option","group":"9a6307ee14eb63d3","order":99,"width":12,"height":1,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"topic","topicType":"msg","className":"","x":1070,"y":1340,"wires":[["aea8882d795b3dd7","b5fc3a624c9fbde3"]]},{"id":"dc9fe581ccd7e151","type":"mysql","z":"dec8dfb9.8b01d8","mydb":"395f2a47.6cfaf6","name":"","x":490,"y":1340,"wires":[["488d40de43b9b045","e5394a8d17da135a"]]},{"id":"fbcbd4e66c33510b","type":"function","z":"dec8dfb9.8b01d8","name":"SELECT from YY","func":"\nmsg.topic = \"SELECT `UniqueID`, `info`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, Flag, HC, LC, Y1, Y2, DC, `14`, `15`, `16`, `17`, `18`, `19`, `20` FROM YY WHERE UniqueID > 906 AND UniqueID < 911\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1340,"wires":[["dc9fe581ccd7e151"]]},{"id":"22161a90f78004cd","type":"inject","z":"dec8dfb9.8b01d8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"true","payloadType":"bool","x":110,"y":1340,"wires":[["fbcbd4e66c33510b"]]},{"id":"488d40de43b9b045","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":490,"y":1400,"wires":[]},{"id":"aea8882d795b3dd7","type":"debug","z":"dec8dfb9.8b01d8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1080,"y":1400,"wires":[]},{"id":"ea4057c8e6f6a07b","type":"change","z":"dec8dfb9.8b01d8","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload.{info:UniqueID}","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":1340,"wires":[["abc934a079adbdc4"]]},{"id":"e5394a8d17da135a","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"const before_label = /[\\s\\S]{62}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1340,"wires":[["ea4057c8e6f6a07b"]]},{"id":"77ca9f71cb990e8d","type":"function","z":"dec8dfb9.8b01d8","name":"","func":"\nconst before_label = /[\\s\\S]{30}/;\n\nfor (let i = 0; i < msg.payload.length; i++) {\nmsg.payload[i].info = msg.payload[i].info.replace(before_label, \"\");\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":140,"wires":[["a175e8ce0fba4ed4"]]},{"id":"5f8db102507f9e0c","type":"ui_text","z":"dec8dfb9.8b01d8","group":"9a6307ee14eb63d3","order":78,"width":26,"height":1,"name":"Photo Mode","label":"<h3>Photo Mode</h3>","format":"{{msg.payload}}","layout":"col-center","className":"","x":110,"y":60,"wires":[]},{"id":"6aa29126cc109d25","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_default_sub_mode declaration","func":"global.set('UDP_YY_PHOTO_default_sub_mode',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":140,"wires":[[]]},{"id":"f3c514a9412a4488","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_resolution declaration","func":"global.set('UDP_YY_PHOTO_resolution',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1460,"y":260,"wires":[[]]},{"id":"f7adb3bf169ed47a","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_spot_meter_state declaration","func":"global.set('UDP_YY_PHOTO_spot_meter_state',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":380,"wires":[[]]},{"id":"b12f8e3292daaddc","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_exposure_time_shutter declaration","func":"global.set('UDP_YY_PHOTO_exposure_time_shutter',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":500,"wires":[[]]},{"id":"4c7e942cd864b97f","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_PT_state declaration","func":"global.set('UDP_YY_PHOTO_PT_state',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1460,"y":620,"wires":[[]]},{"id":"9904a3083f1b6e56","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_PT_white_balance declaration","func":"global.set('UDP_YY_PHOTO_PT_white_balance',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":740,"wires":[[]]},{"id":"96d2c7062b4d6299","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_PT_color declaration","func":"global.set('UDP_YY_PHOTO_PT_color',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1460,"y":860,"wires":[[]]},{"id":"97180e815b1a0d27","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_PT_sharpness declaration","func":"global.set('UDP_YY_PHOTO_PT_sharpness',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":980,"wires":[[]]},{"id":"65eb2ebacc239c46","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_PT_ISO_maximum declaration","func":"global.set('UDP_YY_PHOTO_PT_ISO_maximum',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":1100,"wires":[[]]},{"id":"a51a8ff49fff9fd8","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_PT_exposure_value declaration","func":"global.set('UDP_YY_PHOTO_PT_exposure_value',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":1220,"wires":[[]]},{"id":"b5fc3a624c9fbde3","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_PHOTO_PT_ISO_minimum declaration","func":"global.set('UDP_YY_PHOTO_PT_ISO_minimum',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":1340,"wires":[[]]},{"id":"45d206a71b6f595d","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_default_sub_mode declaration","func":"global.set('UDP_YY_MULTI-SHOT_default_sub_mode',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1510,"y":1540,"wires":[[]]},{"id":"06a360ecf90ad0de","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_resolution declaration","func":"global.set('UDP_YY_MULTI-SHOT_resolution',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":1660,"wires":[[]]},{"id":"bc3870038ab5774b","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_burst_rate declaration","func":"global.set('UDP_YY_MULTI-SHOT_burst_rate',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":1780,"wires":[[]]},{"id":"290c6fb80bd7ec44","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_timelapse_rate declaration","func":"global.set('UDP_YY_MULTI-SHOT_timelapse_rate',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":1900,"wires":[[]]},{"id":"d5886ea6faada4e3","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_nightlapse_rate_interval declaration","func":"global.set('UDP_YY_MULTI-SHOT_nightlapse_rate_interval',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1520,"y":2020,"wires":[[]]},{"id":"410a126d34cbb2a0","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_spot_meter_state declaration","func":"global.set('UDP_YY_MULTI-SHOT_spot_meter_state',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":2140,"wires":[[]]},{"id":"4253c97746ea6f9b","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_exposure_time_shutter declaration","func":"global.set('UDP_YY_MULTI-SHOT_exposure_time_shutter',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1520,"y":2260,"wires":[[]]},{"id":"1c1aa4ad5d40dfdc","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_PT_state declaration","func":"global.set('UDP_YY_MULTI-SHOT_PT_state',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":2380,"wires":[[]]},{"id":"671507a9fd5b69b9","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_PT_white_balance declaration","func":"global.set('UDP_YY_MULTI-SHOT_PT_white_balance',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1510,"y":2500,"wires":[[]]},{"id":"310e5fa444788212","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_PT_color declaration","func":"global.set('UDP_YY_MULTI-SHOT_PT_color',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":2620,"wires":[[]]},{"id":"88f65ab7cb8c807b","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_PT_sharpness declaration","func":"global.set('UDP_YY_MULTI-SHOT_PT_sharpness',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":2740,"wires":[[]]},{"id":"2b7bd4fa7119a36b","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_PT_ISO declaration","func":"global.set('UDP_YY_MULTI-SHOT_PT_ISO',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":2860,"wires":[[]]},{"id":"46c7ec9e9f62ddd3","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_PT_exposure_value declaration","func":"global.set('UDP_YY_MULTI-SHOT_PT_exposure_value',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1510,"y":2980,"wires":[[]]},{"id":"f576ba81d815edb8","type":"function","z":"dec8dfb9.8b01d8","name":"UDP_YY_MULTI-SHOT_PT_ISO_minimum declaration","func":"global.set('UDP_YY_MULTI-SHOT_PT_ISO_minimum',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":3100,"wires":[[]]},{"id":"cc4d380389879cc3","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_default_sub_mode","payloadType":"global","x":880,"y":180,"wires":[["9e337fa6dd217d65"]]},{"id":"ba99321dfabad21a","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_resolution","payloadType":"global","x":880,"y":300,"wires":[["51f579332d332eea"]]},{"id":"e8d84acab97a3ce3","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_spot_meter_state","payloadType":"global","x":880,"y":420,"wires":[["9b901ac227e3ffe4"]]},{"id":"996f24c7cb37d019","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_exposure_time_shutter","payloadType":"global","x":880,"y":540,"wires":[["0c680f1a625123c5"]]},{"id":"84d2535866958259","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_PT_state","payloadType":"global","x":880,"y":660,"wires":[["b44b7eac9161e0ec"]]},{"id":"782869f694382f54","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_PT_white_balance","payloadType":"global","x":880,"y":780,"wires":[["c72e87c72a59d9b8"]]},{"id":"46ae91cad618e74f","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_PT_color","payloadType":"global","x":880,"y":900,"wires":[["2da435926fe3c288"]]},{"id":"aa2b43428143bf4c","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_PT_sharpness","payloadType":"global","x":880,"y":1020,"wires":[["ce2ecd04408683d2"]]},{"id":"ecd69e0f7e4cfd81","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_PT_ISO_maximum","payloadType":"global","x":880,"y":1140,"wires":[["2102531d2a34856c"]]},{"id":"098909194ffd2ab4","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_PT_exposure_value","payloadType":"global","x":880,"y":1260,"wires":[["1bd4ab36c3e185c7"]]},{"id":"ae313075fc22c414","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_PHOTO_PT_ISO_minimum","payloadType":"global","x":880,"y":1380,"wires":[["abc934a079adbdc4"]]},{"id":"5ef4f42871249d58","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_default_sub_mode","payloadType":"global","x":880,"y":1580,"wires":[["f913392638a58856"]]},{"id":"c5fed03d46611e1a","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_resolution","payloadType":"global","x":880,"y":1700,"wires":[["f819a903712c0eec"]]},{"id":"341b39e226fd6db1","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_burst_rate","payloadType":"global","x":880,"y":1820,"wires":[["2b25bdc0df47c920"]]},{"id":"af19255232011c4a","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_timelapse_rate","payloadType":"global","x":880,"y":1940,"wires":[["75d6710ef81db523"]]},{"id":"13db3d7249e38862","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_nightlapse_rate_interval","payloadType":"global","x":880,"y":2060,"wires":[["9a9682a2acfecabd"]]},{"id":"a2b5f0d7ad168c64","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_spot_meter_state","payloadType":"global","x":880,"y":2180,"wires":[["a51471ddaf940892"]]},{"id":"0bdf011fc217fe66","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_exposure_time_shutter","payloadType":"global","x":880,"y":2300,"wires":[["4c7d1eff008ab3f1"]]},{"id":"88a23d48cff54c4f","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_PT_state","payloadType":"global","x":880,"y":2420,"wires":[["819b0e92cdd1ace2"]]},{"id":"88e9dba54aee8dfa","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_PT_white_balance","payloadType":"global","x":880,"y":2540,"wires":[["686194f207bec99f"]]},{"id":"846d7911e1a0415a","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_PT_color","payloadType":"global","x":880,"y":2660,"wires":[["2e92dff2e59a5b16"]]},{"id":"a3f307e5e6655739","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_PT_sharpness","payloadType":"global","x":880,"y":2780,"wires":[["c2bdabda91959dca"]]},{"id":"3867ee5ba742b686","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_PT_ISO","payloadType":"global","x":880,"y":2900,"wires":[["446ba398b419bcf1"]]},{"id":"5ea2aa0e93832ec3","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_PT_exposure_value","payloadType":"global","x":880,"y":3020,"wires":[["fa1aaea33f75e0ad"]]},{"id":"4be6be4829791109","type":"inject","z":"dec8dfb9.8b01d8","name":"restore","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"UDP_YY_MULTI-SHOT_PT_ISO_minimum","payloadType":"global","x":880,"y":3140,"wires":[["87b7608849034427"]]},{"id":"56a75a4e6068e66e","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":80,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":100,"wires":[["c2d3e25796a1a5e6","9e337fa6dd217d65"]]},{"id":"c2d3e25796a1a5e6","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":100,"wires":[["6aa29126cc109d25"]]},{"id":"24923392b487a3a2","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":82,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":220,"wires":[["cb96345157f0f084","51f579332d332eea"]]},{"id":"cb96345157f0f084","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":220,"wires":[["f3c514a9412a4488"]]},{"id":"381a426e32b181a8","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":84,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":340,"wires":[["2845063e4ecd5aaa","9b901ac227e3ffe4"]]},{"id":"2845063e4ecd5aaa","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":340,"wires":[["f7adb3bf169ed47a"]]},{"id":"14d7e0b302eaa8a0","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":86,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":460,"wires":[["4a98e66a11d58856","0c680f1a625123c5"]]},{"id":"4a98e66a11d58856","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":460,"wires":[["b12f8e3292daaddc"]]},{"id":"637a5af32e886c98","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":88,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":580,"wires":[["a3a25ebcad0cf2cc","b44b7eac9161e0ec"]]},{"id":"a3a25ebcad0cf2cc","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":580,"wires":[["4c7e942cd864b97f"]]},{"id":"65e8e7a309e6c958","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":90,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":700,"wires":[["3a5f37b9c959acfd","c72e87c72a59d9b8"]]},{"id":"3a5f37b9c959acfd","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":700,"wires":[["9904a3083f1b6e56"]]},{"id":"62d3b8732ed7079a","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":92,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":820,"wires":[["f3d874550d104641","2da435926fe3c288"]]},{"id":"f3d874550d104641","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":820,"wires":[["96d2c7062b4d6299"]]},{"id":"16535679098fb7f7","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":94,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":940,"wires":[["9f0d2804ee17e8e6","ce2ecd04408683d2"]]},{"id":"9f0d2804ee17e8e6","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":940,"wires":[["97180e815b1a0d27"]]},{"id":"942347c5b45849cc","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":96,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1060,"wires":[["9c7df3e9a5abaaf6","2102531d2a34856c"]]},{"id":"9c7df3e9a5abaaf6","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1060,"wires":[["65eb2ebacc239c46"]]},{"id":"c19cbf3259d76466","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":98,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1180,"wires":[["3f6013ab8055b87d","1bd4ab36c3e185c7"]]},{"id":"3f6013ab8055b87d","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1180,"wires":[["a51a8ff49fff9fd8"]]},{"id":"d3f8a2708f38d117","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":100,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1300,"wires":[["8ab2df4c18f13788","abc934a079adbdc4"]]},{"id":"8ab2df4c18f13788","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1300,"wires":[["b5fc3a624c9fbde3"]]},{"id":"3998b9832f98563c","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":105,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1500,"wires":[["86b4b5352af45bd8","f913392638a58856"]]},{"id":"86b4b5352af45bd8","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1500,"wires":[["45d206a71b6f595d"]]},{"id":"a79d9949dd34574d","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":107,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1620,"wires":[["c103a1e11d7de7ca","f819a903712c0eec"]]},{"id":"c103a1e11d7de7ca","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1620,"wires":[["06a360ecf90ad0de"]]},{"id":"f4484b30b1c6f455","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":109,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1740,"wires":[["3aca3d7991d6e62a","2b25bdc0df47c920"]]},{"id":"3aca3d7991d6e62a","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1740,"wires":[["bc3870038ab5774b"]]},{"id":"b55bc575a2533711","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":111,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1860,"wires":[["78effd11cc94d5ae","75d6710ef81db523"]]},{"id":"78effd11cc94d5ae","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1860,"wires":[["290c6fb80bd7ec44"]]},{"id":"d53f9d24253ad1e1","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":113,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":1980,"wires":[["b227d17cf88e4759","9a9682a2acfecabd"]]},{"id":"b227d17cf88e4759","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":1980,"wires":[["d5886ea6faada4e3"]]},{"id":"ba8b7daa17847b1d","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":115,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2100,"wires":[["aaa878731a048200","a51471ddaf940892"]]},{"id":"aaa878731a048200","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2100,"wires":[["410a126d34cbb2a0"]]},{"id":"9c7448e186f2250d","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":117,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2220,"wires":[["f16d8d168bbad7f9","4c7d1eff008ab3f1"]]},{"id":"f16d8d168bbad7f9","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2220,"wires":[["4253c97746ea6f9b"]]},{"id":"2ea6a27f6f4ebe82","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":119,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2340,"wires":[["c817bb83474ca4c9","819b0e92cdd1ace2"]]},{"id":"c817bb83474ca4c9","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2340,"wires":[["1c1aa4ad5d40dfdc"]]},{"id":"dd306bace56f156c","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":121,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2460,"wires":[["e00de35616b86885","686194f207bec99f"]]},{"id":"e00de35616b86885","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2460,"wires":[["671507a9fd5b69b9"]]},{"id":"f8ac32c1e1c31429","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":123,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2580,"wires":[["c240cd32395ae4ec","2e92dff2e59a5b16"]]},{"id":"c240cd32395ae4ec","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2580,"wires":[["310e5fa444788212"]]},{"id":"a86d39801fa2619b","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":125,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2700,"wires":[["0b5183c9e809b127","c2bdabda91959dca"]]},{"id":"0b5183c9e809b127","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2700,"wires":[["88f65ab7cb8c807b"]]},{"id":"d90cf5b283217329","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":127,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2820,"wires":[["9921d2bff7ccd7b1","446ba398b419bcf1"]]},{"id":"9921d2bff7ccd7b1","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2820,"wires":[["2b7bd4fa7119a36b"]]},{"id":"42304ce0f6f27524","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":129,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":2940,"wires":[["424645dc73d5bf6c","fa1aaea33f75e0ad"]]},{"id":"424645dc73d5bf6c","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":2940,"wires":[["46c7ec9e9f62ddd3"]]},{"id":"b6deba280738c575","type":"ui_button","z":"dec8dfb9.8b01d8","name":"","group":"9a6307ee14eb63d3","order":131,"width":1,"height":1,"passthru":false,"label":"reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":890,"y":3060,"wires":[["5841f0c608fb8d06","87b7608849034427"]]},{"id":"5841f0c608fb8d06","type":"change","z":"dec8dfb9.8b01d8","name":"not_selected","rules":[{"t":"set","p":"payload","pt":"msg","to":"not_selected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1370,"y":3060,"wires":[["f576ba81d815edb8"]]},{"id":"43f75a01.74e884","type":"inject","z":"b99a57ec.925fb8","name":"Periodically Backup","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":false,"onceDelay":"","topic":"","payloadType":"date","x":260,"y":140,"wires":[["d547483e.775438"]]},{"id":"d547483e.775438","type":"function","z":"b99a57ec.925fb8","name":"Prep data","func":"// global variables separated by semicolon to be saved\nvar globallist = \"DeviceName;DeviceWifi_PWD;OnClutchLimit;OnBrakeLimit;DecDegMsg.Lat;DecDegMsg.Long;DegMinSec_Lat_Degree;DegMinSec_Lat_Minutes;DegMinSec_Lat_Seconds;DegMinSec_Long_Degree;DegMinSec_Long_Minutes;DegMinSec_Long_Seconds;NMEA_Lat;NMEA_Long;Odroid_IP_from_GoProAP_DHCP;GoPro_IP_from_Odroid_DHCP;BLE_DeviceName;BLE_DeviceMAC;BLE_PairingSuccess;BLE_PairingSuccessTimestamp;BLE_DevicePaired;BLE_ConnectSuccess;BLE_ConnectSuccessTimestamp;BLE_DeviceConnectedTimestamp;BLE_TrustSuccess;BLE_TrustSuccessTimestamp;BLE_DeviceTrusted;BLE_DeviceTrustedTimestamp;BLE_DisconnectSuccess;BLE_DisconnectSuccessTimestamp;GoProHttpConnected;GoPro_AP_Status;GoPro_UDP_datetime_year;GoPro_UDP_datetime_month;GoPro_UDP_datetime_day;GoPro_UDP_datetime_hour;GoPro_UDP_datetime_minute;GoPro_UDP_datetime_second;UDP_YY_GLOBAL_SETTINGS_LCD_brightness;UDP_YY_GLOBAL_SETTINGS_LCD_sleep;UDP_YY_GLOBAL_SETTINGS_LCD_lock;UDP_YY_GLOBAL_SETTINGS_LCD_power;UDP_YY_GLOBAL_SETTINGS_orientation;UDP_YY_GLOBAL_SETTINGS_default_mode;UDP_YY_GLOBAL_SETTINGS_quick_capture;UDP_YY_GLOBAL_SETTINGS_LEDs;UDP_YY_GLOBAL_SETTINGS_beeps;UDP_YY_GLOBAL_SETTINGS_video_format;UDP_YY_GLOBAL_SETTINGS_OSD;UDP_YY_GLOBAL_SETTINGS_auto_power_down;UDP_YY_MAIN_MODE;UDP_YY_SUB_MODE;UDP_YY_VIDEO_DEFAULT_SUB_MODE;UDP_YY_VIDEO_MODE_4k;UDP_YY_VIDEO_MODE_2k;UDP_YY_VIDEO_MODE_1440;UDP_YY_VIDEO_MODE_1080;UDP_YY_VIDEO_MODE_960;UDP_YY_VIDEO_MODE_720;UDP_YY_VIDEO_MODE_WVGA;UDP_YY_VIDEO_+_photo;UDP_YY_VIDEO_looping;UDP_YY_VIDEO_low_light;UDP_YY_VIDEO_spot_meter;UDP_YY_VIDEO_timelapse_rate;UDP_YY_VIDEO_PT;UDP_YY_VIDEO_PT_white_balance;UDP_YY_VIDEO_PT_color;UDP_YY_VIDEO_PT_sharpness;UDP_YY_VIDEO_PT_ISO;UDP_YY_VIDEO_PT_exposure_value;UDP_YY_VIDEO_PT_exposure_time;UDP_YY_VIDEO_PT_ISO_mode;UDP_YY_PHOTO_default_sub_mode;UDP_YY_PHOTO_resolution;UDP_YY_PHOTO_spot_meter_state;UDP_YY_PHOTO_exposure_time_shutter;UDP_YY_PHOTO_PT_state;UDP_YY_PHOTO_PT_white_balance;UDP_YY_PHOTO_PT_color;UDP_YY_PHOTO_PT_sharpness;UDP_YY_PHOTO_PT_ISO_maximum;UDP_YY_PHOTO_PT_exposure_value;UDP_YY_PHOTO_PT_ISO_minimum;UDP_YY_MULTI-SHOT_default_sub_mode;UDP_YY_MULTI-SHOT_resolution;UDP_YY_MULTI-SHOT_burst_rate;UDP_YY_MULTI-SHOT_timelapse_rate;UDP_YY_MULTI-SHOT_nightlapse_rate_interval;UDP_YY_MULTI-SHOT_spot_meter_state;UDP_YY_MULTI-SHOT_exposure_time_shutter;UDP_YY_MULTI-SHOT_PT_state;UDP_YY_MULTI-SHOT_PT_white_balance;UDP_YY_MULTI-SHOT_PT_color;UDP_YY_MULTI-SHOT_PT_sharpness;UDP_YY_MULTI-SHOT_PT_ISO;UDP_YY_MULTI-SHOT_PT_exposure_value;UDP_YY_MULTI-SHOT_PT_ISO_minimum;BigTimer_ON_Time;BigTimer_OFF_Time;BigTimer_Mode;BigTimer_Manual_ON;BigTimer_Manual_OFF;TachoLimitFreq;TachoSampleRate;ThrottleSampleRate;ThrottleMeanPool;ThrottleTresholdZero;ThrottleTresholdFull;ThrottleRoundto\";\nvar mylist = globallist.split(\";\");\n\nvar outputs = [];\n\nfor (i=0; i<mylist.length; i++) {\n    outputs.push({ key : mylist[i], type: typeof global.get(mylist[i]), value: global.get(mylist[i])});\n}\n      \n      \nmsg.payload = outputs;\nreturn msg;\n\n//msg.payload=typeof global.get(\"torrent_keywords\");\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":140,"wires":[["4cb14d0.afc25b4","41dcb6bada046cf9"]]},{"id":"9cec5c0d.e6de","type":"comment","z":"b99a57ec.925fb8","name":"Save global variables","info":"","x":260,"y":40,"wires":[]},{"id":"666ca426.5be96c","type":"comment","z":"b99a57ec.925fb8","name":"Restore global variables","info":"","x":260,"y":200,"wires":[]},{"id":"4cb14d0.afc25b4","type":"file","z":"b99a57ec.925fb8","name":"","filename":"/home/odroid/nodered-globalvariables.json","appendNewline":true,"createDir":false,"overwriteFile":"true","x":870,"y":140,"wires":[[]]},{"id":"d8fa7064.9f60a","type":"file in","z":"b99a57ec.925fb8","name":"","filename":"/home/odroid/nodered-globalvariables.json","format":"utf8","allProps":false,"x":550,"y":240,"wires":[["3cdb4133.0d461e"]]},{"id":"14b4208c.99aaaf","type":"function","z":"b99a57ec.925fb8","name":"Restore","func":"var output = [];\n\nfor (var i=0; i<msg.payload.length; i++) {\n    switch (msg.payload[i].type) {\n        case 'undefined': \n            // the global variable probably had no value, nothing needs to be restored\n            output.push(msg.payload[i].key + \" is undefined.\");\n            break;\n        case 'number':\n            if (msg.payload[i].value===\"NaN\") {\n                // there is no valid value to be restored, skip this variable\n                output.push(msg.payload[i].key + \" is NaN.\");\n            } else {\n                if (msg.payload[i].value.toString().indexOf(\".\")>-1) {\n                    // the value appears to be a float\n                    global.set(msg.payload[i].key,parseFloat(msg.payload[i].value));\n                    output.push(msg.payload[i].key + \" is restored to \" + msg.payload[i].value);\n                } else {\n                    global.set(msg.payload[i].key,parseInt(msg.payload[i].value));\n                    output.push(msg.payload[i].key + \" is restored to \" + msg.payload[i].value);\n                }\n            }\n            break;\n        case 'string':\n            global.set(msg.payload[i].key,msg.payload[i].value);\n            output.push(msg.payload[i].key + \" is restored to \" + msg.payload[i].value);\n            break;\n        case 'boolean':\n            global.set(msg.payload[i].key,msg.payload[i].value===\"true\");\n            output.push(msg.payload[i].key + \" is restored to \" + msg.payload[i].value);\n            break;\n    }\n}\n\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":320,"wires":[["13dbc787.3648b8","700f64c7.16704c","3c1c5d80.84cb92","4b5389e8.7ec3f8","eabd9285.07a73","d0d41491.fa7428","b7839544.79e088","ddef5cc2.2a6c4","1f6be674ca1e7107","95593ff10b547bcc","63666ab5b775ed31","07c87704937636e1","4af02c23b6ab2b6f","719aa9fcb3337fe5","5f6c9578d0371687","edfc1da4ea5c7aa2","e5731aeb3b24ef9c","a79cd937e134867e","16863535bee7695c","8fe73a573e12ad4d","02aa0e05fe16222a","41e92b9685b73bb1","db975ce2fe718abc","b37884f413252909","5436f5e79363f788","ce62d9d0a99d3ce5","ec3818282d194096","a090926901651c2a","cc5b9eaccbcaaaf8","3c11580134f5af93","8bbb30f9d788fe6d","63158370449f05ee","b755681b51176ca9","9d93124591317c10","1493493be5e608aa","d7fc57f482dd1548","05ae271850c850a3","5e2ae9bfb37a8e86","94f1a58a11ed1d7f","cd5a435121526512","e0ec96be35bbd8d3","9af0f6e05fdbc9a2","19da686a99b5f894","0d953d6479a97a9b","0c74988855d72435","13f970c0dc993b2f","e8243a6fcd73715e","b9c4b990f6bb25e4","2804305048f9e4d0","66bbae880b898967","fcfa978f9f57c715","5907f2cf40aa0ea6","08c851fbc78acf31","c872ca8babe62c5c","603f10fd76f24f9e","78de17f99ce23d1e","9cb3f0e56db2811f","122f8645a5c3c74f","6197f3f1780e3953","630094e1b04aa697","a6e54645d1587d0f","19abbe9605a0abf3","8801faf4796e69bb","1b5691ed51368941","e9ece2fac1bc7eb4","c0c4fa0631fef132","b50cbbcfe3a08450","c7e99d282f084491","41e9d479afa1e072","2a3d1e04abd6a018","1584c8061235e7c9","165a6639973690a8","23309910cb4dade3","2e0e0d168105cce1","d99148b94d42825a","ce052d7d4328dfca","f08dd8046779b31c","3332e4247048b320","2db619c571861295","b3d856fa7f7e6e35","ee7875b421a06028","cd61965bfa676627","cad99dd39ce431fb","2c6349669dde1776","1fb7d57ef1f1588e","81ecb07ccaaeb083","9533db54092fb09c","18b9447618dde183","b04a365d672a1b82","107eb346e6530ee7","56c1f3336534351e","59d0a9496aba2b9a","b4ebf11d684f07bf","c7b11a7e194594a7","b4b4c92e38d74038","e9c2502658434942","cf5961f752574cb2","c068d1d294dcca64","923ff524272be5f6","1d3af6559ac5114f","6692732d53f13521","0a83221cabe95f1a","63e954c89229f1b2","fabfc35b8cd3a798","690951b453225265","0396cfe4e67b8b61","4988dce62dd25fb9","7e2398d4c0751a7e","25b6f6f6e8274ae1","3212545de92a46f2"]]},{"id":"3cdb4133.0d461e","type":"json","z":"b99a57ec.925fb8","name":"","property":"payload","action":"","pretty":false,"x":790,"y":240,"wires":[["14b4208c.99aaaf"]]},{"id":"13dbc787.3648b8","type":"function","z":"b99a57ec.925fb8","name":"OnClutchLimit restore","func":"msg.topic = \"OnClutchLimit\";\nmsg.payload = global.get(\"OnClutchLimit\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":540,"wires":[["fa6f14b5.9e8898"]]},{"id":"700f64c7.16704c","type":"function","z":"b99a57ec.925fb8","name":"OnBrakeLimit restore","func":"\nmsg.topic = \"OnBrakeLimit\";\nmsg.payload = global.get(\"OnBrakeLimit\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":600,"wires":[["441c4e8e.0d9c9"]]},{"id":"fa6f14b5.9e8898","type":"link out","z":"b99a57ec.925fb8","name":"Global_variable_Backup_OnCltchLimit->DB_TagSettings - OnClutchLimit","mode":"link","links":["90235181.1bd48"],"x":455,"y":540,"wires":[]},{"id":"441c4e8e.0d9c9","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_OnBrakeLimit->DB_TagSettings - OnBrakeLimit","mode":"link","links":["cabbed93.9bb77"],"x":455,"y":600,"wires":[]},{"id":"3c1c5d80.84cb92","type":"function","z":"b99a57ec.925fb8","name":"Dezimalgrad_Lat restore","func":"msg.topic = \"Dezimalgrad_Lat\";\nmsg.payload = global.get(\"Dezimalgrad_Lat\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":660,"wires":[["a7481f7.b0107e"]]},{"id":"a7481f7.b0107e","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_Dezimalgrad_Lat","mode":"link","links":["10dc739e7dce48d7"],"x":455,"y":660,"wires":[]},{"id":"4b5389e8.7ec3f8","type":"function","z":"b99a57ec.925fb8","name":"Dezimalgrad_Long restore","func":"msg.topic = \"Dezimalgrad_Long\";\nmsg.payload = global.get(\"Dezimalgrad_Long\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":720,"wires":[["6566100b.6370a"]]},{"id":"6566100b.6370a","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_Dezimalgrad_Long","mode":"link","links":["af8ed51a4a96b906"],"x":455,"y":720,"wires":[]},{"id":"eabd9285.07a73","type":"function","z":"b99a57ec.925fb8","name":"Odroid_IP_from_GoProAP_DHCP","func":"msg.topic = \"Odroid_IP_from_GoProAP_DHCP\";\nmsg.payload = global.get(\"Odroid_IP_from_GoProAP_DHCP\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1260,"wires":[["dd8532c3.a1061"]]},{"id":"dd8532c3.a1061","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Odroid_IP_from_GoProAP_DHCP","mode":"link","links":["28bf2222176037e4"],"x":495,"y":1260,"wires":[]},{"id":"d0d41491.fa7428","type":"function","z":"b99a57ec.925fb8","name":"GoPro-IP_from_Odroid-DHCP","func":"msg.topic = \"GoPro_IP_from_Odroid_DHCP\";\nmsg.payload = global.get(\"GoPro_IP_from_Odroid_DHCP\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1320,"wires":[["2dd73717.36ac78"]]},{"id":"2dd73717.36ac78","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_GoPro-IP_from_Odroid-DHCP","mode":"link","links":["8f9e4080f30fe240"],"x":495,"y":1320,"wires":[]},{"id":"b7839544.79e088","type":"function","z":"b99a57ec.925fb8","name":"BLE_DeviceName","func":"msg.topic = \"BLE_DeviceName\";\nmsg.payload = global.get(\"BLE_DeviceName\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":1380,"wires":[["95c19abc.16a1f8"]]},{"id":"95c19abc.16a1f8","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BLE_DeviceName","mode":"link","links":["0773b01366e539c3"],"x":495,"y":1380,"wires":[]},{"id":"ddef5cc2.2a6c4","type":"function","z":"b99a57ec.925fb8","name":"DeviceName restore","func":"msg.topic = \"DeviceName\";\nmsg.payload = global.get(\"DeviceName\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":420,"wires":[["639a9d50.086244"]]},{"id":"639a9d50.086244","type":"link out","z":"b99a57ec.925fb8","name":"Global_variable_Backup_DeviceName->DB_Parameter","mode":"link","links":["1206971e.cd3a59"],"x":455,"y":420,"wires":[]},{"id":"8e7e958d.ce6698","type":"inject","z":"b99a57ec.925fb8","name":"Startup","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":true,"onceDelay":"","topic":"","payloadType":"date","x":220,"y":240,"wires":[["d8fa7064.9f60a"]]},{"id":"df220a5a.3ea118","type":"comment","z":"b99a57ec.925fb8","name":"Platzhalter - ready to use","info":"","x":290,"y":3440,"wires":[]},{"id":"1f6be674ca1e7107","type":"function","z":"b99a57ec.925fb8","name":"DegMinSec_Lat_Degree restore","func":"msg.topic = \"DegMinSec_Lat_Degree\";\nmsg.payload = global.get(\"DegMinSec_Lat_Degree\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":780,"wires":[["20bdd39245962387"]]},{"id":"20bdd39245962387","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_DegMinSec_Lat_Degree","mode":"link","links":["b47db269d09e4d0a"],"x":495,"y":780,"wires":[]},{"id":"95593ff10b547bcc","type":"function","z":"b99a57ec.925fb8","name":"DegMinSec_Lat_Minutes restore","func":"msg.topic = \"DegMinSec_Lat_Minutes\";\nmsg.payload = global.get(\"DegMinSec_Lat_Minutes\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":840,"wires":[["df5aefe955974d25"]]},{"id":"df5aefe955974d25","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_DegMinSec_Lat_Minutes","mode":"link","links":["34a24617bd4916d2"],"x":495,"y":840,"wires":[]},{"id":"63666ab5b775ed31","type":"function","z":"b99a57ec.925fb8","name":"DegMinSec_Lat_Seconds restore","func":"msg.topic = \"DegMinSec_Lat_Seconds\";\nmsg.payload = global.get(\"DegMinSec_Lat_Seconds\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":900,"wires":[["2a5b957da19aa5b3"]]},{"id":"2a5b957da19aa5b3","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_DegMinSec_Lat_Seconds","mode":"link","links":["bf1231f10af93d6b"],"x":495,"y":900,"wires":[]},{"id":"07c87704937636e1","type":"function","z":"b99a57ec.925fb8","name":"DegMinSec_Long_Degree restore","func":"msg.topic = \"DegMinSec_Long_Degree\";\nmsg.payload = global.get(\"DegMinSec_Long_Degree\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":960,"wires":[["b0beab3cd4dfa0dc"]]},{"id":"b0beab3cd4dfa0dc","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_DegMinSec_Long_Degree","mode":"link","links":["8c8db49ba4f5522c"],"x":495,"y":960,"wires":[]},{"id":"4af02c23b6ab2b6f","type":"function","z":"b99a57ec.925fb8","name":"DegMinSec_Long_Minutes restore","func":"msg.topic = \"DegMinSec_Long_Minutes\";\nmsg.payload = global.get(\"DegMinSec_Long_Minutes\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1020,"wires":[["e84cb9a144849b24"]]},{"id":"e84cb9a144849b24","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_DegMinSec_Long_Minutes","mode":"link","links":["be3b73a07dd8f388"],"x":495,"y":1020,"wires":[]},{"id":"719aa9fcb3337fe5","type":"function","z":"b99a57ec.925fb8","name":"DegMinSec_Long_Seconds restore","func":"msg.topic = \"DegMinSec_Long_Seconds\";\nmsg.payload = global.get(\"DegMinSec_Long_Seconds\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1080,"wires":[["a27059a91b257dc1"]]},{"id":"a27059a91b257dc1","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_DegMinSec_Long_Seconds","mode":"link","links":["e943c065fbcee004"],"x":495,"y":1080,"wires":[]},{"id":"5f6c9578d0371687","type":"function","z":"b99a57ec.925fb8","name":"NMEA_Lat restore","func":"msg.topic = \"NMEA_Lat\";\nmsg.payload = global.get(\"NMEA_Lat\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":1140,"wires":[["a65cb628105a1f6f"]]},{"id":"edfc1da4ea5c7aa2","type":"function","z":"b99a57ec.925fb8","name":"NMEA_Long restore","func":"msg.topic = \"NMEA_Long\";\nmsg.payload = global.get(\"NMEA_Long\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":1200,"wires":[["e1eb6b5ebeaed27c"]]},{"id":"a65cb628105a1f6f","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_NMEA_Lat","mode":"link","links":["2121fb6158213ea9"],"x":495,"y":1140,"wires":[]},{"id":"e1eb6b5ebeaed27c","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_Backup_NMEA_Long","mode":"link","links":["b6292ab0f85ca8b1"],"x":495,"y":1200,"wires":[]},{"id":"41dcb6bada046cf9","type":"debug","z":"b99a57ec.925fb8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":630,"y":80,"wires":[]},{"id":"e5731aeb3b24ef9c","type":"function","z":"b99a57ec.925fb8","name":"BLE_DeviceMAC","func":"msg.topic = \"BLE_DeviceMAC\";\nmsg.payload = global.get(\"BLE_DeviceMAC\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":1420,"wires":[["01118aa8440c158d"]]},{"id":"01118aa8440c158d","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BLE_DeviceMAC","mode":"link","links":["9de3b3cce5b4aa0f"],"x":495,"y":1420,"wires":[]},{"id":"a79cd937e134867e","type":"function","z":"b99a57ec.925fb8","name":"BLE_PairingSuccess","func":"msg.topic = \"BLE_PairingSuccess\";\nmsg.payload = global.get(\"BLE_PairingSuccess\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":1480,"wires":[["c048503838c1bb5a","294d349a6644a157"]]},{"id":"c048503838c1bb5a","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BLE_PairingSuccess","mode":"link","links":["d501669af4e3bcc3","3c1247d2b7cf6a6e"],"x":495,"y":1480,"wires":[]},{"id":"16863535bee7695c","type":"function","z":"b99a57ec.925fb8","name":"BLE_PairingSuccessTimestamp","func":"msg.topic = \"BLE_PairingSuccessTimestamp\";\nmsg.payload = global.get(\"BLE_PairingSuccessTimestamp\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1540,"wires":[["09028094399acb8b"]]},{"id":"4ad0f58640984fde","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BLE_PairingSuccessTimestamp","mode":"link","links":[],"x":495,"y":1540,"wires":[]},{"id":"8fe73a573e12ad4d","type":"function","z":"b99a57ec.925fb8","name":"BLE_DevicePaired","func":"msg.topic = \"BLE_DevicePaired\";\nmsg.payload = global.get(\"BLE_DevicePaired\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":1600,"wires":[[]]},{"id":"fe84585880dba3cf","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BLE_DevicePaired","mode":"link","links":[],"x":495,"y":1600,"wires":[]},{"id":"02aa0e05fe16222a","type":"function","z":"b99a57ec.925fb8","name":"BLE_ConnectSuccess","func":"msg.topic = \"BLE_ConnectSuccess\";\nmsg.payload = global.get(\"BLE_ConnectSuccess\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":1660,"wires":[[]]},{"id":"1e316c82ec3cbd8b","type":"link out","z":"b99a57ec.925fb8","name":"","mode":"link","links":[],"x":495,"y":1660,"wires":[]},{"id":"41e92b9685b73bb1","type":"function","z":"b99a57ec.925fb8","name":"BLE_ConnectSuccessTimestamp","func":"msg.topic = \"BLE_ConnectSuccessTimestamp\";\nmsg.payload = global.get(\"BLE_ConnectSuccessTimestamp\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1720,"wires":[[]]},{"id":"48eb0e76ab31d622","type":"link out","z":"b99a57ec.925fb8","name":"","mode":"link","links":[],"x":495,"y":1720,"wires":[]},{"id":"294d349a6644a157","type":"debug","z":"b99a57ec.925fb8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":570,"y":1440,"wires":[]},{"id":"db975ce2fe718abc","type":"function","z":"b99a57ec.925fb8","name":"BLE_DeviceConnectedTimestamp","func":"msg.topic = \"BLE_DeviceConnectedTimestamp\";\nmsg.payload = global.get(\"BLE_DeviceConnectedTimestamp\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1780,"wires":[[]]},{"id":"b37884f413252909","type":"function","z":"b99a57ec.925fb8","name":"BLE_TrustSuccess","func":"msg.topic = \"BLE_TrustSuccess\";\nmsg.payload = global.get(\"BLE_TrustSuccess\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":1840,"wires":[[]]},{"id":"5436f5e79363f788","type":"function","z":"b99a57ec.925fb8","name":"BLE_TrustSuccessTimestamp","func":"msg.topic = \"BLE_TrustSuccessTimestamp\";\nmsg.payload = global.get(\"BLE_TrustSuccessTimestamp\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1900,"wires":[[]]},{"id":"ce62d9d0a99d3ce5","type":"function","z":"b99a57ec.925fb8","name":"BLE_DeviceTrusted","func":"msg.topic = \"BLE_DeviceTrusted\";\nmsg.payload = global.get(\"BLE_DeviceTrusted\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":1960,"wires":[[]]},{"id":"ec3818282d194096","type":"function","z":"b99a57ec.925fb8","name":"BLE_DeviceTrustedTimestamp","func":"msg.topic = \"BLE_DeviceTrustedTimestamp\";\nmsg.payload = global.get(\"BLE_DeviceTrustedTimestamp\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2020,"wires":[[]]},{"id":"a090926901651c2a","type":"function","z":"b99a57ec.925fb8","name":"BLE_DisconnectSuccess","func":"msg.topic = \"BLE_DisconnectSuccess\";\nmsg.payload = global.get(\"BLE_DisconnectSuccess\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":2080,"wires":[[]]},{"id":"cc5b9eaccbcaaaf8","type":"function","z":"b99a57ec.925fb8","name":"BLE_DisconnectSuccessTimestamp","func":"msg.topic = \"BLE_DisconnectSuccessTimestamp\";\nmsg.payload = global.get(\"BLE_DisconnectSuccessTimestamp\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":2140,"wires":[[]]},{"id":"0443d619bce12405","type":"link in","z":"b99a57ec.925fb8","name":"Global Variable_Backup -->BLE_Connection","links":["8b1a05bbd28e15a2"],"x":175,"y":80,"wires":[["cd837853fabe9720"]]},{"id":"cd837853fabe9720","type":"change","z":"b99a57ec.925fb8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":80,"wires":[["d547483e.775438"]]},{"id":"3c11580134f5af93","type":"function","z":"b99a57ec.925fb8","name":"GoProHttpConnected","func":"msg.topic = \"GoProHttpConnected\";\nmsg.payload = global.get(\"GoProHttpConnected\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":2200,"wires":[[]]},{"id":"8bbb30f9d788fe6d","type":"function","z":"b99a57ec.925fb8","name":"GoPro_AP_Status","func":"msg.topic = \"GoPro_AP_Status\";\nmsg.payload = global.get(\"GoPro_AP_Status\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":2260,"wires":[[]]},{"id":"63158370449f05ee","type":"function","z":"b99a57ec.925fb8","name":"DeviceWifi_PWD restore","func":"msg.topic = \"DeviceWifi_PWD\";\nmsg.payload = global.get(\"DeviceWifi_PWD\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":480,"wires":[["7ba73f0deedb6e15"]]},{"id":"7ba73f0deedb6e15","type":"link out","z":"b99a57ec.925fb8","name":"Global_variable_Backup_Wifi_PWD->DB_Parameter","mode":"link","links":["20383df41e409076"],"x":455,"y":480,"wires":[]},{"id":"09028094399acb8b","type":"debug","z":"b99a57ec.925fb8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":570,"y":1500,"wires":[]},{"id":"b755681b51176ca9","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_LCD_brightness","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_LCD_brightness\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_LCD_brightness\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":420,"wires":[[]]},{"id":"9d93124591317c10","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_LCD_sleep","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_LCD_sleep\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_LCD_sleep\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":480,"wires":[[]]},{"id":"1493493be5e608aa","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_LCD_lock","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_LCD_lock\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_LCD_lock\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":540,"wires":[[]]},{"id":"d7fc57f482dd1548","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_LCD_power","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_LCD_power\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_LCD_power\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":600,"wires":[[]]},{"id":"05ae271850c850a3","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_orientation","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_orientation\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_orientation\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":660,"wires":[[]]},{"id":"5e2ae9bfb37a8e86","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_default_mode","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_default_mode\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_default_mode\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":720,"wires":[[]]},{"id":"94f1a58a11ed1d7f","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_quick_capture","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_quick_capture\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_quick_capture\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":780,"wires":[[]]},{"id":"cd5a435121526512","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_LEDs","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_LEDs\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_LEDs\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":840,"wires":[[]]},{"id":"e0ec96be35bbd8d3","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_beeps","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_beeps\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_beeps\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":900,"wires":[[]]},{"id":"9af0f6e05fdbc9a2","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_video_format","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_video_format\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_video_format\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":960,"wires":[[]]},{"id":"19da686a99b5f894","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_OSD","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_OSD\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_OSD\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":1020,"wires":[[]]},{"id":"0d953d6479a97a9b","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_GLOBAL_SETTINGS_auto_power_down","func":"msg.topic = \"UDP_YY_GLOBAL_SETTINGS_auto_power_down\";\nmsg.payload = global.get(\"UDP_YY_GLOBAL_SETTINGS_auto_power_down\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":1080,"wires":[[]]},{"id":"0c74988855d72435","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MAIN_MODE","func":"msg.topic = \"UDP_YY_MAIN_MODE\";\nmsg.payload = global.get(\"UDP_YY_MAIN_MODE\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":950,"y":1140,"wires":[[]]},{"id":"13f970c0dc993b2f","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_SUB_MODE","func":"msg.topic = \"UDP_YY_SUB_MODE\";\nmsg.payload = global.get(\"UDP_YY_SUB_MODE\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":1200,"wires":[[]]},{"id":"e8243a6fcd73715e","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_DEFAULT_SUB_MODE","func":"msg.topic = \"UDP_YY_VIDEO_DEFAULT_SUB_MODE\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_DEFAULT_SUB_MODE\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":1260,"wires":[[]]},{"id":"b9c4b990f6bb25e4","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_MODE_4k","func":"msg.topic = \"UDP_YY_VIDEO_MODE_4k\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_MODE_4k\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":1320,"wires":[[]]},{"id":"2804305048f9e4d0","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_MODE_2k","func":"msg.topic = \"UDP_YY_VIDEO_MODE_2k\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_MODE_2k\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":1380,"wires":[[]]},{"id":"66bbae880b898967","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_MODE_1440","func":"msg.topic = \"UDP_YY_VIDEO_MODE_1440\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_MODE_1440\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":1440,"wires":[[]]},{"id":"fcfa978f9f57c715","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_MODE_1080","func":"msg.topic = \"UDP_YY_VIDEO_MODE_1080\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_MODE_1080\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":1500,"wires":[[]]},{"id":"5907f2cf40aa0ea6","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_MODE_960","func":"msg.topic = \"UDP_YY_VIDEO_MODE_960\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_MODE_960\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":1560,"wires":[[]]},{"id":"08c851fbc78acf31","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_MODE_720","func":"msg.topic = \"UDP_YY_VIDEO_MODE_720\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_MODE_720\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":1620,"wires":[[]]},{"id":"c872ca8babe62c5c","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_MODE_WVGA","func":"msg.topic = \"UDP_YY_VIDEO_MODE_WVGA\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_MODE_WVGA\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":1680,"wires":[[]]},{"id":"603f10fd76f24f9e","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_+_photo","func":"msg.topic = \"UDP_YY_VIDEO_+_photo\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_+_photo\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":1740,"wires":[[]]},{"id":"78de17f99ce23d1e","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_looping","func":"msg.topic = \"UDP_YY_VIDEO_looping\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_looping\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":950,"y":1800,"wires":[[]]},{"id":"9cb3f0e56db2811f","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_low_light","func":"msg.topic = \"UDP_YY_VIDEO_low_light\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_low_light\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":1860,"wires":[[]]},{"id":"122f8645a5c3c74f","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_spot_meter","func":"msg.topic = \"UDP_YY_VIDEO_spot_meter\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_spot_meter\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":1920,"wires":[[]]},{"id":"6197f3f1780e3953","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_timelapse_rate","func":"msg.topic = \"UDP_YY_VIDEO_timelapse_rate\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_timelapse_rate\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":1980,"wires":[[]]},{"id":"630094e1b04aa697","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT","func":"msg.topic = \"UDP_YY_VIDEO_PT\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":2040,"wires":[[]]},{"id":"a6e54645d1587d0f","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT_white_balance","func":"msg.topic = \"UDP_YY_VIDEO_PT_white_balance\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT_white_balance\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":2100,"wires":[[]]},{"id":"19abbe9605a0abf3","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT_color","func":"msg.topic = \"UDP_YY_VIDEO_PT_color\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT_color\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":2160,"wires":[[]]},{"id":"8801faf4796e69bb","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT_sharpness","func":"msg.topic = \"UDP_YY_VIDEO_PT_sharpness\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT_sharpness\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":2220,"wires":[[]]},{"id":"1b5691ed51368941","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT_ISO","func":"msg.topic = \"UDP_YY_VIDEO_PT_ISO\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT_ISO\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":2280,"wires":[[]]},{"id":"e9ece2fac1bc7eb4","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT_exposure_value","func":"msg.topic = \"UDP_YY_VIDEO_PT_exposure_value\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT_exposure_value\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":2340,"wires":[[]]},{"id":"c0c4fa0631fef132","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT_exposure_time","func":"msg.topic = \"UDP_YY_VIDEO_PT_exposure_time\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT_exposure_time\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":2400,"wires":[[]]},{"id":"b50cbbcfe3a08450","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_VIDEO_PT_ISO_mode","func":"msg.topic = \"UDP_YY_VIDEO_PT_ISO_mode\";\nmsg.payload = global.get(\"UDP_YY_VIDEO_PT_ISO_mode\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":2460,"wires":[[]]},{"id":"c7e99d282f084491","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_default_sub_mode","func":"msg.topic = \"UDP_YY_PHOTO_default_sub_mode\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_default_sub_mode\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":2520,"wires":[[]]},{"id":"41e9d479afa1e072","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_resolution","func":"msg.topic = \"UDP_YY_PHOTO_resolution\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_resolution\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":2580,"wires":[[]]},{"id":"2a3d1e04abd6a018","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_spot_meter_state","func":"msg.topic = \"UDP_YY_PHOTO_spot_meter_state\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_spot_meter_state\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":2640,"wires":[[]]},{"id":"1584c8061235e7c9","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_exposure_time_shutter","func":"msg.topic = \"UDP_YY_PHOTO_exposure_time_shutter\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_exposure_time_shutter\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":2700,"wires":[[]]},{"id":"165a6639973690a8","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_PT_state","func":"msg.topic = \"UDP_YY_PHOTO_PT_state\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_PT_state\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":2760,"wires":[[]]},{"id":"23309910cb4dade3","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_PT_white_balance","func":"msg.topic = \"UDP_YY_PHOTO_PT_white_balance\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_PT_white_balance\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":2820,"wires":[[]]},{"id":"2e0e0d168105cce1","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_PT_color","func":"msg.topic = \"UDP_YY_PHOTO_PT_color\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_PT_color\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":2880,"wires":[[]]},{"id":"d99148b94d42825a","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_PT_sharpness","func":"msg.topic = \"UDP_YY_PHOTO_PT_sharpness\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_PT_sharpness\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":2940,"wires":[[]]},{"id":"ce052d7d4328dfca","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_PT_ISO_maximum","func":"msg.topic = \"UDP_YY_PHOTO_PT_ISO_maximum\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_PT_ISO_maximum\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":3000,"wires":[[]]},{"id":"f08dd8046779b31c","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_PT_exposure_value","func":"msg.topic = \"UDP_YY_PHOTO_PT_exposure_value\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_PT_exposure_value\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":3060,"wires":[[]]},{"id":"3332e4247048b320","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_PHOTO_PT_ISO_minimum","func":"msg.topic = \"UDP_YY_PHOTO_PT_ISO_minimum\";\nmsg.payload = global.get(\"UDP_YY_PHOTO_PT_ISO_minimum\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":3120,"wires":[[]]},{"id":"2db619c571861295","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_default_sub_mode","func":"msg.topic = \"UDP_YY_MULTI-SHOT_default_sub_mode\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_default_sub_mode\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":3180,"wires":[[]]},{"id":"b3d856fa7f7e6e35","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_resolution","func":"msg.topic = \"UDP_YY_MULTI-SHOT_resolution\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_resolution\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":3240,"wires":[[]]},{"id":"ee7875b421a06028","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_burst_rate","func":"msg.topic = \"UDP_YY_MULTI-SHOT_burst_rate\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_burst_rate\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":3300,"wires":[[]]},{"id":"cd61965bfa676627","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_timelapse_rate","func":"msg.topic = \"UDP_YY_MULTI-SHOT_timelapse_rate\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_timelapse_rate\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":3360,"wires":[[]]},{"id":"cad99dd39ce431fb","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_nightlapse_rate_interval","func":"msg.topic = \"UDP_YY_MULTI-SHOT_nightlapse_rate_interval\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_nightlapse_rate_interval\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":3420,"wires":[[]]},{"id":"2c6349669dde1776","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_spot_meter_state","func":"msg.topic = \"UDP_YY_MULTI-SHOT_spot_meter_state\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_spot_meter_state\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":3480,"wires":[[]]},{"id":"1fb7d57ef1f1588e","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_exposure_time_shutter","func":"msg.topic = \"UDP_YY_MULTI-SHOT_exposure_time_shutter\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_exposure_time_shutter\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":3540,"wires":[[]]},{"id":"81ecb07ccaaeb083","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_PT_state","func":"msg.topic = \"UDP_YY_MULTI-SHOT_PT_state\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_PT_state\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":3600,"wires":[[]]},{"id":"9533db54092fb09c","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_PT_white_balance","func":"msg.topic = \"UDP_YY_MULTI-SHOT_PT_white_balance\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_PT_white_balance\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":3660,"wires":[[]]},{"id":"18b9447618dde183","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_PT_color","func":"msg.topic = \"UDP_YY_MULTI-SHOT_PT_color\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_PT_color\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":3720,"wires":[[]]},{"id":"b04a365d672a1b82","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_PT_sharpness","func":"msg.topic = \"UDP_YY_MULTI-SHOT_PT_sharpness\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_PT_sharpness\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":3780,"wires":[[]]},{"id":"107eb346e6530ee7","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_PT_ISO","func":"msg.topic = \"UDP_YY_MULTI-SHOT_PT_ISO\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_PT_ISO\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":3840,"wires":[[]]},{"id":"56c1f3336534351e","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_PT_exposure_value","func":"msg.topic = \"UDP_YY_MULTI-SHOT_PT_exposure_value\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_PT_exposure_value\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":3900,"wires":[[]]},{"id":"59d0a9496aba2b9a","type":"function","z":"b99a57ec.925fb8","name":"UDP_YY_MULTI-SHOT_PT_ISO_minimum","func":"msg.topic = \"UDP_YY_MULTI-SHOT_PT_ISO_minimum\";\nmsg.payload = global.get(\"UDP_YY_MULTI-SHOT_PT_ISO_minimum\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":3960,"wires":[[]]},{"id":"b4ebf11d684f07bf","type":"function","z":"b99a57ec.925fb8","name":"GoPro_UDP_datetime_year","func":"msg.topic = \"GoPro_UDP_datetime_year\";\nmsg.payload = global.get(\"GoPro_UDP_datetime_year\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":2320,"wires":[[]]},{"id":"c7b11a7e194594a7","type":"function","z":"b99a57ec.925fb8","name":"GoPro_UDP_datetime_month","func":"msg.topic = \"GoPro_UDP_datetime_month\";\nmsg.payload = global.get(\"GoPro_UDP_datetime_month\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2380,"wires":[[]]},{"id":"b4b4c92e38d74038","type":"function","z":"b99a57ec.925fb8","name":"GoPro_UDP_datetime_day","func":"msg.topic = \"GoPro_UDP_datetime_day\";\nmsg.payload = global.get(\"GoPro_UDP_datetime_day\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":2440,"wires":[[]]},{"id":"e9c2502658434942","type":"function","z":"b99a57ec.925fb8","name":"GoPro_UDP_datetime_hour","func":"msg.topic = \"GoPro_UDP_datetime_hour\";\nmsg.payload = global.get(\"GoPro_UDP_datetime_hour\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":2500,"wires":[[]]},{"id":"cf5961f752574cb2","type":"function","z":"b99a57ec.925fb8","name":"GoPro_UDP_datetime_minute","func":"msg.topic = \"GoPro_UDP_datetime_minute\";\nmsg.payload = global.get(\"GoPro_UDP_datetime_minute\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2560,"wires":[[]]},{"id":"c068d1d294dcca64","type":"function","z":"b99a57ec.925fb8","name":"GoPro_UDP_datetime_second","func":"msg.topic = \"GoPro_UDP_datetime_second\";\nmsg.payload = global.get(\"GoPro_UDP_datetime_second\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2620,"wires":[[]]},{"id":"923ff524272be5f6","type":"function","z":"b99a57ec.925fb8","name":"BigTimer_ON_Time","func":"msg.topic = \"BigTimer_ON_Time\";\nmsg.payload = global.get(\"BigTimer_ON_Time\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":2680,"wires":[["091d8b207b631689"]]},{"id":"1d3af6559ac5114f","type":"function","z":"b99a57ec.925fb8","name":"BigTimer_OFF_Time","func":"msg.topic = \"BigTimer_OFF_Time\";\nmsg.payload = global.get(\"BigTimer_OFF_Time\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":2740,"wires":[["d1f72aa77a7c9207"]]},{"id":"091d8b207b631689","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BigTimer_ON_Time","mode":"link","links":["cef5f1096f979e88"],"x":495,"y":2680,"wires":[]},{"id":"d1f72aa77a7c9207","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BigTimer_OFF_Time","mode":"link","links":["5f79d9f9a4f4981c"],"x":495,"y":2740,"wires":[]},{"id":"6692732d53f13521","type":"function","z":"b99a57ec.925fb8","name":"BigTimer_Mode","func":"msg.topic = \"BigTimer_Mode\";\nmsg.payload = global.get(\"BigTimer_Mode\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":2800,"wires":[["876c7094e64e43aa"]]},{"id":"876c7094e64e43aa","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BigTimer_Mode","mode":"link","links":["abbe06f972e76250"],"x":495,"y":2800,"wires":[]},{"id":"0a83221cabe95f1a","type":"function","z":"b99a57ec.925fb8","name":"BigTimer_Manual_ON","func":"msg.topic = \"BigTimer_Manual_ON\";\nmsg.payload = global.get(\"BigTimer_Manual_ON\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":2860,"wires":[["d243992b52cda3da"]]},{"id":"63e954c89229f1b2","type":"function","z":"b99a57ec.925fb8","name":"BigTimer_Manual_OFF","func":"msg.topic = \"BigTimer_Manual_OFF\";\nmsg.payload = global.get(\"BigTimer_Manual_OFF\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":2920,"wires":[["a39d09c292c4a825"]]},{"id":"a39d09c292c4a825","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BigTimer_Manual_OFF","mode":"link","links":["1188147a65910edb"],"x":495,"y":2920,"wires":[]},{"id":"d243992b52cda3da","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_BigTimer_Manual_ON","mode":"link","links":["782043043e0ca5aa"],"x":495,"y":2860,"wires":[]},{"id":"fabfc35b8cd3a798","type":"function","z":"b99a57ec.925fb8","name":"TachoLimitFreq","func":"msg.topic = \"TachoLimitFreq\";\nmsg.payload = global.get(\"TachoLimitFreq\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":2980,"wires":[["2bf6b059a44f68e7"]]},{"id":"2bf6b059a44f68e7","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_TachoLimitFreq","mode":"link","links":["7ae6cabdb03d9135"],"x":495,"y":2980,"wires":[]},{"id":"690951b453225265","type":"function","z":"b99a57ec.925fb8","name":"TachoSampleRate","func":"msg.topic = \"TachoSampleRate\";\nmsg.payload = global.get(\"TachoSampleRate\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":3040,"wires":[["e55b425fae4c3db4"]]},{"id":"e55b425fae4c3db4","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_TachoSampleRate","mode":"link","links":["8565398c18600180"],"x":495,"y":3040,"wires":[]},{"id":"0396cfe4e67b8b61","type":"function","z":"b99a57ec.925fb8","name":"ThrottleTresholdZero","func":"msg.topic = \"ThrottleTresholdZero\";\nmsg.payload = global.get(\"ThrottleTresholdZero\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":3160,"wires":[["6fb067314de6aa0a"]]},{"id":"4988dce62dd25fb9","type":"function","z":"b99a57ec.925fb8","name":"ThrottleTresholdFull","func":"msg.topic = \"ThrottleTresholdFull\";\nmsg.payload = global.get(\"ThrottleTresholdFull\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":3220,"wires":[["0d5b935c5d6cf3c5"]]},{"id":"6fb067314de6aa0a","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_ThrottleTresholdZero","mode":"link","links":["4c1e21d3e481e1e4"],"x":495,"y":3160,"wires":[]},{"id":"0d5b935c5d6cf3c5","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_ThrottleTresholdFull","mode":"link","links":["59b4361568637eb4"],"x":495,"y":3220,"wires":[]},{"id":"7e2398d4c0751a7e","type":"function","z":"b99a57ec.925fb8","name":"ThrottleMeanPool","func":"msg.topic = \"ThrottleMeanPool\";\nmsg.payload = global.get(\"ThrottleMeanPool\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":3280,"wires":[["5472c676fe192b95"]]},{"id":"5472c676fe192b95","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_ThrottleMeanPool","mode":"link","links":["9a93be396ff9fd4e"],"x":495,"y":3280,"wires":[]},{"id":"25b6f6f6e8274ae1","type":"function","z":"b99a57ec.925fb8","name":"ThrottleSampleRate","func":"msg.topic = \"ThrottleSampleRate\";\nmsg.payload = global.get(\"ThrottleSampleRate\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":3100,"wires":[["f0feaf5085f2b18f"]]},{"id":"f0feaf5085f2b18f","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_ThrottleSampleRate","mode":"link","links":["b9ec0b7d6caa6de0"],"x":495,"y":3100,"wires":[]},{"id":"3212545de92a46f2","type":"function","z":"b99a57ec.925fb8","name":"ThrottleRoundto","func":"msg.topic = \"ThrottleRoundto\";\nmsg.payload = global.get(\"ThrottleRoundto\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":3340,"wires":[["d0c9175a73a64b64"]]},{"id":"d0c9175a73a64b64","type":"link out","z":"b99a57ec.925fb8","name":"Global_Variable_ThrottleRoundto","mode":"link","links":["a520f815dde078aa"],"x":495,"y":3340,"wires":[]},{"id":"5480ab27ebc4e107","type":"file in","z":"90509ca450600ee8","name":"","filename":"/home/odroid/.node-red/settings.js","format":"utf8","allProps":false,"x":440,"y":120,"wires":[["06b46f14d210640f","f545de99371b7ac8"]]},{"id":"d5ce9bc47ebd28ef","type":"inject","z":"90509ca450600ee8","name":"Periodically Backup","props":[{"p":"payload"}],"repeat":"60","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":160,"y":120,"wires":[["5480ab27ebc4e107"]]},{"id":"06b46f14d210640f","type":"debug","z":"90509ca450600ee8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":60,"wires":[]},{"id":"f545de99371b7ac8","type":"function","z":"90509ca450600ee8","name":"BackUp Environmental Variables","func":"\n\n//get the global variables\n\nvar value1 = global.get('Odroid_IP_from_GoProAP_DHCP');\nvar value2 = global.get('GoPro_IP_from_Odroid_DHCP');\n//TachoSampleRate wird zwar in ms im Dashboard erfasst (globalVariable), muss aber für den Injekt node im Flow: Tachopsignal in (s) zur Verfügung stehen\nvar value3 = global.get('TachoSampleRate')/1000;\n//ThrottleSampleRate wird zwar in ms im Dashboard erfasst (globalVariable), muss aber für den Injekt node im Flow: WISH in (s) zur Verfügung stehen\nvar value4 = global.get('ThrottleSampleRate')/1000; \n\n//var value3 = global.get('');; \n\n\n//grep the entries of the Env_Var from settings.js\n\nvar regex1 = /process.env.Odroid_IP_from_GoProAP_DHCP=.*;/;\nvar regex2 = /process.env.GoPro_IP_from_Odroid_DHCP=.*;/;\nvar regex3 = /process.env.TachoSampleRate=.*;/;\nvar regex4 = /process.env.ThrottleSampleRate=.*;/;\n\n//var regex3 = /process.env.{{your variable}}=.*;/;\n\n//replace old value of Env_Var by acutal value of Global Variable and set as String\nmsg.payload = msg.payload.replace(regex1, \"process.env.Odroid_IP_from_GoProAP_DHCP='\"+value1+\"';\");\nmsg.payload = msg.payload.replace(regex2, \"process.env.GoPro_IP_from_Odroid_DHCP='\"+value2+\"';\");\n\n//replace old value of Env_Var by acutal value of Global Variable and set as Integer\nmsg.payload = msg.payload.replace(regex3, \"process.env.TachoSampleRate=\"+value3+\";\");\nmsg.payload = msg.payload.replace(regex4, \"process.env.ThrottleSampleRate=\"+value4+\";\");\n\n//msg.payload = msg.payload.replace(regex3, \"process.env.{{your variable}}='\"+value3+\"';\");\n\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":120,"wires":[["194a6a294bd966a5","822594d82940f1e7"]],"info":"\n\nGlobale Variablen werden im Dashboard declared und der Value dort gesetzt ODER unter BLE_Connection declared und dort gesetzt.\n\nHier, in diesem Node, werden die Values der globalen Variablen, wenn gewünscht, auf Environmentalvariablen übertragen, damit diese Values für Node Properties dynamisch genutzt werden können\n\nDie Environmental Variables müssen händisch in der Settings.js declared werden.\n(ein 2. Satz ist schon vorbereitet)\n\nDas Restore aus der settings.js erfolgt bei jedem restart von Nodered automatisch."},{"id":"194a6a294bd966a5","type":"debug","z":"90509ca450600ee8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":990,"y":60,"wires":[]},{"id":"822594d82940f1e7","type":"file","z":"90509ca450600ee8","name":"","filename":"/home/odroid/.node-red/settings.js","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":440,"y":200,"wires":[[]]},{"id":"56fa40d09e67637c","type":"comment","z":"90509ca450600ee8","name":"Global_Variabel --> Environmental_Variable_Backup","info":"","x":250,"y":60,"wires":[]},{"id":"e169cfc5e475473a","type":"comment","z":"90509ca450600ee8","name":"beachte Comment zu node: BackUp Environmental Variables","info":"","x":840,"y":200,"wires":[]},{"id":"37cf70db749f5281","type":"link in","z":"90509ca450600ee8","name":"Global_Variabel - Environmental_Variable_Backup --> BLE_Connection","links":["bc92a374f77dd847"],"x":175,"y":180,"wires":[["5480ab27ebc4e107"]]},{"id":"c0a9fedc.8f367","type":"exec","z":"247347a2.a3c6b8","command":"ps aux | grep node-red | grep -v grep","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"node red grep node","x":310,"y":200,"wires":[["a5b9ede3.09cd8","ff2b139d.ab0de"],[],[]]},{"id":"9447fad1.70ee18","type":"inject","z":"247347a2.a3c6b8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":120,"y":220,"wires":[["c0a9fedc.8f367"]]},{"id":"a5b9ede3.09cd8","type":"debug","z":"247347a2.a3c6b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":510,"y":160,"wires":[]},{"id":"ff2b139d.ab0de","type":"function","z":"247347a2.a3c6b8","name":"find PID","func":"\nvar pid = msg.payload.match(/\\s{3,}\\d{2,}\\s{1,}/);\nmsg.payload = pid.toString().trim();\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":240,"wires":[["ce9e2eeb.3e186","e8769b26.e6a028"]]},{"id":"ce9e2eeb.3e186","type":"debug","z":"247347a2.a3c6b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":160,"wires":[]},{"id":"e8769b26.e6a028","type":"exec","z":"247347a2.a3c6b8","command":"kill PID","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":680,"y":240,"wires":[[],[],[]]},{"id":"dc879c9e6332c04d","type":"link in","z":"247347a2.a3c6b8","name":"Restart Nodered","links":["06ef18289835543a"],"x":75,"y":160,"wires":[["c0a9fedc.8f367"]]},{"id":"ac4bb41e.953978","type":"subflow:ff56ed00.f5dfb","z":"55f61d10.869814","name":"","x":560,"y":200,"wires":[]},{"id":"a0bf07a4.3d9e18","type":"inject","z":"55f61d10.869814","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":330,"y":200,"wires":[["ac4bb41e.953978"]]},{"id":"ea0e929f.597","type":"inject","z":"2eac6958.c8b676","name":"Show youtube video","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"http://192.168.6.4:10000","payloadType":"str","x":250,"y":220,"wires":[["576275e3.77cc1c"]]},{"id":"576275e3.77cc1c","type":"ui_template","z":"2eac6958.c8b676","d":true,"group":"e9a45c1a.a0da","name":"Youtube_screen","order":1,"width":26,"height":26,"format":"\n\n\n\n    \n// div style=\"width: 100%; height: 100%;\"\n\n<div class=\"ignore-css\"; style=\"width: 1000px !important;\">\n    <iframe id=\"iframe\" src=\"\" ></iframe>\n</div>\n\n<script> \n    (function(scope) {\n        // Watch for messages being send to this template node\n        scope.$watch('msg', function (msg) {      \n            if (msg) {\n\n                var iframe = document.getElementById('iframe');\n                iframe.src = msg.payload; // + \"?autoplay=1;start=2\";\n            }       \n         }); \n    })(scope); \n</script>\n\n\n\n","storeOutMessages":false,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","className":"","x":440,"y":220,"wires":[["d7be396da08a9d04"]]},{"id":"d7be396da08a9d04","type":"debug","z":"2eac6958.c8b676","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":620,"y":260,"wires":[]},{"id":"3d69148cb2eca6fc","type":"ui_template","z":"2eac6958.c8b676","group":"e9a45c1a.a0da","name":"Youtube_screen","order":2,"width":"0","height":"0","format":"\n\n\n\n<!-- \n<div style=\"overflow: hidden; width: 1330px; height: 540px;\">-->\n<div style=\"overflow: hidden; width: 100%; height: 100%;\">\n    <iframe src=\"http://192.168.6.4:10000\" style=\"overflow: hidden; width: 1024px; height: 560px;\"></iframe>\n</div>    \n    <!-- <iframe src=\"http://192.168.6.4:10000\" frameborder=\"0\" style=\"overflow:hidden;height:200%;width:100%\" height=\"200%\" width=\"100%\"></iframe>\n\n\n<!-- </div>-->\n\n\n","storeOutMessages":false,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","className":"","x":440,"y":320,"wires":[[]]},{"id":"984497c93f75afa4","type":"inject","z":"2eac6958.c8b676","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Select option","payloadType":"str","x":350,"y":460,"wires":[["8ac70d9e22937441"]]},{"id":"8ac70d9e22937441","type":"ui_dropdown","z":"2eac6958.c8b676","name":"","label":"","tooltip":"","place":"Select option","group":"2d4fe667.28f8ba","order":17,"width":0,"height":0,"passthru":false,"multiple":false,"options":[{"label":"Select option","value":"Select option","type":"str"},{"label":"1","value":1,"type":"num"},{"label":"2","value":2,"type":"num"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":600,"y":460,"wires":[["957a2c2cb8b43298","a4b1838a606cbe1d"]]},{"id":"957a2c2cb8b43298","type":"change","z":"2eac6958.c8b676","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Select option","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":520,"wires":[["8ac70d9e22937441"]]},{"id":"a4b1838a606cbe1d","type":"switch","z":"2eac6958.c8b676","name":"","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"Select option","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":750,"y":460,"wires":[["b04a3be90420c7e0"]]},{"id":"b04a3be90420c7e0","type":"debug","z":"2eac6958.c8b676","name":"debug 113","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":930,"y":460,"wires":[]},{"id":"223ec2f0.12030e","type":"rpi-gpio in","z":"cbd4e407.b4f008","name":"","pin":"17","intype":"tri","debounce":"25","read":false,"bcm":true,"x":150,"y":320,"wires":[["2a2239d.9026ec6"]]},{"id":"2a2239d.9026ec6","type":"function","z":"cbd4e407.b4f008","name":"setTimeStamp_State","func":"var ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nmsg.payload = (new Date(Date.now() - offset)).toISOString()+ \"_\" + msg.payload;\n\nreturn msg;\n\n\n//orig\n\n//var ts = new Date();\n//msg.payload = ts.toISOString() + \"_\" + msg.payload;\n////msg.payload = ts.toUTCString() + \"_\" + msg.payload;\n//return msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":200,"wires":[["205f2f8a.5761c"]]},{"id":"180ebe72.0c8fd2","type":"buffer-array","z":"cbd4e407.b4f008","name":"Buffer_Value_Pair","bufferLen":"2","startWhenFilled":true,"x":710,"y":200,"wires":[["fcea03cc.903ce"]]},{"id":"fcea03cc.903ce","type":"function","z":"cbd4e407.b4f008","name":"Timespan_Calculation","func":"//var NewMsg = {Timestamp1:0, Timestamp2:0, Timestamp3:0, Timestamp4:0, Signal1:\"0\", Signal2:\"0\", Signal3:\"0\", Signal4:\"0\", Timespan1:0, Timespan2:0, Timespan3:0}\nvar NewMsg = {Topic: \"ACTUALVALUE\", Timestamp1:0, Timestamp2:0, Signal1:\"0\", Signal2:\"0\", Timespan:0}\n\nvar d1 = Date.parse(msg.payload[0][0]);\nvar d2 = Date.parse(msg.payload[1][0]);\n//var d3 = Date.parse(msg.payload[2][0]);\n//var d4 = Date.parse(msg.payload[3][0]);\n  \nNewMsg.Timestamp1= d1;\nNewMsg.Timestamp2= d2;\n//NewMsg.Timestamp3= d3;\n//NewMsg.Timestamp4= d4;\n\nNewMsg.Signal1 = msg.payload[0][1];\nNewMsg.Signal2 = msg.payload[1][1];\n//NewMsg.Signal3 = msg.payload[2][1];\n//NewMsg.Signal4 = msg.payload[3][1];\n\nNewMsg.Timespan = (d2 - d1) / 1000;\n//NewMsg.Timespan2 = (d3 - d2) / 1000;\n//NewMsg.Timespan3 = (d4 - d3) / 1000;\n\nreturn NewMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":200,"wires":[["ed30331e.3f492","4b12c337.aee19c","aed9b2de.bbcde"]]},{"id":"205f2f8a.5761c","type":"function","z":"cbd4e407.b4f008","name":"SPLIT","func":"msg.payload = msg.payload.split(\"_\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":200,"wires":[["180ebe72.0c8fd2"]]},{"id":"4279113e.562d4","type":"http request","z":"cbd4e407.b4f008","name":"","method":"PUT","ret":"txt","paytoqs":false,"url":"http://10.5.5.9/gp/gpControl/command/storage/tag_moment","tls":"","persist":false,"proxy":"","authType":"","x":910,"y":260,"wires":[[]]},{"id":"ed30331e.3f492","type":"switch","z":"cbd4e407.b4f008","name":"IGNITION_on","property":"Signal1","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":360,"y":260,"wires":[["90c334d.8181ac8"]]},{"id":"90c334d.8181ac8","type":"function","z":"cbd4e407.b4f008","name":"PassLimit","func":"var NewMsg = {payload: 0, OnBrakeTimespan: 0, OnBrakeLimit: 0};\nvar Settings = global.get('OnBrakeLimit');\n\n//NewMsg.OnClutchLimit = Settings.OnClutchLimit;\nNewMsg.OnBrakeLimit = Settings;\nNewMsg.OnBrakeTimespan = msg.Timespan;\n    \nvar PassActualValue  = 1;\nvar BlockActualValue = 0;\n\n    if( msg.Timespan >= Settings)\n     {\n       NewMsg.payload = PassActualValue;\n     }\n    else\n     {\n       NewMsg.payload = BlockActualValue;\n     }\n\nreturn NewMsg;\n\n//var NewMsg = {payload: 0, OnBrakeTimespan: 0, OnBrakeLimit: 0};\n//var Settings = global.get(\"SpaceStarSettings\");\n\n//NewMsg.OnBrakeLimit = Settings.OnBrakeLimit;\n//NewMsg.OnBrakeTimespan = msg.Timespan;\n    \n//var PassActualValue  = 1;\n//var BlockActualValue = 0;\n\n  //  if( msg.Timespan >= Settings.OnBrakeLimit)\n  //   {\n   //    NewMsg.payload = PassActualValue;\n   //  }\n  //  else\n  //   {\n  //     NewMsg.payload = BlockActualValue;\n  //   }\n\n//return NewMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":260,"wires":[["c85dca.e796a238","b1a8d171.27cd5"]]},{"id":"c85dca.e796a238","type":"switch","z":"cbd4e407.b4f008","name":"GreaterThanZero","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":710,"y":260,"wires":[["4279113e.562d4"]]},{"id":"b1a8d171.27cd5","type":"debug","z":"cbd4e407.b4f008","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":570,"y":320,"wires":[]},{"id":"5a9013d8.86ffcc","type":"inject","z":"cbd4e407.b4f008","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":170,"y":180,"wires":[["2a2239d.9026ec6"]]},{"id":"8afe42c4.02ed9","type":"inject","z":"cbd4e407.b4f008","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":180,"y":240,"wires":[["2a2239d.9026ec6"]]},{"id":"4b12c337.aee19c","type":"link out","z":"cbd4e407.b4f008","name":"BRAKE","mode":"link","links":[],"x":945,"y":340,"wires":[]},{"id":"aed9b2de.bbcde","type":"debug","z":"cbd4e407.b4f008","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":300,"wires":[]},{"id":"48b1a0d8b9e93113","type":"exec","z":"d995685759e9a253","command":"timeout 2 cat < /dev/ttyACM0","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Read Raw GPS Data","x":460,"y":160,"wires":[["f7486f94b9ec09ba","c989e9b315967020"],[],[]]},{"id":"0f7d058477a0e9f5","type":"inject","z":"d995685759e9a253","name":"","props":[{"p":"timestamp","v":"","vt":"date"},{"p":"latitude","v":"","vt":"str"},{"p":"longitude","v":"","vt":"str"},{"p":"payload"}],"repeat":"3","crontab":"","once":true,"onceDelay":0.1,"topic":"","payloadType":"str","x":210,"y":160,"wires":[["48b1a0d8b9e93113"]]},{"id":"f7486f94b9ec09ba","type":"debug","z":"d995685759e9a253","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":770,"y":100,"wires":[]},{"id":"c989e9b315967020","type":"function","z":"d995685759e9a253","name":"parse GPS coordinates","func":"\nglobal.set('Dezimalgrad_Lat',msg.payload);\n\n// const reg_GPGGA = /GPGGA\\X.\\n$/; //unused\nconst reg_before_GPGGA = /[\\s\\S]*GPGGA/;\nconst reg_after_GPGGA = /GPGSA[\\s\\S]*/;\nconst reg_before_latitude = /\\w,\\d,/;\nconst reg_timestamp = /\\.\\d{3}Z/;\n\nvar NMEAMsg = {Topic: \"NMEA\", timestamp: 0, Lat:0, Long:0}\nvar DegMinSecMsg = {Topic: \"DMS\", timestamp: 0, Lat_Degree:0, Lat_Minutes:0, Lat_Seconds:0, Long_Degree:0, Long_Minutes:0, Long_Seconds:0}\nvar DecDegMsg = {Topic: \"DG\", timestamp: 0, Lat:0, Long:0}\n\nvar degree_lat = 0;\nvar minutes_lat = 0;\nvar seconds_lat = 0;\nvar degree_long = 0;\nvar minutes_long = 0;\nvar seconds_long = 0;\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\nvar GPGGA_output = \"1\";\n\n\n\n//parsing friendly timestamp\nNMEAMsg.timestamp = ((new Date(Date.now() - offset)).toISOString()).replace(\"T\", \" \").replace(reg_timestamp,\"\");\nDegMinSecMsg.timestamp = NMEAMsg.timestamp;\nDecDegMsg.timestamp = NMEAMsg.timestamp;\n\n\n\n\n//Parsing NMEA-Format in ddmm,mmmm out of raw-data\nGPGGA_output = msg.payload.replace(reg_before_GPGGA, \"GPGGA\").replace(reg_after_GPGGA, \"\");\nNMEAMsg.Lat = GPGGA_output.substr(16,10);\nNMEAMsg.Long = GPGGA_output.substr(30,10);\n \n //setting Global Variables\n    global.set('NMEA_Lat', NMEAMsg.Lat);\n    global.set('NMEA_Long', NMEAMsg.Long);\n\n\n//Parsing DegMinSec - Format in gg mm ss,sss out of NMEA-Format\nDegMinSecMsg.Lat_Degree = NMEAMsg.Lat.substr(0,2);\nDegMinSecMsg.Lat_Minutes = NMEAMsg.Lat.substr(2,2);\nDegMinSecMsg.Lat_Seconds = ((NMEAMsg.Lat.substr(4,5))*60).toFixed(3);\nDegMinSecMsg.Long_Degree = NMEAMsg.Long.substr(0,2);\nDegMinSecMsg.Long_Minutes = NMEAMsg.Long.substr(2,2);\nDegMinSecMsg.Long_Seconds = ((NMEAMsg.Long.substr(4,5))*60).toFixed(3);\n \n    //setting Global Variables\n    global.set('DegMinSec_Lat_Degree', DegMinSecMsg.Lat_Degree);\n    global.set('DegMinSec_Lat_Minutes', DegMinSecMsg.Lat_Minutes);\n    global.set('DegMinSec_Lat_Seconds', DegMinSecMsg.Lat_Seconds);\n    global.set('DegMinSec_Long_Degree', DegMinSecMsg.Long_Degree);\n    global.set('DegMinSec_Long_Minutes', DegMinSecMsg.Long_Minutes);\n    global.set('DegMinSec_Long_Seconds', DegMinSecMsg.Long_Seconds);\n\n\n//Parsing DG - Format in dd,dddddd out of DegMinSec-Format\ndegree_lat = Number(DegMinSecMsg.Lat_Degree);\nminutes_lat = Number(DegMinSecMsg.Lat_Minutes);\nseconds_lat = Number(DegMinSecMsg.Lat_Seconds);\ndegree_long = Number(DegMinSecMsg.Long_Degree);\nminutes_long = Number(DegMinSecMsg.Long_Minutes);\nseconds_long = Number(DegMinSecMsg.Long_Seconds);\n\nDecDegMsg.Lat = (degree_lat + minutes_lat/60 + seconds_lat/3600).toFixed(6);\nDecDegMsg.Long = (degree_long + minutes_long/60 + seconds_long/3600).toFixed(6);\n    \n    //setting Global Variables\n    global.set('Dezimalgrad_Lat', DecDegMsg.Lat);\n    global.set('Dezimalgrad_Long', DecDegMsg.Long);\n\nreturn [NMEAMsg,DegMinSecMsg,DecDegMsg];\n\n","outputs":3,"noerr":0,"initialize":"","finalize":"","libs":[],"x":790,"y":160,"wires":[[],[],["e1518f926f6f7eb2","19d44031b9ac3461"]]},{"id":"19d44031b9ac3461","type":"debug","z":"d995685759e9a253","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1010,"y":100,"wires":[]},{"id":"e1518f926f6f7eb2","type":"link out","z":"d995685759e9a253","name":"GPS_DecDeg","mode":"link","links":["c9f216694f74788a"],"x":985,"y":220,"wires":[]},{"id":"d02a57fbbb85f7af","type":"status","z":"d995685759e9a253","name":"","scope":["48b1a0d8b9e93113"],"x":420,"y":240,"wires":[["4f3370645b9a4010"]]},{"id":"4f3370645b9a4010","type":"debug","z":"d995685759e9a253","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":700,"y":320,"wires":[]},{"id":"83bcaacafe176083","type":"exec","z":"5aa5a8f03826d123","command":"python test.py /dev/ttyACM1","addpay":"","append":"","useSpawn":"false","timer":"0.5","winHide":false,"oldrc":false,"name":"Read Raw myAHRS Data","x":310,"y":120,"wires":[["46a6cd1d1df953d1"],[],[]]},{"id":"9daeae541d2f1513","type":"inject","z":"5aa5a8f03826d123","d":true,"name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":120,"wires":[["83bcaacafe176083"]]},{"id":"46a6cd1d1df953d1","type":"function","z":"5aa5a8f03826d123","name":"parse myAHRS data","func":"\nconst reg_before_dataset = /START[\\s\\S]*72\\n##\\s/;\nconst reg_after_dataset = /\\n##[\\s\\S]*/;\nconst roll_before = /[\\S]*\\s/;\nconst pitch_before = /[\\s\\S]*pitch\\s/;\nconst yaw_before = /[\\s\\S]*yaw\\s/;\nconst ax_before = /[\\s\\S]*ax\\s/;\nconst ay_before = /[\\s\\S]*ay\\s/;\nconst az_before = /[\\s\\S]*az\\s/;\nconst gx_before = /[\\s\\S]*gx\\s/;\nconst gy_before = /[\\s\\S]*gy\\s/;\nconst gz_before = /[\\s\\S]*gz\\s/;\nconst mx_before = /[\\s\\S]*mx\\s/;\nconst my_before = /[\\s\\S]*my\\s/;\nconst mz_before = /[\\s\\S]*mz\\s/;\nconst temp_before = /[\\s\\S]*temp\\s/;\nconst after = /,\\s[\\s\\S]*/;\nconst reg_timestamp = /\\.\\d{3}Z/;\n\nvar myAHRSMsg = {dataset: 0, Topic: \"myAHRS\", timestamp: 0, roll:0, pitch:0, yaw:0, ax:0, ay:0, az:0, gx:0, gy:0, gz:0, mx:0, my:0, mz:0, temp:0}\n\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\n\n//parsing friendly timestamp\nmyAHRSMsg.timestamp = ((new Date(Date.now() - offset)).toISOString()).replace(\"T\", \" \").replace(reg_timestamp,\"\");\n\n\n//Parsing 1 dataset out of raw-data\nmyAHRSMsg.dataset = msg.payload.replace(reg_before_dataset, \"\").replace(reg_after_dataset, \"\");\n\n//Parsing parameters out of dataset\nmyAHRSMsg.roll = myAHRSMsg.dataset.replace(roll_before, \"\").replace(after, \"\");\nmyAHRSMsg.pitch = myAHRSMsg.dataset.replace(pitch_before, \"\").replace(after, \"\");\nmyAHRSMsg.yaw = myAHRSMsg.dataset.replace(pitch_before, \"\").replace(after, \"\");\nmyAHRSMsg.ax = myAHRSMsg.dataset.replace(ax_before, \"\").replace(after, \"\");\nmyAHRSMsg.ay = myAHRSMsg.dataset.replace(ay_before, \"\").replace(after, \"\");\nmyAHRSMsg.az = myAHRSMsg.dataset.replace(az_before, \"\").replace(after, \"\");\nmyAHRSMsg.gx = myAHRSMsg.dataset.replace(gx_before, \"\").replace(after, \"\");\nmyAHRSMsg.gy = myAHRSMsg.dataset.replace(gy_before, \"\").replace(after, \"\");\nmyAHRSMsg.gz = myAHRSMsg.dataset.replace(gz_before, \"\").replace(after, \"\");\nmyAHRSMsg.mx = myAHRSMsg.dataset.replace(mx_before, \"\").replace(after, \"\");\nmyAHRSMsg.my = myAHRSMsg.dataset.replace(my_before, \"\").replace(after, \"\");\nmyAHRSMsg.mz = myAHRSMsg.dataset.replace(mz_before, \"\").replace(after, \"\");\n    // adapt incorrect temperature value (self found function: tacc = Tahrs*0,75 - 6)\nmyAHRSMsg.temp = (((myAHRSMsg.dataset.replace(temp_before, \"\").replace(after, \"\"))*0.75)-6).toFixed(1);\n\nreturn myAHRSMsg;\n\n","outputs":3,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":120,"wires":[["375def6260756d8a","c2385e8766c88819"],[],[]]},{"id":"375def6260756d8a","type":"debug","z":"5aa5a8f03826d123","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":750,"y":120,"wires":[]},{"id":"c2385e8766c88819","type":"link out","z":"5aa5a8f03826d123","name":"AHRS","mode":"link","links":["45257d0bc62128b9"],"x":715,"y":200,"wires":[]},{"id":"b0abf3b37be19c88","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl power on","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetoothctl ON","x":400,"y":300,"wires":[["060e085fbcc0f603"],[],["1459a40b135bab37","8d83c3aa7d8b40bd"]]},{"id":"060e085fbcc0f603","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":300,"wires":[]},{"id":"9e8226a38cbeec68","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":100,"y":300,"wires":[["b0abf3b37be19c88"]]},{"id":"7d9648ea5def65ac","type":"exec","z":"dbfdd28e.d60f","d":true,"command":"bluetoothctl power off","addpay":"","append":"","useSpawn":"false","timer":"20","winHide":false,"oldrc":false,"name":"Bluetoothctl OFF","x":390,"y":3980,"wires":[["2544d996a6e0f9cd"],[],[]]},{"id":"2544d996a6e0f9cd","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":710,"y":3980,"wires":[]},{"id":"ba75e6514d951229","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":160,"y":3980,"wires":[["7d9648ea5def65ac"]]},{"id":"39b9a9958d52b9c4","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl --timeout 3 scan on | grep NEW | grep GoPro | awk '{print \"NEW\", $2, $4, $5, \":\", $3}'","addpay":"","append":"","useSpawn":"false","timer":"0","winHide":false,"oldrc":false,"name":"Find New Gopro","x":400,"y":960,"wires":[["0195d3e9c79192d5","81cc8dcf40a95761"],["bac6b870d59916c5"],["77af31ccc077f582"]]},{"id":"0195d3e9c79192d5","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":920,"wires":[]},{"id":"e1ac804ee6dfb56f","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":100,"y":960,"wires":[["39b9a9958d52b9c4"]]},{"id":"03d51a855c69f103","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl scan off","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetoothctl Discovery OFF","x":420,"y":4420,"wires":[["0489f9149f39c5b3"],[],[]]},{"id":"0489f9149f39c5b3","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":690,"y":4420,"wires":[]},{"id":"9b3abc5e912cda22","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":150,"y":4420,"wires":[["03d51a855c69f103"]]},{"id":"5b99c2a38427ff16","type":"exec","z":"dbfdd28e.d60f","command":"sudo service bluetooth restart","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetooth.service restart","x":430,"y":200,"wires":[[],[],["265066646aa0d3a3","b0abf3b37be19c88"]]},{"id":"e4357c7353e5b4d7","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":100,"y":200,"wires":[["5b99c2a38427ff16"]]},{"id":"265066646aa0d3a3","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":180,"wires":[]},{"id":"c87eba8d88eed687","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl paired-devices","addpay":"","append":"","useSpawn":"false","timer":"2","winHide":false,"oldrc":false,"name":"Bluetoothctl Paired-Devices","x":440,"y":4640,"wires":[["a9888028a83ce38a"],[],[]]},{"id":"a9888028a83ce38a","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":710,"y":4640,"wires":[]},{"id":"9d97c99403edb9e4","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":170,"y":4640,"wires":[["c87eba8d88eed687"]]},{"id":"c1e987d04acc226a","type":"exec","z":"dbfdd28e.d60f","command":"kill `ps aux | grep bluetoothctl | grep -v grep | awk '{print $2}'`","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"bluetoothctl scan off","x":400,"y":4260,"wires":[["f2908d4ce1f59cc4"],[],[]]},{"id":"351f0e91ddc118fd","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":160,"y":4260,"wires":[["c1e987d04acc226a"]]},{"id":"f2908d4ce1f59cc4","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":670,"y":4260,"wires":[]},{"id":"bac6b870d59916c5","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":960,"wires":[]},{"id":"77af31ccc077f582","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1000,"wires":[]},{"id":"dc3cda8043f95ae9","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl paired-devices","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetoothctl paired-devices","x":440,"y":2500,"wires":[["e68c7b80be5d2c21","1b93b0417c25d221"],[],["1712e315ed049a07"]]},{"id":"f1cd36493f8d6f69","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl scan on","addpay":"","append":"","useSpawn":"true","timer":"0","winHide":false,"oldrc":false,"name":"Bluetoothctl Discovery ON","x":430,"y":4100,"wires":[["19640a848c06f709"],["2a9d6a8c622585a2"],["48a24760a1db4709"]]},{"id":"19640a848c06f709","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":4040,"wires":[]},{"id":"372eecd27be83f6d","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":180,"y":4100,"wires":[["f1cd36493f8d6f69"]]},{"id":"2a9d6a8c622585a2","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":4080,"wires":[]},{"id":"48a24760a1db4709","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":4120,"wires":[]},{"id":"f664e078bd8491b2","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"kill","v":"","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":170,"y":4160,"wires":[["f1cd36493f8d6f69"]]},{"id":"fce729d290727240","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"20","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":2500,"wires":[["dc3cda8043f95ae9"]]},{"id":"e68c7b80be5d2c21","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":2480,"wires":[]},{"id":"1712e315ed049a07","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":2520,"wires":[]},{"id":"60e3a6dec38d35b4","type":"function","z":"dbfdd28e.d60f","name":"BLE_DeviceName und BLE_DeviceMAC declaration from paired-devices","func":"\n\n\nconst before_DeviceName = /[\\s\\S]{25}/;\nconst before_DeviceMac = /[\\s\\S]{7}/;\nconst after_DeviceMac = / GoPro[\\s\\S]*\\n/;\nconst after_DeviceName = /\\n/;\n\nBLE_DeviceName = msg.payload.replace(before_DeviceName, \"\").replace(after_DeviceName, \"\");\nBLE_DeviceMAC = msg.payload.replace(before_DeviceMac, \"\").replace(after_DeviceMac, \"\");\n\nmsg.payload = BLE_DeviceName\nglobal.set('BLE_DeviceName',BLE_DeviceName);\nmsg.topic = BLE_DeviceMAC\nglobal.set('BLE_DeviceMAC',BLE_DeviceMAC);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":2620,"wires":[["db7089999af7e01f"]]},{"id":"db7089999af7e01f","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":2620,"wires":[]},{"id":"81cc8dcf40a95761","type":"function","z":"dbfdd28e.d60f","name":"BLE_DeviceName und BLE_DeviceMAC declaration from new devices","func":"\n\n\nconst before_DeviceName = /[\\s\\S]{11}/;\nconst before_DeviceMAC = /[\\s\\S]{24}/;\nconst after_DeviceName = /\\s:[\\s\\S]*/;\nconst after_DeviceMAC = /\\n/;\n\nBLE_DeviceName = msg.payload.replace(before_DeviceName, \"\").replace(after_DeviceName, \"\");\nBLE_DeviceMAC = msg.payload.replace(before_DeviceMAC, \"\").replace(after_DeviceMAC, \"\");\n\nmsg.payload = BLE_DeviceName;\nglobal.set('BLE_DeviceName',BLE_DeviceName);\nmsg.topic = BLE_DeviceMAC;\nglobal.set('BLE_DeviceMAC',BLE_DeviceMAC);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":1040,"wires":[["022d9d2be1638d83","429855333cb2e5ea"]]},{"id":"022d9d2be1638d83","type":"debug","z":"dbfdd28e.d60f","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1080,"wires":[]},{"id":"44a65827159274ec","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl scan on","addpay":"","append":"","useSpawn":"false","timer":"5","winHide":false,"oldrc":false,"name":"Bluetoothctl Discovery ON","x":410,"y":4340,"wires":[["7a10fa2e762df601"],[],[]]},{"id":"7a10fa2e762df601","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":690,"y":4340,"wires":[]},{"id":"79a1d3c6f5f46e62","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":150,"y":4340,"wires":[["44a65827159274ec"]]},{"id":"832f98bf6aba316a","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl remove ${BLE_DeviceMAC}","addpay":"","append":"","useSpawn":"false","timer":"5","winHide":false,"oldrc":false,"name":"Bluetoothctl Remove","x":440,"y":4840,"wires":[["ebfc2c4124436764"],["7e82ed127a2a93dd"],["685b3178cefe9974"]]},{"id":"ebfc2c4124436764","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4800,"wires":[]},{"id":"f4cde9c46172e31f","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":140,"y":4840,"wires":[["832f98bf6aba316a"]]},{"id":"685b3178cefe9974","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4880,"wires":[]},{"id":"7e82ed127a2a93dd","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4840,"wires":[]},{"id":"1002f0eee33e4a88","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl info ${BLE_DeviceMAC}","addpay":"","append":"","useSpawn":"false","timer":"5","winHide":false,"oldrc":false,"name":"Bluetoothctl info","x":420,"y":4720,"wires":[["fea046d11b70fd8f"],["89039baa9acaa42f"],["bbcb1396a6260fc7"]]},{"id":"fea046d11b70fd8f","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4680,"wires":[]},{"id":"532d0bc9194ee52f","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":140,"y":4720,"wires":[["1002f0eee33e4a88"]]},{"id":"bbcb1396a6260fc7","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4760,"wires":[]},{"id":"89039baa9acaa42f","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4720,"wires":[]},{"id":"e2775642bcdaa43e","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl trust ${BLE_DeviceMAC}","addpay":"","append":"","useSpawn":"false","timer":"5","winHide":false,"oldrc":false,"name":"Bluetoothctl Trust","x":430,"y":4560,"wires":[["3a9842334501f4a3"],["7cbe312b2123dc0a"],["df9519ec6b8ccbd6"]]},{"id":"3a9842334501f4a3","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":690,"y":4520,"wires":[]},{"id":"aa8792689236beb8","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":140,"y":4580,"wires":[["e2775642bcdaa43e"]]},{"id":"df9519ec6b8ccbd6","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4620,"wires":[]},{"id":"7cbe312b2123dc0a","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":4580,"wires":[]},{"id":"b156afbaaa18c0d1","type":"function","z":"dbfdd28e.d60f","name":"BLE_PairingSuccess and BLE_PairingSuccessTimestamp declaration","func":"\n\nconst reg = /\\.\\d{3}Z/;\nconst before_PairingSuccess = /[\\s\\S]*Paired: /;\nconst after_PairingSuccess = /\\n/;\n\nBLE_PairingSuccess = msg.payload.toString().replace(before_PairingSuccess, \"\").replace(after_PairingSuccess, \"\");\n\nmsg.payload = BLE_PairingSuccess;\nglobal.set('BLE_PairingSuccess',BLE_PairingSuccess);\n\n\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\n\nBLE_PairingSuccessTimestamp = new Date(msg.topic - offset).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = BLE_PairingSuccessTimestamp;\n\nglobal.set('BLE_PairingSuccessTimestamp',BLE_PairingSuccessTimestamp);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":1280,"wires":[["00b8d0d921353f94","30fe85515f19f975","4f2fbe0762cc8384"]]},{"id":"00b8d0d921353f94","type":"debug","z":"dbfdd28e.d60f","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1400,"wires":[]},{"id":"e76bebafc7223605","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl info","addpay":"payload","append":"| grep Paired:","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetoothctl Info Paired Device","x":450,"y":2740,"wires":[["c8d556dcb866e309","bf58dda1b9f75f30"],[],["66cd4a7708a62c49"]]},{"id":"2b464af7ae54d501","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"Paired","payload":"BLE_DeviceMAC","payloadType":"global","x":150,"y":2740,"wires":[["e76bebafc7223605"]]},{"id":"c8d556dcb866e309","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":2720,"wires":[]},{"id":"66cd4a7708a62c49","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":2760,"wires":[]},{"id":"bf58dda1b9f75f30","type":"function","z":"dbfdd28e.d60f","name":"BLE_DevicePaired from Info paired-device","func":"\n\n\nconst before_DevicePaired = /[\\s\\S]{9}/;\nconst after_DevicePaired  = /\\n/;\n\nBLE_DevicePaired = msg.payload.replace(before_DevicePaired, \"\").replace(after_DevicePaired, \"\");\n\nmsg.payload = BLE_DevicePaired\nglobal.set('BLE_DevicePaired',BLE_DevicePaired);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":2820,"wires":[["8361cd6641bc8d5f"]]},{"id":"8361cd6641bc8d5f","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":2820,"wires":[]},{"id":"589414f7eb8a5c3f","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl trust","addpay":"payload","append":"| grep trust","useSpawn":"false","timer":"0","winHide":false,"oldrc":false,"name":"Bluetoothctl trust","x":410,"y":1440,"wires":[["451232986ad88b0b","bc82fb56ce6d622e"],["7c9de926bf36eb07"],["58189fe6996c8a9a"]]},{"id":"451232986ad88b0b","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1460,"wires":[]},{"id":"180884bc6b8dd5f2","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":1440,"wires":[["589414f7eb8a5c3f"]]},{"id":"7c9de926bf36eb07","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1500,"wires":[]},{"id":"58189fe6996c8a9a","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1540,"wires":[]},{"id":"bc82fb56ce6d622e","type":"function","z":"dbfdd28e.d60f","name":"BLE_TrustSuccess and BLE_ TrustSuccessTimestamp","func":"\n\nconst reg = /\\.\\d{3}Z/;\nconst before_TrustSuccess = /[\\s\\S]{27}trust /;\n//const before_DeviceMac = /[\\s\\S]{24}/;\n//const after_DeviceConnected = /\\n/;\nconst after_TrustSuccess = /\\n/;\n\nBLE_TrustSuccess = msg.payload.replace(before_TrustSuccess, \"\").replace(after_TrustSuccess, \"\");\nmsg.payload = BLE_TrustSuccess;\nglobal.set('BLE_TrustSuccess',BLE_TrustSuccess);\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nBLE_TrustSuccessTimestamp = new Date(msg.topic - offset).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = BLE_TrustSuccessTimestamp;\nglobal.set('BLE_TrustSuccessTimestamp',BLE_TrustSuccessTimestamp);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1520,"wires":[["d107c2caddce7eed","932df7fb5078567b","e5f46fb4b0a37e06"]]},{"id":"d107c2caddce7eed","type":"debug","z":"dbfdd28e.d60f","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1580,"wires":[]},{"id":"27863fe6a44e0ced","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl info","addpay":"payload","append":"| grep Connected:","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetoothctl Info Paired Device","x":450,"y":3360,"wires":[["a10dfd268a708d96","c1665837a8f3bb0b"],[],["f0ef918db6ea68da"]]},{"id":"46a850c8f13f7c17","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"Connected","payload":"BLE_DeviceMAC","payloadType":"global","x":150,"y":3360,"wires":[["27863fe6a44e0ced"]]},{"id":"a10dfd268a708d96","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":3340,"wires":[]},{"id":"f0ef918db6ea68da","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":3380,"wires":[]},{"id":"c1665837a8f3bb0b","type":"function","z":"dbfdd28e.d60f","name":"BLE_DeviceConnected from Info paired-device","func":"\n\nconst reg = /\\.\\d{3}Z/;\nconst before_DeviceConnected = /[\\s\\S]{12}/;\nconst after_DeviceConnected  = /\\n/;\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nBLE_DeviceConnected = msg.payload.replace(before_DeviceConnected, \"\").replace(after_DeviceConnected, \"\");\n\nmsg.payload = BLE_DeviceConnected\nglobal.set('BLE_DeviceConnected',BLE_DeviceConnected);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":3440,"wires":[["5f4a2125cff06216"]]},{"id":"5f4a2125cff06216","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":3440,"wires":[]},{"id":"36950a8c4c3a676c","type":"switch","z":"dbfdd28e.d60f","name":"","property":"BLE_DeviceConnected","propertyType":"global","rules":[{"t":"eq","v":"yes","vt":"str"},{"t":"eq","v":"no","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":3540,"wires":[["bfb4cbfb0a6fc404"],["a9747aec13342980"]]},{"id":"c1583ffe0183edef","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":3520,"wires":[["36950a8c4c3a676c"]]},{"id":"bfb4cbfb0a6fc404","type":"change","z":"dbfdd28e.d60f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":3520,"wires":[["cda34c45e76eb59f"]]},{"id":"a9747aec13342980","type":"change","z":"dbfdd28e.d60f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":3560,"wires":[["cda34c45e76eb59f"]]},{"id":"cda34c45e76eb59f","type":"buffer-array","z":"dbfdd28e.d60f","name":"Buffer_Value_Pair","bufferLen":"2","startWhenFilled":true,"x":410,"y":3620,"wires":[["64161d6b46ef5f0d","9cf735ed17b7156f"]]},{"id":"9cf735ed17b7156f","type":"function","z":"dbfdd28e.d60f","name":"BLE_DeviceConnectedTimestamp","func":"\n\nconst reg = /\\.\\d{3}Z/;\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\n\nmsg.topic = new Date(msg.topic - offset).toISOString().replace(\"T\", \" \").replace(reg, \"\");\n\n\nif (msg.payload[0] + msg.payload[1] == 3) {\nglobal.set('BLE_DeviceConnectedTimestamp',msg.topic);\nmsg.payload = global.get('BLE_DeviceConnectedTimestamp');\n}else {\n  msg.payload = global.get('BLE_DeviceConnectedTimestamp');\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":3680,"wires":[["096f7d1209f438e2"]]},{"id":"64161d6b46ef5f0d","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":810,"y":3620,"wires":[]},{"id":"096f7d1209f438e2","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":810,"y":3680,"wires":[]},{"id":"aec71ea8db4599a5","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl connect","addpay":"payload","append":"| grep Connection","useSpawn":"false","timer":"0","winHide":false,"oldrc":false,"name":"Bluetoothctl connect","x":420,"y":1920,"wires":[["d6e06dd79f0eb0b5","bfc49a6f0225fdb6"],["e35581dbdffbbfba"],["55ef53b3b1280a07"]]},{"id":"d6e06dd79f0eb0b5","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1840,"wires":[]},{"id":"2fdfc7f5656b05cc","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"BLE_DeviceMAC","payloadType":"global","x":140,"y":1920,"wires":[["aec71ea8db4599a5"]]},{"id":"e35581dbdffbbfba","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1880,"wires":[]},{"id":"55ef53b3b1280a07","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1920,"wires":[]},{"id":"bfc49a6f0225fdb6","type":"function","z":"dbfdd28e.d60f","name":"BLE_ConnectSuccess and BLE_ ConnectSuccessTimestamp","func":"\n\nconst reg = /\\.\\d{3}Z/;\nconst before_ConnectSuccess = /Connection /;\n//const before_DeviceMac = /[\\s\\S]{24}/;\n//const after_DeviceConnected = /\\n/;\nconst after_ConnectSuccess = /\\n/;\n\nBLE_ConnectSuccess = msg.payload.replace(before_ConnectSuccess, \"\").replace(after_ConnectSuccess, \"\");\nmsg.payload = BLE_ConnectSuccess;\nglobal.set('BLE_ConnectSuccess',BLE_ConnectSuccess);\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nBLE_ConnectSuccessTimestamp = new Date(msg.topic - offset).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = BLE_ConnectSuccessTimestamp;\nglobal.set('BLE_ConnectSuccessTimestamp',BLE_ConnectSuccessTimestamp);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":2000,"wires":[["21bc1f7f2c424caa","f6848d4872a8bb3f"]]},{"id":"21bc1f7f2c424caa","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1980,"wires":[]},{"id":"5c7240eb96c196da","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl info","addpay":"payload","append":"| grep Trusted:","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetoothctl Info Paired Device","x":450,"y":2920,"wires":[["c9ee21f5da459eaa","9f32eb44bb048333"],[],["b577938d19731fd3"]]},{"id":"0a3ebbd0e8f836f6","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"timestamp","v":"","vt":"date"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"Trusted","payload":"BLE_DeviceMAC","payloadType":"global","x":150,"y":2920,"wires":[["5c7240eb96c196da"]]},{"id":"c9ee21f5da459eaa","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":2900,"wires":[]},{"id":"b577938d19731fd3","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":2940,"wires":[]},{"id":"9f32eb44bb048333","type":"function","z":"dbfdd28e.d60f","name":"BLE_DeviceTrusted from Info paired-device","func":"\n\nconst reg = /\\.\\d{3}Z/;\nconst before_DeviceTrusted = /[\\s\\S]{10}/;\nconst after_DeviceTrusted  = /\\n/;\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nBLE_DeviceTrusted = msg.payload.replace(before_DeviceTrusted, \"\").replace(after_DeviceTrusted, \"\");\n\nmsg.payload = BLE_DeviceTrusted\nglobal.set('BLE_DeviceTrusted',BLE_DeviceTrusted);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":3000,"wires":[["c1a91b2de078cf42"]]},{"id":"c1a91b2de078cf42","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":3000,"wires":[]},{"id":"067da54616163685","type":"switch","z":"dbfdd28e.d60f","name":"","property":"BLE_DeviceTrusted","propertyType":"global","rules":[{"t":"eq","v":"yes","vt":"str"},{"t":"eq","v":"no","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":3100,"wires":[["bc5e496cc068a2f9"],["219d035d9db3e717"]]},{"id":"93e7d93d9f7af5c2","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":90,"y":3100,"wires":[["067da54616163685"]]},{"id":"bc5e496cc068a2f9","type":"change","z":"dbfdd28e.d60f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":3080,"wires":[["a506802543e32ef8"]]},{"id":"219d035d9db3e717","type":"change","z":"dbfdd28e.d60f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":3120,"wires":[["a506802543e32ef8"]]},{"id":"a506802543e32ef8","type":"buffer-array","z":"dbfdd28e.d60f","name":"Buffer_Value_Pair","bufferLen":"2","startWhenFilled":true,"x":410,"y":3180,"wires":[["48154e943cb7832f","ff160365382636a0"]]},{"id":"ff160365382636a0","type":"function","z":"dbfdd28e.d60f","name":"BLE_DeviceTrustedTimestamp","func":"\n\nconst reg = /\\.\\d{3}Z/;\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\n\nmsg.topic = new Date(msg.topic - offset).toISOString().replace(\"T\", \" \").replace(reg, \"\");\n\n\nif (msg.payload[0] + msg.payload[1] == 3) {\nglobal.set('BLE_DeviceTrustedTimestamp',msg.topic);\nmsg.payload = global.get('BLE_DeviceTrustedTimestamp');\n}else {\n  msg.payload = global.get('BLE_DeviceTrustedTimestamp');\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":3240,"wires":[["9657eae3aacd79aa"]]},{"id":"48154e943cb7832f","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":3180,"wires":[]},{"id":"9657eae3aacd79aa","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":3240,"wires":[]},{"id":"4ea62f1dea08b4bb","type":"link in","z":"dbfdd28e.d60f","name":"BLE_Connection_Bluetoothctl connect","links":["c51b3d19f0477af1","f3d94cd7a2ba6db6"],"x":55,"y":1860,"wires":[["c0dae1f18e52bef6"]]},{"id":"4dc7ba57f5086c13","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl disconnect","addpay":"payload","append":"| grep disconnected","useSpawn":"false","timer":"0","winHide":false,"oldrc":false,"name":"Bluetoothctl disconnect","x":430,"y":2240,"wires":[["0806ca58ba6ecafa","d9e09202cf3d7819"],["1ab5ec49f545abe3"],["679138c87c2d24af"]]},{"id":"0806ca58ba6ecafa","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":2180,"wires":[]},{"id":"1ab5ec49f545abe3","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":2220,"wires":[]},{"id":"679138c87c2d24af","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":2260,"wires":[]},{"id":"d9e09202cf3d7819","type":"function","z":"dbfdd28e.d60f","name":"BLE_DisconnectSuccess and BLE_ DisconnectSuccessTimestamp","func":"\n\nconst reg = /\\.\\d{3}Z/;\nconst before_DisconnectSuccess = /Successful /;\n//const before_DeviceMac = /[\\s\\S]{24}/;\n//const after_DeviceConnected = /\\n/;\nconst after_DisconnectSuccess = /\\n/;\n\nBLE_DisconnectSuccess = msg.payload.replace(before_DisconnectSuccess, \"\").replace(after_DisconnectSuccess, \"\");\nmsg.payload = BLE_DisconnectSuccess;\nglobal.set('BLE_DisconnectSuccess',BLE_DisconnectSuccess);\n\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\n\nBLE_DisconnectSuccessTimestamp = new Date(msg.topic - offset).toISOString().replace(\"T\", \" \").replace(reg, \"\");\nmsg.topic = BLE_DisconnectSuccessTimestamp;\nglobal.set('BLE_DisconnectSuccessTimestamp',BLE_DisconnectSuccessTimestamp);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":2320,"wires":[["c22564933dc3258c"]]},{"id":"c22564933dc3258c","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":2320,"wires":[]},{"id":"6e1aa8e336f7d0ea","type":"link in","z":"dbfdd28e.d60f","name":"BLE_Connection_Bluetoothctl disconnect","links":["9eb116a6b8b13106"],"x":55,"y":2180,"wires":[["e635c14b188b0033"]]},{"id":"9fece97fc2c11f04","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl remove","addpay":"payload","append":"","useSpawn":"false","timer":"5","winHide":false,"oldrc":false,"name":"Bluetoothctl Remove","x":420,"y":560,"wires":[["45c7f7108a622efa"],["3729a020b17fb01c"],["178ab86c2ab75759","35207e5854f09737"]]},{"id":"45c7f7108a622efa","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":520,"wires":[]},{"id":"308843987c6e4066","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"BLE_DeviceMAC","payloadType":"global","x":140,"y":560,"wires":[["9fece97fc2c11f04"]]},{"id":"178ab86c2ab75759","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":600,"wires":[]},{"id":"3729a020b17fb01c","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":560,"wires":[]},{"id":"484915addc2c1133","type":"comment","z":"dbfdd28e.d60f","name":"Pairing Process","info":"","x":140,"y":20,"wires":[]},{"id":"be19f30f4b237139","type":"comment","z":"dbfdd28e.d60f","name":"GoPro - Verbindungen Zurücksetzen und GoPro in Pairing Modus versetzten: Neues Gerät --> GoPro App vern","info":"","x":430,"y":60,"wires":[]},{"id":"1b93b0417c25d221","type":"switch","z":"dbfdd28e.d60f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"empty"},{"t":"nempty"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":2560,"wires":[[],["60e3a6dec38d35b4"]]},{"id":"dab99e334f918aef","type":"comment","z":"dbfdd28e.d60f","name":"2mal ausführen","info":"","x":120,"y":600,"wires":[]},{"id":"8ce9c8e7bb67d23a","type":"link out","z":"dbfdd28e.d60f","name":"BLE_Connection --> HTTP_from_MySQL_FinalizePairing","mode":"link","links":["4396ec6d35e914eb"],"x":775,"y":1680,"wires":[]},{"id":"932df7fb5078567b","type":"change","z":"dbfdd28e.d60f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1600,"wires":[["8ce9c8e7bb67d23a"]]},{"id":"60d550081aad2696","type":"comment","z":"dbfdd28e.d60f","name":"GoPro - GoPro erneut in Pairing Modus versetzten: Neues Gerät verbinden -> SmartRemote","info":"","x":380,"y":1700,"wires":[]},{"id":"1ccab08185f3ad95","type":"link in","z":"dbfdd28e.d60f","name":"BLE_Connection_ParingProcess --> DB_Connectivity_BLE Pair","links":["1b70b9832d39b0e8"],"x":55,"y":120,"wires":[["5b99c2a38427ff16"]]},{"id":"0af131849c73d93c","type":"change","z":"dbfdd28e.d60f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":880,"wires":[["39b9a9958d52b9c4"]]},{"id":"1bd3bc49820aa874","type":"comment","z":"dbfdd28e.d60f","name":"BLE_Surveillance","info":"","x":150,"y":2420,"wires":[]},{"id":"31b398b1f410f429","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl pair","addpay":"payload","append":"| grep CHG | grep Paired","useSpawn":"false","timer":"0","winHide":false,"oldrc":false,"name":"Bluetoothctl Pair","x":400,"y":1200,"wires":[["5b50931f393311a0","b156afbaaa18c0d1"],["628b59b56472f35a"],["af5c0bcbbd7e6145"]]},{"id":"5b50931f393311a0","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1160,"wires":[]},{"id":"af5c0bcbbd7e6145","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1240,"wires":[]},{"id":"628b59b56472f35a","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":1200,"wires":[]},{"id":"cea4955a45befa4d","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"BLE_DeviceMAC","payloadType":"global","x":140,"y":1200,"wires":[["31b398b1f410f429"]]},{"id":"429855333cb2e5ea","type":"change","z":"dbfdd28e.d60f","name":"setze BLE_DeviceMAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"BLE_DeviceMAC","tot":"global"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1120,"wires":[["31b398b1f410f429"]]},{"id":"8d83c3aa7d8b40bd","type":"change","z":"dbfdd28e.d60f","name":"setze BLE_DeviceMAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"BLE_DeviceMAC","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":440,"wires":[["9fece97fc2c11f04"]]},{"id":"35207e5854f09737","type":"delay","z":"dbfdd28e.d60f","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":400,"y":640,"wires":[["6baa780c71cc309f"]]},{"id":"6baa780c71cc309f","type":"change","z":"dbfdd28e.d60f","name":"setze BLE_DeviceMAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"BLE_DeviceMAC","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":720,"wires":[["338d6c572b99d76a"]]},{"id":"338d6c572b99d76a","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl remove","addpay":"payload","append":"","useSpawn":"false","timer":"5","winHide":false,"oldrc":false,"name":"Bluetoothctl Remove","x":420,"y":800,"wires":[[],[],["0af131849c73d93c"]]},{"id":"5ee737825307dbce","type":"change","z":"dbfdd28e.d60f","name":"setze BLE_DeviceMAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"BLE_DeviceMAC","tot":"global"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":1360,"wires":[["589414f7eb8a5c3f"]]},{"id":"30fe85515f19f975","type":"switch","z":"dbfdd28e.d60f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"yes","vt":"str"},{"t":"eq","v":"no","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":330,"y":1360,"wires":[["5ee737825307dbce"],[]]},{"id":"4c189d7d5ddd31cb","type":"comment","z":"dbfdd28e.d60f","name":"BLE Connect","info":"","x":130,"y":1780,"wires":[]},{"id":"032cb99ca60981fe","type":"comment","z":"dbfdd28e.d60f","name":"BLE Disconnect","info":"","x":140,"y":2100,"wires":[]},{"id":"c0dae1f18e52bef6","type":"change","z":"dbfdd28e.d60f","name":"setze BLE_DeviceMAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"BLE_DeviceMAC","tot":"global"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1860,"wires":[["aec71ea8db4599a5"]]},{"id":"e635c14b188b0033","type":"change","z":"dbfdd28e.d60f","name":"setze BLE_DeviceMAC","rules":[{"t":"set","p":"payload","pt":"msg","to":"BLE_DeviceMAC","tot":"global"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":2180,"wires":[["4dc7ba57f5086c13"]]},{"id":"719ca9b40365348f","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"BLE_DeviceMAC","payloadType":"global","x":140,"y":2240,"wires":[["4dc7ba57f5086c13"]]},{"id":"1459a40b135bab37","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":840,"y":360,"wires":[]},{"id":"be5d237afaf536a6","type":"exec","z":"dbfdd28e.d60f","command":"bluetoothctl power on","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetoothctl ON","x":1560,"y":580,"wires":[["a4e3a2c649082bc1"],[],["af0e8e8834031808"]]},{"id":"a4e3a2c649082bc1","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1990,"y":580,"wires":[]},{"id":"5e3ca8f7065bc936","type":"inject","z":"dbfdd28e.d60f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":1080,"y":580,"wires":[["be5d237afaf536a6"]]},{"id":"6d40565f82c6ea95","type":"exec","z":"dbfdd28e.d60f","command":"sudo service bluetooth restart","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetooth.service restart","x":1590,"y":360,"wires":[[],[],["e1d5ccaaf5ca40a6","be5d237afaf536a6"]]},{"id":"6c9dc3bbe680b530","type":"inject","z":"dbfdd28e.d60f","d":true,"name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":1090,"y":360,"wires":[["6d40565f82c6ea95"]]},{"id":"e1d5ccaaf5ca40a6","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1990,"y":340,"wires":[]},{"id":"af0e8e8834031808","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2000,"y":640,"wires":[]},{"id":"4f2fbe0762cc8384","type":"link out","z":"dbfdd28e.d60f","name":"BLE_Connection_BLE_Pairing --> DB_Connectivity","mode":"link","links":["12175058b6aec6a1"],"x":775,"y":1320,"wires":[]},{"id":"e5f46fb4b0a37e06","type":"link out","z":"dbfdd28e.d60f","name":"BLE_Connection_BLE_trust --> DB_Connectivity","mode":"link","links":["82b8220e060e3430"],"x":775,"y":1640,"wires":[]},{"id":"f6848d4872a8bb3f","type":"link out","z":"dbfdd28e.d60f","name":"BLE_Connection_BLE_connect --> DB_Connectivity","mode":"link","links":[],"x":775,"y":2040,"wires":[]},{"id":"15482e866ec94144","type":"link in","z":"dbfdd28e.d60f","name":"BLE_Connection_BLE_Restart --> Wifi_Stability_BLE_Restart","links":["aed238a69c5762fe"],"x":1035,"y":480,"wires":[["6d40565f82c6ea95"]]},{"id":"b33ec1b187085a87","type":"status","z":"dbfdd28e.d60f","name":"Status of Bluetoothctl connect","scope":["aec71ea8db4599a5"],"x":1120,"y":120,"wires":[["6c7ee8464ca9b80f","2367400cc9756d65"]]},{"id":"6c7ee8464ca9b80f","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1330,"y":100,"wires":[]},{"id":"d0ad87720f44aabf","type":"change","z":"dbfdd28e.d60f","name":"close (busy)","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":140,"wires":[["c39458c069b77b16","f3b4e363e4d0360c"]]},{"id":"2367400cc9756d65","type":"switch","z":"dbfdd28e.d60f","name":"","property":"status.fill","propertyType":"msg","rules":[{"t":"eq","v":"blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1330,"y":160,"wires":[["d0ad87720f44aabf"],["e3901406a86dce03"]]},{"id":"e3901406a86dce03","type":"change","z":"dbfdd28e.d60f","name":"open (ready)","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":180,"wires":[["3be1ecf416542881","f3b4e363e4d0360c"]]},{"id":"c39458c069b77b16","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1710,"y":140,"wires":[]},{"id":"3be1ecf416542881","type":"debug","z":"dbfdd28e.d60f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1710,"y":180,"wires":[]},{"id":"f3b4e363e4d0360c","type":"gate","z":"dbfdd28e.d60f","name":"","controlTopic":"control","defaultState":"open","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","defaultCmd":"default","persist":false,"x":1270,"y":360,"wires":[["6d40565f82c6ea95"]]},{"id":"9b4c07b9b415d620","type":"comment","z":"8b3378e67f4ebeb9","name":"BLE_Reconnect","info":"","x":140,"y":80,"wires":[]},{"id":"8f7912e0614cdc19","type":"switch","z":"8b3378e67f4ebeb9","name":"BLE_DeviceConnected - no","property":"BLE_DeviceConnected","propertyType":"global","rules":[{"t":"eq","v":"yes","vt":"str"},{"t":"eq","v":"no","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":400,"y":140,"wires":[[],["f3d94cd7a2ba6db6"]]},{"id":"01eae56a19bf9836","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":170,"y":140,"wires":[["8f7912e0614cdc19"]]},{"id":"f3d94cd7a2ba6db6","type":"link out","z":"8b3378e67f4ebeb9","name":"BLE_WIFI_Stability_Reconnect -->BLE_Connection","mode":"link","links":["4ea62f1dea08b4bb"],"x":675,"y":140,"wires":[]},{"id":"4bae27a13b302a27","type":"switch","z":"8b3378e67f4ebeb9","name":"GoPro_AP_Status - not available","property":"GoPro_AP_Status","propertyType":"global","rules":[{"t":"eq","v":"availabe","vt":"str"},{"t":"eq","v":"not available","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":680,"wires":[[],["2f2a589918a47578","eca8a78b61a2ad07"]]},{"id":"c757f244785ee2c2","type":"comment","z":"8b3378e67f4ebeb9","name":"Wifi GoPro AP re-on over BLE","info":"","x":180,"y":600,"wires":[]},{"id":"376c4e8818311ff1","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"10","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":130,"y":680,"wires":[["4bae27a13b302a27"]]},{"id":"b49b16636bd5a31d","type":"link out","z":"8b3378e67f4ebeb9","name":"BLE_WIFI_Stability_Reconnect -->BLE_from_MySQL_WifiON","mode":"link","links":["4fc071f8f4099767"],"x":915,"y":680,"wires":[]},{"id":"eaeebfd2141c6abc","type":"comment","z":"8b3378e67f4ebeb9","name":"BLE Odroid restart","info":"","x":150,"y":240,"wires":[]},{"id":"ef050340fc68c39f","type":"switch","z":"8b3378e67f4ebeb9","name":"BLE_DeviceConnected - no","property":"BLE_DeviceConnected","propertyType":"global","rules":[{"t":"eq","v":"yes","vt":"str"},{"t":"eq","v":"no","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":400,"y":300,"wires":[[],["2bb0fe9187899cae"]]},{"id":"012ab85a47739c82","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","v":"","vt":"date"}],"repeat":"20","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"str","x":170,"y":300,"wires":[["ef050340fc68c39f"]]},{"id":"aed238a69c5762fe","type":"link out","z":"8b3378e67f4ebeb9","name":"BLE_WIFI_Stability_BLE Restart --> BLE_Connection_BLE_Restart","mode":"link","links":["15482e866ec94144"],"x":935,"y":300,"wires":[]},{"id":"047c7bdb9b5579c1","type":"exec","z":"8b3378e67f4ebeb9","command":"sudo nmcli dev wifi connect","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"wifi connect","x":1110,"y":1700,"wires":[["4478f66f31719eb7","86d68d38acd3d288"],["d7e6e7f074289ded"],["cb079b6d3399012e"]]},{"id":"4478f66f31719eb7","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1290,"y":1660,"wires":[]},{"id":"d7e6e7f074289ded","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1290,"y":1700,"wires":[]},{"id":"cb079b6d3399012e","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1290,"y":1740,"wires":[]},{"id":"2f2a589918a47578","type":"switch","z":"8b3378e67f4ebeb9","name":"BLE_DeviceConnected - yes","property":"BLE_DeviceConnected","propertyType":"global","rules":[{"t":"eq","v":"yes","vt":"str"},{"t":"eq","v":"no","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":680,"y":680,"wires":[["b49b16636bd5a31d","eeef60aec4ace9bd"],[]]},{"id":"eeef60aec4ace9bd","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":810,"y":620,"wires":[]},{"id":"eca8a78b61a2ad07","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":570,"y":620,"wires":[]},{"id":"63640f611d1b41aa","type":"exec","z":"8b3378e67f4ebeb9","command":"nmcli dev wifi list | grep '","addpay":"payload","append":"' | awk '{print \"Wifi-AP \" $1 \" available\"\", Signal: \"$6\", Bars: \"$7}'","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"GoPro AP availabe not connected","x":500,"y":1100,"wires":[["4fb87bbe09c153c5","57af15fc95f6ff44"],["f04b5a98950aa91b"],["212362252c78c6fe"]]},{"id":"4fb87bbe09c153c5","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":1060,"wires":[]},{"id":"f04b5a98950aa91b","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":1100,"wires":[]},{"id":"212362252c78c6fe","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":1140,"wires":[]},{"id":"f5bd295506d1dc32","type":"exec","z":"8b3378e67f4ebeb9","command":"nmcli dev wifi list | grep '*","addpay":"payload","append":"' | awk '{print \"Wifi-AP \" $2 \" available and connected\"\", Signal: \"$7\", Bars: \"$8}'","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"GoPro AP availabe AND connected","x":500,"y":1280,"wires":[["d450f23a8759ba92","d19e3c4eb6734541"],["80efed449c13b7a7"],["3ad4717ab72fa01c"]]},{"id":"d450f23a8759ba92","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":1260,"wires":[]},{"id":"80efed449c13b7a7","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":1300,"wires":[]},{"id":"3ad4717ab72fa01c","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":1340,"wires":[]},{"id":"349bd6667271895c","type":"comment","z":"8b3378e67f4ebeb9","name":"Wifi Odroid-GoPro Connection","info":"","x":140,"y":540,"wires":[]},{"id":"278be9a971d3a4bb","type":"function","z":"8b3378e67f4ebeb9","name":"","func":"msg.payload = '       '+global.get(\"DeviceName\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":1100,"wires":[["63640f611d1b41aa"]]},{"id":"cfb7e569f4ba5d32","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":1100,"wires":[["278be9a971d3a4bb"]]},{"id":"1fcd0209df1781d4","type":"function","z":"8b3378e67f4ebeb9","name":"","func":"msg.payload = '      '+global.get(\"DeviceName\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":1280,"wires":[["f5bd295506d1dc32"]]},{"id":"1be342dbefc96589","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":1280,"wires":[["1fcd0209df1781d4"]]},{"id":"0f28bec82a91a236","type":"exec","z":"8b3378e67f4ebeb9","command":"nmcli dev wifi list | grep '","addpay":"payload","append":"'","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"GoPro AP not availabe","x":460,"y":900,"wires":[["d4c7f8e33c15429d","cb424be95db65ac6"],["d08d3676ecb7bf87"],["6022aecbe0da18b3"]]},{"id":"d4c7f8e33c15429d","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":880,"wires":[]},{"id":"d08d3676ecb7bf87","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":920,"wires":[]},{"id":"6022aecbe0da18b3","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":960,"wires":[]},{"id":"3f4014c8a5a6abb6","type":"function","z":"8b3378e67f4ebeb9","name":"","func":"msg.payload = global.get(\"DeviceName\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":900,"wires":[["0f28bec82a91a236"]]},{"id":"61d9af0b297e105b","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":900,"wires":[["3f4014c8a5a6abb6"]]},{"id":"cb424be95db65ac6","type":"switch","z":"8b3378e67f4ebeb9","name":"","property":"payload","propertyType":"msg","rules":[{"t":"empty"},{"t":"nempty"}],"checkall":"true","repair":false,"outputs":2,"x":710,"y":840,"wires":[["95465a1f28becfeb"],[]]},{"id":"95465a1f28becfeb","type":"function","z":"8b3378e67f4ebeb9","name":"GoPro_AP_Status from nmcli NotAvailable","func":"\nvar value = 'not available';\n\nglobal.set('GoPro_AP_Status',value);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":900,"wires":[[]]},{"id":"57af15fc95f6ff44","type":"switch","z":"8b3378e67f4ebeb9","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"available","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":710,"y":1020,"wires":[["428707f286ee7826"],[]]},{"id":"428707f286ee7826","type":"function","z":"8b3378e67f4ebeb9","name":"GoPro_AP_Status from nmcli Available","func":"\nvar value = 'available';\n\nglobal.set('GoPro_AP_Status',value);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":1080,"wires":[[]]},{"id":"d19e3c4eb6734541","type":"switch","z":"8b3378e67f4ebeb9","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"available and connected","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":710,"y":1220,"wires":[["72ffb63453474e10"],[]]},{"id":"72ffb63453474e10","type":"function","z":"8b3378e67f4ebeb9","name":"GoPro_AP_Status from nmcli AvailableAndConnected","func":"\nvar value = 'available and connected';\n\nglobal.set('GoPro_AP_Status',value);\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":1280,"wires":[[]]},{"id":"37f95da2b603e070","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":1440,"wires":[["67457241725404c0"]]},{"id":"67457241725404c0","type":"function","z":"8b3378e67f4ebeb9","name":"global.get(GoPro_AP_Status)","func":"\n\nmsg.payload = global.get('GoPro_AP_Status');\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":1440,"wires":[["e77a7ad62170b832"]]},{"id":"e77a7ad62170b832","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":680,"y":1440,"wires":[]},{"id":"313a225489d05bd5","type":"function","z":"8b3378e67f4ebeb9","name":"global.get DeviceName and DeviceWifi_PWD","func":"\nmsg.payload = \" \" + \"'\" + global.get(\"DeviceName\") + \"'\" + \" \" + \"password\" + \" \" + \"'\" + global.get(\"DeviceWifi_PWD\") + \"'\";\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":1700,"wires":[["047c7bdb9b5579c1"]]},{"id":"ec26d1de26bafb0b","type":"switch","z":"8b3378e67f4ebeb9","name":"GoPro_AP_Status  - available","property":"GoPro_AP_Status","propertyType":"global","rules":[{"t":"eq","v":"not available","vt":"str"},{"t":"eq","v":"available","vt":"str"},{"t":"eq","v":"available and connected","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":320,"y":1700,"wires":[[],["f5d1fea5de12367c","024af55d9013af46"],[]]},{"id":"f5d1fea5de12367c","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":550,"y":1640,"wires":[]},{"id":"a86a2ede8779e6e6","type":"comment","z":"8b3378e67f4ebeb9","name":"set GoPro_AP_Status","info":"","x":160,"y":800,"wires":[]},{"id":"f484dabfd5a4f9d0","type":"exec","z":"8b3378e67f4ebeb9","command":"sudo rm /etc/NetworkManager/system-connections/GP24640476\\ *[0-9]*","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":760,"y":2380,"wires":[["bae89d37f235c2a0"],["497b956ff38ef5c6"],["1a7b2fc399047f49"]]},{"id":"4421c8cf2e1fcd10","type":"inject","z":"8b3378e67f4ebeb9","d":true,"name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":130,"y":2380,"wires":[["0d181285a5b015d8"]]},{"id":"bae89d37f235c2a0","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":2360,"wires":[]},{"id":"497b956ff38ef5c6","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":2400,"wires":[]},{"id":"1a7b2fc399047f49","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1110,"y":2440,"wires":[]},{"id":"404182642f0aa6b4","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1.5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":110,"y":1700,"wires":[["ec26d1de26bafb0b"]]},{"id":"0d181285a5b015d8","type":"function","z":"8b3378e67f4ebeb9","name":"","func":"msg.payload = global.get(\"DeviceName\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2380,"wires":[["f484dabfd5a4f9d0"]]},{"id":"86d68d38acd3d288","type":"switch","z":"8b3378e67f4ebeb9","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"successfully activated","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1030,"y":1820,"wires":[["657c825a3e8b8310"],[]]},{"id":"5989d4cf6319a78f","type":"comment","z":"8b3378e67f4ebeb9","name":"Wifi GoPro delete unused Wifi-UUIDs from Networkmanager","info":"","x":320,"y":2160,"wires":[]},{"id":"6fd6a3fb0379080a","type":"exec","z":"8b3378e67f4ebeb9","command":"nmcli --pretty --fields ACTIVE,UUID,TYPE con show | grep wifi | grep no | awk '{print $2}' | while read line; do sudo nmcli con delete uuid $line; done","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Delete Unsused Wifi-UUIDs","x":1020,"y":2240,"wires":[["1a498ce7415d47c1"],["0d96dd41b8c77e7d"],["7a32861177576c4b"]]},{"id":"95d96745d4adf9e3","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":130,"y":2240,"wires":[["6fd6a3fb0379080a"]]},{"id":"1a498ce7415d47c1","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1310,"y":2200,"wires":[]},{"id":"0d96dd41b8c77e7d","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1310,"y":2240,"wires":[]},{"id":"7a32861177576c4b","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1310,"y":2280,"wires":[]},{"id":"87de5460613a7ad2","type":"comment","z":"8b3378e67f4ebeb9","name":"Wifi GoPro disable Autoconnect","info":"","x":230,"y":1900,"wires":[]},{"id":"657c825a3e8b8310","type":"exec","z":"8b3378e67f4ebeb9","command":"nmcli --pretty --fields ACTIVE,UUID,TYPE con show | grep wifi | grep yes | awk '{print $2}' | while read line; do sudo nmcli con modify uuid $line autoconnect no; done","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Disable AutoConnect of used Wifi-UUID","x":1060,"y":1980,"wires":[["e4d7bc27033ffeb2"],["3f9ee6ce5efdf3bb"],["84e4d642c5991baf","5d3b700397c0ebb8"]]},{"id":"8c36140b9a6299fa","type":"inject","z":"8b3378e67f4ebeb9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":1980,"wires":[["657c825a3e8b8310"]]},{"id":"e4d7bc27033ffeb2","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1310,"y":1940,"wires":[]},{"id":"3f9ee6ce5efdf3bb","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1310,"y":1980,"wires":[]},{"id":"84e4d642c5991baf","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1310,"y":2020,"wires":[]},{"id":"5d3b700397c0ebb8","type":"switch","z":"8b3378e67f4ebeb9","name":"","property":"payload.code","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1030,"y":2100,"wires":[["6fd6a3fb0379080a"],[]]},{"id":"8b3f76905076198f","type":"comment","z":"8b3378e67f4ebeb9","name":"Wifi GoPro rebuild Connection to AP","info":"","x":200,"y":1540,"wires":[]},{"id":"2aa123bbd7549d3e","type":"comment","z":"8b3378e67f4ebeb9","name":"Wifi GoPro reconnect","info":"","x":200,"y":1600,"wires":[]},{"id":"2bb0fe9187899cae","type":"switch","z":"8b3378e67f4ebeb9","name":"GoPro_AP_Status - available","property":"GoPro_AP_Status","propertyType":"global","rules":[{"t":"eq","v":"availabe","vt":"str"},{"t":"eq","v":"not available","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":680,"y":300,"wires":[["aed238a69c5762fe"],[]]},{"id":"776e59ab657cb890","type":"comment","z":"8b3378e67f4ebeb9","name":"BLE Odroid-GoPro Connection","info":"","x":150,"y":20,"wires":[]},{"id":"024af55d9013af46","type":"gate","z":"8b3378e67f4ebeb9","name":"","controlTopic":"control","defaultState":"open","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","defaultCmd":"default","persist":false,"x":550,"y":1700,"wires":[["313a225489d05bd5"]]},{"id":"27af5eef6b694891","type":"status","z":"8b3378e67f4ebeb9","name":"Status of wifi connect","scope":["047c7bdb9b5579c1"],"x":220,"y":1820,"wires":[["37ed5fd9788e72eb","a58373b3186441c4"]]},{"id":"37ed5fd9788e72eb","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":410,"y":1780,"wires":[]},{"id":"c7e4f7c6966ddc83","type":"change","z":"8b3378e67f4ebeb9","name":"close (busy)","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1820,"wires":[["c5c0bf7bf183197d","024af55d9013af46"]]},{"id":"a58373b3186441c4","type":"switch","z":"8b3378e67f4ebeb9","name":"","property":"status.fill","propertyType":"msg","rules":[{"t":"eq","v":"blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":1840,"wires":[["c7e4f7c6966ddc83"],["a82749d70af06381"]]},{"id":"a82749d70af06381","type":"change","z":"8b3378e67f4ebeb9","name":"open (ready)","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1860,"wires":[["5748aff58ccb40d1","6c1fe5dd900a38c7"]]},{"id":"c5c0bf7bf183197d","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":790,"y":1820,"wires":[]},{"id":"5748aff58ccb40d1","type":"debug","z":"8b3378e67f4ebeb9","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":790,"y":1860,"wires":[]},{"id":"6c1fe5dd900a38c7","type":"delay","z":"8b3378e67f4ebeb9","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":840,"y":1760,"wires":[["024af55d9013af46"]]},{"id":"0f2244ac57644232","type":"exec","z":"990bb909f6d677c8","command":"sudo service hostapd stop && sudo service hostapd start","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"AP stop/start","x":1230,"y":260,"wires":[[],[],[]]},{"id":"8a256da369faa6d3","type":"udp in","z":"990bb909f6d677c8","name":"GoProHero5black receive","iface":"","port":"8383","ipv":"udp4","multicast":"false","group":"10.71.79.101","datatype":"buffer","x":370,"y":300,"wires":[["323765e7fdd1db2c","f54a594057f56594"]]},{"id":"323765e7fdd1db2c","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":410,"y":240,"wires":[]},{"id":"af0f2d8275a0817f","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":970,"y":200,"wires":[]},{"id":"5bc0d64b59fc7558","type":"trigger","z":"990bb909f6d677c8","name":"Watchdog2","op1":"","op2":"GoProOffline","op1type":"nul","op2type":"str","duration":"3.4","extend":true,"overrideDelay":false,"units":"s","reset":"GoProOnline","bytopic":"all","topic":"topic","outputs":1,"x":970,"y":260,"wires":[["af0f2d8275a0817f","0f2244ac57644232","4448c0b18c09cd22"]],"info":"setze \n\"dann\" \"warten auf\" auf 3 x var:delay des Heartbeats für beste Ergebnisse (nicht kürzer sonst beginnt er zu flappen!)\n\nDieses WakeUp Gopro bewirkt:\n1.) Overruled sozusagen die \"Automatische Kammeraabschaltung\" der GoPro - Settings und\n2.) dedektiert und behebt Abrisse in der UDP Kommunikation zwischen Node-red und GoProHero5Black"},{"id":"7155b1f3ba666cf0","type":"comment","z":"990bb909f6d677c8","name":"building UDP Connection","info":"","x":330,"y":160,"wires":[]},{"id":"273fad5ef12db2a6","type":"inject","z":"990bb909f6d677c8","name":"GoProCheck","repeat":"6.7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"GoProCheck","payloadType":"str","x":660,"y":400,"wires":[["aaad3a07e5fba938"]]},{"id":"aaad3a07e5fba938","type":"trigger","z":"990bb909f6d677c8","name":"WatchDog1","op1":"","op2":"GoPro Dead","op1type":"nul","op2type":"str","duration":"6.5","extend":true,"units":"s","reset":"GoProOnline","bytopic":"all","outputs":1,"x":970,"y":360,"wires":[["5bc0d64b59fc7558","7c28eedf7e86e2f7"]]},{"id":"7c28eedf7e86e2f7","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":970,"y":420,"wires":[]},{"id":"2e6705ec5220e309","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":670,"y":240,"wires":[]},{"id":"f54a594057f56594","type":"change","z":"990bb909f6d677c8","name":"GoProOnline - Reset","rules":[{"t":"set","p":"payload","pt":"msg","to":"GoProOnline","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":300,"wires":[["aaad3a07e5fba938","2e6705ec5220e309","5bc0d64b59fc7558","252acee6f195baed"]]},{"id":"252acee6f195baed","type":"link out","z":"990bb909f6d677c8","name":"WakeUp GoPro UDP_GoProOnline->DB_connectivity","links":["d810a272.2ce32"],"x":775,"y":340,"wires":[]},{"id":"4448c0b18c09cd22","type":"link out","z":"990bb909f6d677c8","name":"WakeUp GoPro UDP_GoProOffline->DB_connectivity","links":["d810a272.2ce32"],"x":1075,"y":300,"wires":[]},{"id":"57fb6752b355d8b8","type":"inject","z":"990bb909f6d677c8","name":"ShutterStart","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"b5f90072aa8d11e390460002a5d5c51b\":\"03010101\"}","payloadType":"json","x":1730,"y":2840,"wires":[[]]},{"id":"34a949068e09a171","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1140,"y":140,"wires":[["0f2244ac57644232"]]},{"id":"75ddeba428c893a0","type":"inject","z":"990bb909f6d677c8","name":"ShutterStop","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"b5f90072aa8d11e390460002a5d5c51b\":\"03010100\"}","payloadType":"json","x":1730,"y":2880,"wires":[[]]},{"id":"6ca783202446e7cf","type":"inject","z":"990bb909f6d677c8","name":"WifiOn","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"b5f90072aa8d11e390460002a5d5c51b\":\"03170101\"}","payloadType":"json","x":1750,"y":2760,"wires":[[]]},{"id":"5faa15bb45dc5998","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1470,"y":2680,"wires":[]},{"id":"bec5d4c6c40b41e3","type":"switch","z":"990bb909f6d677c8","name":"GoPro APP (HTTP) down?","property":"status.text","propertyType":"msg","rules":[{"t":"eq","v":"common.status.disconnected","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":780,"y":2440,"wires":[["a456fa9da84f6846"]]},{"id":"bf96d3a3e0013a3c","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1530,"y":1980,"wires":[]},{"id":"05888960316b7914","type":"comment","z":"990bb909f6d677c8","name":"building HTTP Connection","info":"","x":330,"y":1940,"wires":[]},{"id":"01dad2efaf06c9ff","type":"subflow:ec2aab9f.334378","z":"990bb909f6d677c8","d":true,"name":"","env":[],"x":1610,"y":1800,"wires":[]},{"id":"c02c52b52acb997d","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1610,"y":1860,"wires":[]},{"id":"19915304161e82d8","type":"inject","z":"990bb909f6d677c8","name":"Keep Alive","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"b5f90074aa8d11e390460002a5d5c51b\":\"035B0142\"}","payloadType":"json","x":1740,"y":2920,"wires":[[]]},{"id":"15c5ccf1069b873f","type":"inject","z":"990bb909f6d677c8","name":"WifiOFF","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"b5f90072aa8d11e390460002a5d5c51b\":\"03170100\"}","payloadType":"json","x":1740,"y":2800,"wires":[[]]},{"id":"5d7d3e92bef664dd","type":"link in","z":"990bb909f6d677c8","name":"WakeUp GoPro BLE_Status->WakeUp GoPro BLE_Status","links":["39b7041a02395c28"],"x":415,"y":2600,"wires":[["24f973d8a429be8b"]]},{"id":"0f319b714472c33c","type":"change","z":"990bb909f6d677c8","name":"open gate","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":2580,"wires":[["6d1edbc0b283c22a"]]},{"id":"24f973d8a429be8b","type":"switch","z":"990bb909f6d677c8","name":"GoPro BLE connected?","property":"status.text","propertyType":"msg","rules":[{"t":"eq","v":"generic-ble.status.connected","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":670,"y":2600,"wires":[["0f319b714472c33c"],["ab825424d54545be"]]},{"id":"ab825424d54545be","type":"change","z":"990bb909f6d677c8","name":"queue gate","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":2620,"wires":[["b8079991dc713794","4eb1a5c86776bfa8"]]},{"id":"b8079991dc713794","type":"q-gate","z":"990bb909f6d677c8","name":"BLE Gate","controlTopic":"control","defaultState":"queueing","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","queueCmd":"queue","defaultCmd":"default","triggerCmd":"trigger","flushCmd":"flush","resetCmd":"reset","maxQueueLength":"1","keepNewest":true,"qToggle":false,"persist":false,"x":1260,"y":2560,"wires":[["95d3ad1cb4d0c1b5","562d1231801efab4"]]},{"id":"6844437fe58b7093","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1280,"y":2740,"wires":[["bf35bcbf9fe0bdd0"]]},{"id":"95d3ad1cb4d0c1b5","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1470,"y":2560,"wires":[]},{"id":"bf35bcbf9fe0bdd0","type":"subflow:699c80d1.c0993","z":"990bb909f6d677c8","d":true,"name":"","env":[],"x":1270,"y":2680,"wires":[["5faa15bb45dc5998","9dc59f71f7be1bc5","4eb1a5c86776bfa8"]]},{"id":"6d1edbc0b283c22a","type":"delay","z":"990bb909f6d677c8","name":"delay","pauseType":"delay","timeout":"1500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1070,"y":2560,"wires":[["b8079991dc713794","4eb1a5c86776bfa8"]]},{"id":"6fd2a93fba243355","type":"subflow:a6748f13.b6d87","z":"990bb909f6d677c8","d":true,"name":"","env":[],"x":1530,"y":2040,"wires":[["bf96d3a3e0013a3c"]]},{"id":"bfedd30820811390","type":"change","z":"990bb909f6d677c8","name":"open gate","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":2060,"wires":[["fc6a91185ddc9fd8"]]},{"id":"0d0c37ef71200876","type":"switch","z":"990bb909f6d677c8","name":"GoPro APP (HTTP) up?","property":"status.text","propertyType":"msg","rules":[{"t":"eq","v":"common.status.connected","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":670,"y":2080,"wires":[["bfedd30820811390"],["d905b2d1d2aa1ff8"]]},{"id":"d905b2d1d2aa1ff8","type":"change","z":"990bb909f6d677c8","name":"queue gate","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"queue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":2100,"wires":[["9dc59f71f7be1bc5"]]},{"id":"9dc59f71f7be1bc5","type":"q-gate","z":"990bb909f6d677c8","name":"tcp Gate","controlTopic":"control","defaultState":"queueing","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","queueCmd":"queue","defaultCmd":"default","triggerCmd":"trigger","flushCmd":"flush","resetCmd":"reset","maxQueueLength":"1","keepNewest":true,"qToggle":false,"persist":false,"x":1320,"y":2080,"wires":[["6fd2a93fba243355","06096eb07ef6550a"]]},{"id":"06096eb07ef6550a","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1510,"y":2140,"wires":[]},{"id":"fc6a91185ddc9fd8","type":"delay","z":"990bb909f6d677c8","name":"delay","pauseType":"delay","timeout":"1500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1090,"y":2040,"wires":[["9dc59f71f7be1bc5"]]},{"id":"723194056578cb0f","type":"tcp-ping","z":"990bb909f6d677c8","ip":"10.5.5.9","port":"80","count":"3","interval":"1000","timeout":"3000","topic":"check","name":"","x":660,"y":2260,"wires":[["e82b43e8ea4edbd1","89dd059e3bdeddb4"]]},{"id":"43875d88ca566946","type":"inject","z":"990bb909f6d677c8","name":"Check tcp","props":[{"p":"payload"},{"p":"topic","vt":"str"},{"p":"status.text","v":"","vt":"str"}],"repeat":"4","crontab":"","once":false,"onceDelay":0.1,"topic":"check","payload":"","payloadType":"date","x":490,"y":2260,"wires":[["723194056578cb0f"]]},{"id":"e82b43e8ea4edbd1","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":2200,"wires":[]},{"id":"89dd059e3bdeddb4","type":"function","z":"990bb909f6d677c8","name":"GoProHttpConnected","func":"\n\nif (msg.payload.sent - msg.payload.success == 0) {\nmsg.status.text = \"common.status.connected\";\n}\nelse {\nmsg.status.text = \"common.status.disconnected\";\n}\n\nglobal.set('GoProHttpConnected',msg.status.text)\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":2260,"wires":[["a53071774decba67","2ee67e6b8c1e83cd","0d0c37ef71200876","995055bbf0b92500"]]},{"id":"a53071774decba67","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1070,"y":2300,"wires":[]},{"id":"2ee67e6b8c1e83cd","type":"link out","z":"990bb909f6d677c8","name":"WakeUp GoPro HTTP tcp Status->DB_Connectivity","links":["a4bef44c.c585c8","3daf02145174eb29"],"x":1115,"y":2260,"wires":[]},{"id":"a456fa9da84f6846","type":"subflow:e29abac8.fc1078","z":"990bb909f6d677c8","d":true,"name":"","env":[],"x":1030,"y":2440,"wires":[["b8079991dc713794","574278627cb27e9b"]]},{"id":"574278627cb27e9b","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1210,"y":2360,"wires":[]},{"id":"4eb1a5c86776bfa8","type":"q-gate","z":"990bb909f6d677c8","name":"BLE Gate","controlTopic":"control","defaultState":"queueing","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","queueCmd":"queue","defaultCmd":"default","triggerCmd":"trigger","flushCmd":"flush","resetCmd":"reset","maxQueueLength":"1","keepNewest":true,"qToggle":false,"persist":false,"x":1260,"y":2800,"wires":[[]]},{"id":"562d1231801efab4","type":"delay","z":"990bb909f6d677c8","name":"delay","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1250,"y":2620,"wires":[["bf35bcbf9fe0bdd0"]]},{"id":"cf5e2baaaaefc958","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"50","crontab":"","once":true,"onceDelay":"0.1","topic":"control","payload":"open","payloadType":"str","x":620,"y":2320,"wires":[["995055bbf0b92500"]]},{"id":"65064c588aa4ffc8","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"50","crontab":"","once":true,"onceDelay":"1.5","topic":"control","payload":"queue","payloadType":"str","x":620,"y":2360,"wires":[["995055bbf0b92500"]]},{"id":"995055bbf0b92500","type":"q-gate","z":"990bb909f6d677c8","name":"tcp Gate","controlTopic":"control","defaultState":"open","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","queueCmd":"queue","defaultCmd":"default","triggerCmd":"trigger","flushCmd":"flush","resetCmd":"reset","maxQueueLength":"1","keepNewest":true,"qToggle":false,"persist":false,"x":840,"y":2340,"wires":[["bec5d4c6c40b41e3"]]},{"id":"0a239c848665980c","type":"comment","z":"990bb909f6d677c8","name":"checking GoPro AP (tcp)","info":"","x":430,"y":2200,"wires":[]},{"id":"7cd705ad4ff34603","type":"comment","z":"990bb909f6d677c8","name":"resetting GoPro AP (tcp)","info":"","x":430,"y":2460,"wires":[]},{"id":"f6061baf0e024387","type":"function","z":"990bb909f6d677c8","name":"","func":"//var NewMsg = {payload: 0};\nif (msg.payload[0] + msg.payload[1] == 3) {\nmsg.payload = 1;\n}\nelse {\nmsg.payload = 0;\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1860,"y":1320,"wires":[["70f42badac7fe0c9","0238488c85636e1b"]]},{"id":"70f42badac7fe0c9","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1930,"y":1380,"wires":[]},{"id":"47971f45218c490e","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1630,"y":1300,"wires":[]},{"id":"82067f787e357703","type":"buffer-array","z":"990bb909f6d677c8","name":"Buffer_Value_Pair","bufferLen":"2","startWhenFilled":true,"x":1670,"y":1360,"wires":[["f6061baf0e024387","da4e800d459e9346"]]},{"id":"da4e800d459e9346","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1650,"y":1420,"wires":[]},{"id":"0238488c85636e1b","type":"link out","z":"990bb909f6d677c8","name":"WakeUp_GoPro_Keep_Alive","links":[],"x":1975,"y":1000,"wires":[]},{"id":"8bdb2b69c2cc903a","type":"comment","z":"990bb909f6d677c8","name":"building BLE Connection","info":"","x":330,"y":720,"wires":[]},{"id":"02696f96f879a9f8","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"connect","payload":"","payloadType":"date","x":1250,"y":700,"wires":[[]]},{"id":"0477d075146a9435","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"disconnect","payload":"","payloadType":"date","x":1240,"y":780,"wires":[[]]},{"id":"65912e06ac0fd625","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1450,"y":860,"wires":[]},{"id":"21b505678fe7e274","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"scanStart","payloadType":"date","x":1250,"y":660,"wires":[[]]},{"id":"16831c3c66043cd1","type":"exec","z":"990bb909f6d677c8","d":true,"command":"sudo service bluetooth restart","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"Bluetooth.service restart","x":930,"y":1560,"wires":[["67507bac1f44caac","28ea711c9818a2f4"],[],[]]},{"id":"fe7510f1695bc256","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":880,"y":1620,"wires":[["16831c3c66043cd1"]]},{"id":"6f6361687ce4ad3f","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"read","payload":"","payloadType":"date","x":1260,"y":740,"wires":[[]]},{"id":"790bf51e69c21a97","type":"status","z":"990bb909f6d677c8","name":"Status BLE out GoPro 8539","scope":["d0934d9f.1df27"],"x":340,"y":860,"wires":[["39b7041a02395c28","9469988fc9c0fb42","5f80cb93d46848e1","a773ce34a83b9a08"]]},{"id":"39b7041a02395c28","type":"link out","z":"990bb909f6d677c8","name":"WakeUp GoPro BLE_Status->DB_connectivity","links":["5d7d3e92bef664dd","ccc52554.62e3e8","edb80261dfd8d37f"],"x":555,"y":780,"wires":[]},{"id":"9469988fc9c0fb42","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":390,"y":780,"wires":[]},{"id":"5f80cb93d46848e1","type":"switch","z":"990bb909f6d677c8","name":"GoPro BLE reconnect","property":"status.text","propertyType":"msg","rules":[{"t":"eq","v":"generic-ble.status.disconnected","vt":"str"},{"t":"eq","v":"generic-ble.status.missing","vt":"str"},{"t":"eq","v":"generic-ble.status.connected","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":640,"y":860,"wires":[["660e8fcce632ae2d","3e7d6d358bb29bd0","9093a4ab0824f9be"],["16831c3c66043cd1","660e8fcce632ae2d"],["d3db9d3654d7395b","db2ba3f850973ed2"]]},{"id":"9093a4ab0824f9be","type":"change","z":"990bb909f6d677c8","name":"Connect","rules":[{"t":"set","p":"topic","pt":"msg","to":"connect","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":860,"wires":[[]]},{"id":"d5d2fba66e733651","type":"inject","z":"990bb909f6d677c8","name":"Get Camera Info","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"b5f90074aa8d11e390460002a5d5c51b\":\"3C\"}","payloadType":"json","x":620,"y":1180,"wires":[[]]},{"id":"a8dbda86f963a606","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":960,"y":1060,"wires":[]},{"id":"67507bac1f44caac","type":"function","z":"990bb909f6d677c8","name":"BLE_reconnect_counter","func":"\nvar ts = new Date();\nvar offset = ts.getTimezoneOffset()*60000;\nvar counter = context.get('counter') || 0;\nvar NewMsg = {payload : 0, counter : counter};\n\nNewMsg.payload = (new Date(Date.now() - offset)).toISOString();\n\nif( msg.rc.code == \"0\" )\n{\n    counter++;\n}\ncontext.set('counter', counter);\n\nreturn NewMsg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1190,"y":1560,"wires":[["b77f548344bd88f2","0e781052f3560396"]]},{"id":"b77f548344bd88f2","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1390,"y":1520,"wires":[]},{"id":"0e781052f3560396","type":"link out","z":"990bb909f6d677c8","name":"WakeUpGopro_BLE_reconnect-->BlackBox_to_MySQL_insert_BLE_reconnect","links":["3c199cc1.ecbb94"],"x":1355,"y":1600,"wires":[]},{"id":"28ea711c9818a2f4","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1130,"y":1520,"wires":[]},{"id":"8eb906d1ab8b0a1b","type":"exec","z":"990bb909f6d677c8","d":true,"command":"bluetoothctl power off && bluetoothctl power on && bluetoothctl scan on","addpay":false,"append":"","useSpawn":"false","timer":"20","winHide":false,"oldrc":false,"name":"Bluetoothctl ON/OFF","x":1400,"y":1800,"wires":[["b11763922e9123ba"],[],["c02c52b52acb997d","01dad2efaf06c9ff"]]},{"id":"fcbef81225776f42","type":"inject","z":"990bb909f6d677c8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1160,"y":1680,"wires":[["8eb906d1ab8b0a1b"]]},{"id":"b11763922e9123ba","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1350,"y":1740,"wires":[]},{"id":"660e8fcce632ae2d","type":"trigger","z":"990bb909f6d677c8","name":"BLE Error Reset","op1":"","op2":"BLE Error","op1type":"nul","op2type":"str","duration":"15","extend":false,"overrideDelay":false,"units":"s","reset":"generic-ble.status.connected","bytopic":"all","topic":"topic","outputs":1,"x":1140,"y":1800,"wires":[["8eb906d1ab8b0a1b","74dcfb759a5c06b6"]],"info":"setze \n\"dann\" \"warten auf\" auf 3 x var:delay des Heartbeats für beste Ergebnisse (nicht kürzer sonst beginnt er zu flappen!)\n\nDieses WakeUp Gopro bewirkt:\n1.) Overruled sozusagen die \"Automatische Kammeraabschaltung\" der GoPro - Settings und\n2.) dedektiert und behebt Abrisse in der UDP Kommunikation zwischen Node-red und GoProHero5Black"},{"id":"3e7d6d358bb29bd0","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":710,"y":780,"wires":[]},{"id":"d3db9d3654d7395b","type":"change","z":"990bb909f6d677c8","name":"Connect","rules":[{"t":"set","p":"payload","pt":"msg","to":"generic-ble.status.connected","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":1800,"wires":[["660e8fcce632ae2d","82b651ab134c6274"]]},{"id":"82b651ab134c6274","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":890,"y":1740,"wires":[]},{"id":"74dcfb759a5c06b6","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1170,"y":1740,"wires":[]},{"id":"50ec39b94b1aa7ab","type":"inject","z":"990bb909f6d677c8","name":"Keep Alive","props":[{"p":"payload"}],"repeat":"10","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"b5f90074aa8d11e390460002a5d5c51b\":\"035B0142\"}","payloadType":"json","x":970,"y":1420,"wires":[["bcfcf3fd5c96a5d9"]]},{"id":"9543b6040ecd05f2","type":"comment","z":"990bb909f6d677c8","name":"stabilzing BLE Connection","info":"","x":390,"y":1240,"wires":[]},{"id":"71dcb5c96dbc9c95","type":"comment","z":"990bb909f6d677c8","d":true,"name":"restarting BLE Service","info":"","x":420,"y":1560,"wires":[]},{"id":"1a64f9999f624a5b","type":"comment","z":"990bb909f6d677c8","name":"restarting NodeRed","info":"","x":410,"y":1800,"wires":[]},{"id":"0a2c1722c25fee8c","type":"change","z":"990bb909f6d677c8","d":true,"name":"","rules":[{"t":"delete","p":"payload","pt":"msg"},{"t":"set","p":"payload","pt":"msg","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":1300,"wires":[["47971f45218c490e","82067f787e357703"]]},{"id":"9eef6270b2875751","type":"change","z":"990bb909f6d677c8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1430,"y":1360,"wires":[["7ab1643bac81b2e1","82067f787e357703"]]},{"id":"7ab1643bac81b2e1","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1370,"y":1420,"wires":[]},{"id":"ba98c2f08e9e4b1c","type":"comment","z":"990bb909f6d677c8","name":"checking BLE alive","info":"","x":410,"y":1340,"wires":[]},{"id":"fe4efc7f406ce896","type":"link in","z":"990bb909f6d677c8","name":"WakeUP GoPro Bluetoothctl restart","links":["db8c298d.f62138"],"x":935,"y":1860,"wires":[["a1242b50a2bff8b6","a0dc54e90e5c5ea9"]]},{"id":"ae2cbfb45439b221","type":"comment","z":"990bb909f6d677c8","name":"stuck @ connected","info":"","x":490,"y":1380,"wires":[]},{"id":"0313a38be10d3d09","type":"comment","z":"990bb909f6d677c8","name":"stuck @ missing or disconnected","info":"","x":530,"y":1840,"wires":[]},{"id":"a1242b50a2bff8b6","type":"switch","z":"990bb909f6d677c8","name":"GoPro BLE dead","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":" GoPro BLE active","vt":"str"},{"t":"eq","v":" GoPro BLE dead","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1130,"y":1860,"wires":[[],["8eb906d1ab8b0a1b","a581dd3b36c27117"]]},{"id":"a0dc54e90e5c5ea9","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1040,"y":1920,"wires":[]},{"id":"bcfcf3fd5c96a5d9","type":"gate","z":"990bb909f6d677c8","d":true,"name":"","controlTopic":"control","defaultState":"open","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","defaultCmd":"default","persist":false,"x":1150,"y":1300,"wires":[["9eef6270b2875751"]]},{"id":"9397290dc6fd02a7","type":"change","z":"990bb909f6d677c8","name":"open gate","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"open","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":1280,"wires":[["f2a1cc7f05defc66"]]},{"id":"a773ce34a83b9a08","type":"switch","z":"990bb909f6d677c8","name":"GPro BLE connected ?","property":"status.text","propertyType":"msg","rules":[{"t":"eq","v":"generic-ble.status.connected","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":640,"y":1300,"wires":[["9397290dc6fd02a7"],["b76be7a34ba33209"]]},{"id":"b76be7a34ba33209","type":"change","z":"990bb909f6d677c8","name":"close gate","rules":[{"t":"set","p":"topic","pt":"msg","to":"control","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"close","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":1340,"wires":[["bcfcf3fd5c96a5d9"]]},{"id":"f2a1cc7f05defc66","type":"delay","z":"990bb909f6d677c8","name":"delay","pauseType":"delay","timeout":"1500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"outputs":1,"x":1010,"y":1280,"wires":[["bcfcf3fd5c96a5d9"]]},{"id":"a581dd3b36c27117","type":"debug","z":"990bb909f6d677c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1320,"y":1920,"wires":[]},{"id":"0a7350a48f5a8d01","type":"change","z":"990bb909f6d677c8","name":"Get Camera Info","rules":[{"t":"set","p":"payload","pt":"msg","to":"{     \"b5f90074aa8d11e390460002a5d5c51b\": \"3C\" }","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":1040,"wires":[[]]},{"id":"db2ba3f850973ed2","type":"delay","z":"990bb909f6d677c8","name":"delay","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":630,"y":960,"wires":[["0a7350a48f5a8d01"]]},{"id":"fe09fb63.f859e8","type":"inject","z":"e089622.6a906a","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"test","payloadType":"str","x":250,"y":160,"wires":[["6c1851d1.8b28f"]]},{"id":"cdb38d47.cd149","type":"debug","z":"e089622.6a906a","name":"","active":true,"console":"false","complete":"true","x":870,"y":160,"wires":[]},{"id":"4b9c998a.373cc8","type":"inject","z":"e089622.6a906a","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"","payloadType":"date","x":240,"y":260,"wires":[["eda764e1.8074b8"]]},{"id":"eda764e1.8074b8","type":"change","z":"e089622.6a906a","name":"","rules":[{"t":"set","p":"trigger","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":260,"wires":[["6c1851d1.8b28f"]]},{"id":"c5d04e3b.efe1f","type":"inject","z":"e089622.6a906a","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"","payloadType":"date","x":240,"y":320,"wires":[["4f231841.69dd78"]]},{"id":"4f231841.69dd78","type":"change","z":"e089622.6a906a","name":"Bypass set to true","rules":[{"t":"set","p":"bypass","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":320,"wires":[["6c1851d1.8b28f"]]},{"id":"49783823.727dd8","type":"inject","z":"e089622.6a906a","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"test","payloadType":"str","x":250,"y":120,"wires":[["b6103616.738bb8"]]},{"id":"b6103616.738bb8","type":"change","z":"e089622.6a906a","name":"","rules":[{"t":"set","p":"ttl","pt":"msg","to":"2000","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":120,"wires":[["6c1851d1.8b28f"]]},{"id":"61c94eb4.f285e","type":"inject","z":"e089622.6a906a","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"","payloadType":"date","x":240,"y":360,"wires":[["f80b3fd.988a6c"]]},{"id":"f80b3fd.988a6c","type":"change","z":"e089622.6a906a","name":"Bypass set to false","rules":[{"t":"set","p":"bypass","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":360,"wires":[["6c1851d1.8b28f"]]},{"id":"86543cdf.3706c","type":"inject","z":"e089622.6a906a","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"","payloadType":"date","x":240,"y":220,"wires":[["6d3ba29e.ea192c"]]},{"id":"6d3ba29e.ea192c","type":"change","z":"e089622.6a906a","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":220,"wires":[["6c1851d1.8b28f"]]},{"id":"5190f4e7.cabbbc","type":"inject","z":"e089622.6a906a","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"","payloadType":"date","x":240,"y":80,"wires":[["61d34c47.cdfc94"]]},{"id":"61d34c47.cdfc94","type":"change","z":"e089622.6a906a","name":"","rules":[{"t":"set","p":"queueCount","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":80,"wires":[["6c1851d1.8b28f"]]},{"id":"6c1851d1.8b28f","type":"simple-queue","z":"e089622.6a906a","name":"","firstMessageBypass":false,"bypassInterval":"0","x":690,"y":160,"wires":[["cdb38d47.cd149"]]},{"id":"b02773c1.e266b8","type":"debug","z":"e089622.6a906a","name":"output","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":670,"y":700,"wires":[]},{"id":"99687dff.3ddd7","type":"q-gate","z":"e089622.6a906a","name":"","controlTopic":"control","defaultState":"queueing","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","queueCmd":"queue","defaultCmd":"default","triggerCmd":"trigger","flushCmd":"flush","resetCmd":"reset","maxQueueLength":"100","keepNewest":true,"qToggle":false,"persist":false,"x":540,"y":700,"wires":[["b02773c1.e266b8"]]},{"id":"c18d22cc.a63ca","type":"inject","z":"e089622.6a906a","name":"open","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"open","payloadType":"str","x":350,"y":560,"wires":[["99687dff.3ddd7"]]},{"id":"f8668471.4f45f8","type":"inject","z":"e089622.6a906a","name":"input","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":290,"y":700,"wires":[["99687dff.3ddd7"]]},{"id":"56c10d38.aa25c4","type":"inject","z":"e089622.6a906a","name":"trigger","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"trigger","payloadType":"str","x":350,"y":640,"wires":[["99687dff.3ddd7"]]},{"id":"c6fce5f0.0ad3b8","type":"inject","z":"e089622.6a906a","name":"flush","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"flush","payloadType":"str","x":350,"y":600,"wires":[["99687dff.3ddd7"]]},{"id":"5d45eb15.7a02e4","type":"inject","z":"e089622.6a906a","name":"queue","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"queue","payloadType":"str","x":350,"y":760,"wires":[["99687dff.3ddd7"]]},{"id":"8bc7606f.d8fed","type":"inject","z":"e089622.6a906a","name":"default","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"control","payload":"default","payloadType":"str","x":350,"y":800,"wires":[["99687dff.3ddd7"]]},{"id":"17a6b873.473678","type":"subflow:6c259dd5.72f0d4","z":"e089622.6a906a","name":"","env":[],"x":350,"y":980,"wires":[["d12feda403065fe9"],["bd54517e742cdde3"]]},{"id":"4329f3049613f4c4","type":"inject","z":"e089622.6a906a","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":940,"wires":[["17a6b873.473678"]]},{"id":"d12feda403065fe9","type":"debug","z":"e089622.6a906a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":660,"y":920,"wires":[]},{"id":"bd54517e742cdde3","type":"debug","z":"e089622.6a906a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":680,"y":1020,"wires":[]}]